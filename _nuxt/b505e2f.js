(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1094:function(e,t){},1116:function(e,t,n){"use strict";n(54);var l=n(2),c=(n(27),n(14),n(69),{data:function(){return{uploadingFile:!1,selectedFile:null,file:null,ipfsExplorer:this.$blockchain.sdk.config.ipfsNode}},methods:{getSelectedFile:function(){this.$refs.file&&(this.selectedFile=this.$refs.file.files[0])},uploadFile:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.selectedFile){t.next=26;break}if(e.uploadingFile=!0,(n=new FormData).append("file",e.selectedFile),t.prev=4,!(e.selectedFile.size>1e6)){t.next=11;break}throw e.selectedFile=null,e.$refs.file.value="",new Error("Max file size allowed is 1 MB");case 11:return t.next=13,fetch("".concat(e.ipfsExplorer,"/api/v0/add?pin=true"),{method:"POST",body:n});case 13:return l=t.sent,t.next=16,l.json();case 16:e.file=t.sent,e.$emit("upload","".concat(e.ipfsExplorer,"/ipfs/").concat(e.file.Hash)),e.selectedFile=null,e.$refs.file.value="";case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(4),e.$blockchain.handleError(t.t0);case 25:e.uploadingFile=!1;case 26:case"end":return t.stop()}}),t,null,[[4,22]])})))()}}}),r=n(22),component=Object(r.a)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"control"},[t("div",{staticClass:"file has-name is-fullwidth"},[t("label",{staticClass:"file-label"},[t("input",{ref:"file",staticClass:"file-input",attrs:{id:"file",type:"file"},on:{change:e.getSelectedFile}}),e._v(" "),e._m(0),e._v(" "),t("span",{staticClass:"file-name"},[e.selectedFile?t("span",[e._v(e._s(e.selectedFile.name))]):e._e()]),e._v(" "),t("span",[t("button",{staticClass:"button is-primary",class:{"is-loading":e.uploadingFile},attrs:{disabled:!e.selectedFile},on:{click:function(t){return t.preventDefault(),e.uploadFile.apply(null,arguments)}}},[e._v("Upload to IPFS")])])])])])}),[function(){var e=this,t=e._self._c;return t("span",{staticClass:"file-cta"},[t("span",{staticClass:"file-icon"},[t("i",{staticClass:"fa fa-upload"})]),e._v(" "),t("span",{staticClass:"file-label"},[e._v("\n          Choose a fileâ€¦\n        ")])])}],!1,null,null,null);t.a=component.exports},1319:function(e,t,n){"use strict";n.r(t);n(14),n(126),n(54),n(34),n(81),n(69),n(53),n(43),n(55),n(56);var l=n(19),c=n(2),r=(n(27),n(36),n(45),n(1102)),o=n(341),f=n(1116);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h={components:{VueSimplemde:r.a,SuccessModal:o.a,UploadToIpfs:f.a},middleware:["auth"],data:function(){return{loading:!1,successTitle:null,successMessage:null,errors:[],qualificationIpfs:{name:null,description:null,image:null,ishidden:!1}}},methods:{selectImage:function(e){this.qualificationIpfs.image=e},createQualification:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("trying create quali"),t.prev=1,!e.validateForm()){t.next=17;break}return e.errors=[],e.loading=!0,n=v({},e.qualificationIpfs),t.next=8,e.$blockchain.createQualification(n.name,n.description,n.type,n.image,n.ishidden);case 8:return l=t.sent,e.successTitle="Qualification created Succesfully.",e.successMessage="Waiting for transaction to complete before continuing",t.next=13,e.$blockchain.waitForTransaction(l);case 13:e.$store.dispatch("transaction/addTransaction",l),Object.keys(e.qualificationIpfs).forEach((function(t){e.qualificationIpfs[t]=null})),e.loading=!1,e.$router.push("/manage");case 17:t.next=24;break;case 19:t.prev=19,t.t0=t.catch(1),console.error(t.t0),e.loading=!1,e.errors.push(t.t0);case 24:case"end":return t.stop()}}),t,null,[[1,19]])})))()},validateForm:function(){return this.error=[],null!=this.qualificationIpfs.name||(this.error.push("Name for qualification is required."),!1)}}},m=n(22),component=Object(m.a)(h,(function(){var e=this,t=e._self._c;return t("section",{staticClass:"section"},[t("div",{staticClass:"container"},[e.loading?t("div",{staticClass:"loader-wrapper is-active"},[t("img",{attrs:{src:n(340)}}),e._v(" "),t("br"),e._v(" "),t("span",{staticClass:"laoding-text"},[e._v("Waiting for the transaction to complete. ")])]):e._e(),e._v(" "),t("h1",{staticClass:"title"},[e._v("\n      New Qualification\n    ")]),e._v(" "),e.errors.length?t("div",e._l(e.errors,(function(n){return t("div",{key:e.toString(n),staticClass:"notification is-danger is-light"},[e._v("\n        "+e._s(n)+"\n      ")])})),0):e._e(),e._v(" "),t("form",{on:{submit:function(t){return t.preventDefault(),e.createQualification.apply(null,arguments)}}},[t("div",{staticClass:"block basic-info-group"},[t("div",{staticClass:"field"},[e._m(0),e._v(" "),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.qualificationIpfs.name,expression:"qualificationIpfs.name"}],staticClass:"input",attrs:{type:"text",placeholder:"Public name for your qualification",required:""},domProps:{value:e.qualificationIpfs.name},on:{input:function(t){t.target.composing||e.$set(e.qualificationIpfs,"name",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"field"},[e._m(1),e._v(" "),t("div",{staticClass:"control"},[t("vue-simplemde",{attrs:{configs:{promptUrls:!0,status:!1,spellChecker:!1,placeholder:"Public description for your qualification"}},model:{value:e.qualificationIpfs.description,callback:function(t){e.$set(e.qualificationIpfs,"description",t)},expression:"qualificationIpfs.description"}})],1)]),e._v(" "),t("div",{staticClass:"field"},[e._m(2),e._v(" "),t("upload-to-ipfs",{on:{upload:e.selectImage}}),e._v(" "),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.qualificationIpfs.image,expression:"qualificationIpfs.image"}],staticClass:"input",attrs:{type:"text",placeholder:"Image Url"},domProps:{value:e.qualificationIpfs.image},on:{input:function(t){t.target.composing||e.$set(e.qualificationIpfs,"image",t.target.value)}}})])],1),e._v(" "),t("div",{staticClass:"field"},[t("label",{staticClass:"label",attrs:{for:""}},[e._v("\n            Hidden\n          ")]),e._v(" "),t("label",{staticClass:"checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.qualificationIpfs.ishidden,expression:"qualificationIpfs.ishidden"}],staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.qualificationIpfs.ishidden)?e._i(e.qualificationIpfs.ishidden,null)>-1:e.qualificationIpfs.ishidden},on:{change:function(t){var n=e.qualificationIpfs.ishidden,l=t.target,c=!!l.checked;if(Array.isArray(n)){var r=e._i(n,null);l.checked?r<0&&e.$set(e.qualificationIpfs,"ishidden",n.concat([null])):r>-1&&e.$set(e.qualificationIpfs,"ishidden",n.slice(0,r).concat(n.slice(r+1)))}else e.$set(e.qualificationIpfs,"ishidden",c)}}}),e._v("\n            Check if this qualifications needs to be hidden from the user.\n          ")])]),e._v(" "),t("div",{staticClass:"field is-grouped is-grouped-right"},[t("div",{staticClass:"control"},[t("nuxt-link",{staticClass:"button is-light",attrs:{to:"/manage"}},[e._v("\n              Cancel\n            ")])],1),e._v(" "),t("div",{staticClass:"control"},[t("button",{staticClass:"button is-primary is-wide",class:{"is-loading":e.loading},attrs:{type:"submit"}},[e._v("\n              Create Qualification\n            ")])])])])]),e._v(" "),e.successMessage?t("success-modal",{attrs:{message:e.successMessage,title:e.successTitle}}):e._e()],1)])}),[function(){var e=this,t=e._self._c;return t("label",{staticClass:"label"},[e._v("\n            Name\n            "),t("span",{staticClass:"has-text-info"},[e._v("*")])])},function(){var e=this._self._c;return e("label",{staticClass:"label"},[this._v("\n            Description\n            "),e("span",{staticClass:"has-text-info"})])},function(){var e=this._self._c;return e("label",{staticClass:"label"},[this._v("\n            Image\n            "),e("span",{staticClass:"has-text-info"})])}],!1,null,"f0ccb2e6",null);t.default=component.exports}}]);