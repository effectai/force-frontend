(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1061:function(t,e,n){var content=n(1064);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(60).default)("6f7866aa",content,!0,{sourceMap:!1})},1062:function(t,e,n){"use strict";var r={props:["page","perPage","items"],computed:{maxPage:function(){return Math.ceil(this.items/this.perPage)}},watch:{items:function(){this.$emit("setPage",1)}}},o=n(22),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return t.items&&t.items>t.perPage?e("nav",{staticClass:"pagination",attrs:{role:"navigation","aria-label":"pagination"}},[e("span",{staticStyle:{"padding-left":"0.5em"}},[t._v(t._s((t.page-1)*t.perPage+1)+"-"+t._s(Math.min(t.page*t.perPage,t.items))+" of\n    "+t._s(t.items))]),t._v(" "),e("a",{staticClass:"pagination-previous",attrs:{disabled:1===t.page},on:{click:function(e){return t.$emit("setPage",t.page-1)}}},[t._v("Previous")]),t._v(" "),e("a",{staticClass:"pagination-next",attrs:{disabled:!t.maxPage||t.page===t.maxPage},on:{click:function(e){return t.$emit("setPage",t.page+1)}}},[t._v("Next page")]),t._v(" "),e("ul",{staticClass:"pagination-list has-margin-top-mobile"},[t.page>2?e("li",[e("a",{staticClass:"pagination-link",on:{click:function(e){return t.$emit("setPage",1)}}},[t._v("1")])]):t._e(),t._v(" "),t.page>3?e("li",[e("span",{staticClass:"pagination-ellipsis"},[t._v("…")])]):t._e(),t._v(" "),t.page>1?e("li",[e("a",{staticClass:"pagination-link",on:{click:function(e){return t.$emit("setPage",t.page-1)}}},[t._v(t._s(t.page-1))])]):t._e(),t._v(" "),e("li",[e("a",{staticClass:"pagination-link is-current",attrs:{"aria-current":"page"}},[t._v(t._s(t.page))])]),t._v(" "),t.page<t.maxPage?e("li",[e("a",{staticClass:"pagination-link",on:{click:function(e){return t.$emit("setPage",t.page+1)}}},[t._v("\n        "+t._s(t.page+1))])]):t._e(),t._v(" "),t.maxPage>t.page+2?e("li",[e("span",{staticClass:"pagination-ellipsis"},[t._v("…")])]):t._e(),t._v(" "),t.maxPage>t.page+1?e("li",[e("a",{staticClass:"pagination-link",on:{click:function(e){return t.$emit("setPage",t.maxPage)}}},[t._v(t._s(t.maxPage))])]):t._e()])]):t._e()}),[],!1,null,null,null);e.a=component.exports},1063:function(t,e,n){"use strict";n(1061)},1064:function(t,e,n){var r=n(59)(!1);r.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap);"]),r.push([t.i,".template-wrapper[data-v-40dd424e]{width:100%}#mediaFrame[data-v-40dd424e]{width:100%;border:none}",""]),t.exports=r},1066:function(t,e,n){"use strict";n(14),n(61);var r={props:{html:{type:String,default:null}},data:function(){return{alternativeFrontendUrl:"https://effectai.github.io/force-frontend",loading:!0}},watch:{html:function(t){document.getElementById("mediaFrame").contentWindow.postMessage({task:"template",value:t},"*")}},mounted:function(){document.addEventListener("keydown",this.sendKeyEvents)},created:function(){window.addEventListener("message",this.communicateWithIframe)},beforeDestroy:function(){window.removeEventListener("message",this.communicateWithIframe),document.removeEventListener("keydown",this.sendKeyEvents)},methods:{mediaFrameLoaded:function(){this.loading=!1,document.getElementById("mediaFrame").contentWindow.postMessage({task:"template",value:this.html},"*"),this.$emit("templateLoaded")},sendKeyEvents:function(t){var e=document.getElementById("mediaFrame");e&&e.contentWindow.postMessage({task:"key",key:t.key},"*")},communicateWithIframe:function(t){var data=t.data;switch(data.task){case"setHeight":document.getElementById("mediaFrame").height=data.height+"px";break;case"submit":this.$emit("submit",data.values);break;case"results":document.getElementById("mediaFrame").contentWindow.postMessage(data,"*")}}}},o=(n(1063),n(22)),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"template-wrapper"},[t.loading?e("div",{staticClass:"loading-text subtitle"},[t._v("\n    Loading\n  ")]):t._e(),t._v(" "),e("iframe",{ref:"mediaFrame",attrs:{id:"mediaFrame",src:t.alternativeFrontendUrl+"/template",name:"mediaFrame",sandbox:"allow-scripts allow-modals allow-downloads allow-forms allow-popups allow-popups-to-escape-sandbox allow-pointer-lock allow-same-origin",allow:"geolocation; microphone; camera; autoplay; fullscreen",allowFullScreen:""},on:{load:t.mediaFrameLoaded}})])}),[],!1,null,"40dd424e",null);e.a=component.exports},1067:function(t,e,n){var map={"./effect-captions-icon.png":1068,"./effect-dao-icon.png":1069,"./effect-force-icon.png":563,"./effect-socials-icon.png":1070,"./effect-translate-icon.png":1071};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=o,t.exports=r,r.id=1067},1068:function(t,e,n){t.exports=n.p+"img/effect-captions-icon.d32e1fd.png"},1069:function(t,e,n){t.exports=n.p+"img/effect-dao-icon.8a49264.png"},1070:function(t,e,n){t.exports=n.p+"img/effect-socials-icon.113948d.png"},1071:function(t,e,n){t.exports=n.p+"img/effect-translate-icon.a76baca.png"},1075:function(t,e,n){"use strict";n(54),n(69),n(53),n(45),n(34),n(55),n(36),n(56),n(82),n(62),n(47),n(81),n(83),n(61);var r=n(19),o=(n(43),n(14),n(46)),c=n(1089),l=n.n(c);function d(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={name:"InstructionsModal",props:{info:{type:Object,required:!0,default:function(){return{}}},show:{type:Boolean,required:!1,default:!1},functional:{type:Boolean,required:!1,default:!0},readonly:{type:Boolean,required:!1,default:!1},inclusiveQualifications:{type:Array,required:!1,default:function(){return[]}},exclusiveQualifications:{type:Array,required:!1,default:function(){return[]}}},data:function(){return{tac:!1,id:parseInt(this.$route.params.id),campaign:null,userQuali:[],accountId:this.$auth.user.vAccountRows[0].id}},computed:h(h(h({},Object(o.c)({campaignById:"campaign/campaignById",qualificationById:"qualification/qualificationById"})),Object(o.d)({allQualificationsLoaded:function(t){return t.qualification.allQualificationsLoaded}})),{},{exclQualis:function(){return this.exclusiveQualifications.filter((function(q){return!q.ishidden}))},showModal:{get:function(){return this.show},set:function(t){this.$emit("clicked",t)}}}),created:function(){this.campaign=this.campaignById(this.id)},methods:{userAssignedQuali:function(t){var e=this,n=[];if(0===this.assignedQuali.length)return[];var r,o=d(this.campaign.qualis);try{var c=function(){var o,c=r.value,l=e.qualificationById(c.key),d=e.assignedQuali.some((function(t){return console.log("checking in some",t,c.key),t.quali_id===c.key}));(console.log("UserHasQualiInclusive: ".concat(c)),c.value===t)&&n.push({name:null===(o=l.info)||void 0===o?void 0:o.name,code:c.key,userHasQuali:d})};for(o.s();!(r=o.n()).done;)c()}catch(t){o.e(t)}finally{o.f()}return n},onCancel:function(){this.functional&&(this.showModal=!1)},onClick:function(){this.functional&&this.$parent.reserveTask()},sanitizeHtmlCustom:function(t){return l()(t,{allowedTags:["h1","h2","h3","h4","h5","h6","blockquote","p","a","ul","ol","nl","li","b","i","strong","em","strike","code","hr","br","div","table","thead","caption","tbody","tr","th","td","pre","iframe","img","span","label"],allowedAttributes:{a:["href","name","target","class"],img:["src","alt"],iframe:["src"],"*":["style"]}})}}},_=n(22),component=Object(_.a)(m,(function(){var t=this,e=t._self._c;return t.info?e("div",{staticClass:"modal",class:{"is-active":t.showModal},style:{position:t.functional?"fixed":"relative",padding:t.functional?"initial":"10px",zIndex:t.functional?"40":"1"}},[e("div",{staticClass:"modal-background"}),t._v(" "),e("div",{staticClass:"modal-card"},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v("\n        "+t._s(t.info.title)+"\n      ")]),t._v(" "),e("button",{staticClass:"delete",attrs:{"aria-label":"close",disabled:!t.functional},on:{click:function(e){return e.preventDefault(),t.onCancel()}}})]),t._v(" "),e("section",{staticClass:"modal-card-body"},[t.info?e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.sanitizeHtmlCustom(t.$md.render(t.info.instructions)))}}):e("p",[t._v("\n        ...\n      ")]),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"block is-vcentered"},[e("div",{staticClass:"is-size-4 has-text-centered"},[t._v("\n          Qualifications\n        ")]),t._v(" "),t.allQualificationsLoaded?e("div",[t._m(0),t._v(" "),t.inclusiveQualifications.length>0?e("div",{staticClass:"tags"},t._l(t.inclusiveQualifications,(function(n){var r;return e("span",{key:n.id,staticClass:"tag p-3 m-3",class:n.userHasQuali?"is-light is-success":"is-danger is-light",attrs:{"data-tooltip":n.userHasQuali?"Found: Ok":"Not Found: Required"}},[n.userHasQuali?e("span",[t._v("✅")]):e("span",[t._v("❌")]),t._v("\n               \n              "),e("nuxt-link",{attrs:{to:"/qualifications/".concat(n.id)}},[t._v(t._s(null===(r=n.info)||void 0===r?void 0:r.name))])],1)})),0):e("div",[t._v("\n            None\n          ")]),t._v(" "),e("br"),t._v(" "),t._m(1),t._v(" "),t.exclQualis.length>0?e("div",{staticClass:"tags"},t._l(t.exclQualis,(function(n){var r;return e("span",{key:n.code,staticClass:"tag p-3 m-3",class:n.userHasQuali?"is-light is-danger":"is-warning is-light",attrs:{"data-tooltip":n.userHasQuali?"Found: Excluded":"Not found: Ok"}},[n.userHasQuali?e("span",[t._v("❌")]):e("span",[t._v("✅")]),t._v("\n               \n              "),e("nuxt-link",{attrs:{to:"/qualifications/".concat(n.id)}},[t._v(t._s(null===(r=n.info)||void 0===r?void 0:r.name))])],1)})),0):e("div",[t._v("\n            None\n          ")])]):e("div",{staticClass:"loading-text has-text-centered"},[t._v("Loading")]),t._v(" "),e("br")]),t._v(" "),e("hr"),t._v(" "),e("label",{staticClass:"checkbox"},[t.readonly?e("input",{attrs:{checked:"",type:"checkbox",disabled:""}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.tac,expression:"tac"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.tac)?t._i(t.tac,null)>-1:t.tac},on:{change:function(e){var n=t.tac,r=e.target,o=!!r.checked;if(Array.isArray(n)){var c=t._i(n,null);r.checked?c<0&&(t.tac=n.concat([null])):c>-1&&(t.tac=n.slice(0,c).concat(n.slice(c+1)))}else t.tac=o}}}),t._v("\n        I agree to the "),e("a",{attrs:{href:"/download/tac.pdf",target:"_blank"}},[t._v("terms and conditions")])])]),t._v(" "),e("footer",{staticClass:"modal-card-foot has-text-centered"},[t.readonly?e("button",{staticClass:"button is-primary",attrs:{disabled:!t.functional},on:{click:function(e){return e.preventDefault(),t.onCancel()}}},[t._v("\n        OK\n      ")]):[e("button",{staticClass:"button is-primary has-tooltip has-tooltip-arrow",attrs:{"data-tooltip":t.tac?"No additional\nqualifications needed":"Agree to the terms andconditions to enter the task.",disabled:!t.tac||!t.info||!t.functional},on:{click:function(e){return e.preventDefault(),t.onClick()}}},[t._v("\n          Enter Task\n        ")]),t._v(" "),e("button",{staticClass:"button",attrs:{disabled:!t.functional},on:{click:function(e){return e.preventDefault(),t.onCancel()}}},[t._v("\n          Cancel\n        ")])]],2)])]):t._e()}),[function(){var t=this,e=t._self._c;return e("div",[t._v("Task Requirements "),e("i",[t._v("(You must have this qualification in order to enter the task.)")])])},function(){var t=this,e=t._self._c;return e("div",[t._v("Blocked Qualifications"),e("i",[t._v("(Having these qualifications will exclude you from this task.)")])])}],!1,null,"4182c04a",null);e.a=component.exports},1080:function(t,e){},1081:function(t,e){},1085:function(t,e){},1086:function(t,e){},1091:function(t,e){},1101:function(t,e,n){"use strict";t.exports.isFunction=function(t){return t&&"[object Function]"==={}.toString.call(t)},t.exports.isArray=function(t){return Array.isArray(t)},t.exports.isObject=function(t){return t instanceof Object},t.exports.isString=function(t){return"string"==typeof t},t.exports.isNumber=function(t){return"number"==typeof t},t.exports.isBoolean=function(t){return"boolean"==typeof t},t.exports.isDate=function(t){return t instanceof Date}},1157:function(t,e,n){t.exports=n.p+"img/eye.d08935c.svg"},1158:function(t,e,n){"use strict";t.exports="\n"},1159:function(t,e,n){var content=n(1287);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(60).default)("9b397f7e",content,!0,{sourceMap:!1})},1280:function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(1281),c=n(1285),l=(n(1101),n(1158));t.exports=function(){var t={headers:[],rename:[],headerPathString:".",rowDelimiter:",",textDelimiter:'"',arrayPathString:";",undefinedString:"",endOfLine:l||"\n",mainPathItem:null,booleanTrueString:null,booleanFalseString:null,includeHeaders:!0,fillGaps:!1,verticalOutput:!0,forceTextDelimiter:!1},e=void 0,n=void 0,d=void 0;if(3===arguments.length){var v=Array.prototype.slice.call(arguments);e=v[0],n=v[1],d=v[2]}else if(2===arguments.length){var f=void 0,h=Array.prototype.slice.call(arguments);e=h[0],"function"==typeof(f=h[1])?d=f:"object"===(void 0===f?"undefined":r(f))&&(n=f)}else{if(1!==arguments.length)return new c(new o(t));var m=Array.prototype.slice.call(arguments),_=m[0];if("object"===(void 0===_?"undefined":r(_))){var k=Object.keys(t),y=Object.keys(_),w=y.every((function(t){return k.includes(t)}));y.length>0&&w?n=_:e=_}else e=_}var x=Object.assign({},t,n),C=new o(x);return e?new Promise((function(t,n){C.parse(e,(function(e,r){return d?d(e,r):e?n(e):n?t(r):void 0}))})):new c(C)}},1281:function(t,e,n){"use strict";var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=n(1282),c=n(1283),l=n(1101),d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._options=e||{},this._handler=new c(this._options),this._headers=this._options.headers||[],this._escape=n(1284)(this._options.textDelimiter,this._options.rowDelimiter,this._options.forceTextDelimiter)}return r(t,[{key:"parse",value:function(t,e,n){return l.isArray(t)?e(null,this._parseArray(t,n)):l.isObject(t)?e(null,this._parseObject(t)):e(new Error("Unable to parse the JSON object, its not an Array or Object."))}},{key:"_checkRows",value:function(t){var e=null,n=[],r=function(col,t){return""===col||void 0===col?e[t]:col},o=!0,c=!1,l=void 0;try{for(var d,v=t[Symbol.iterator]();!(o=(d=v.next()).done);o=!0){var f=d.value,h=this._headers.length-f.length;h>0&&(f=f.concat(Array(h).join(".").split("."))),e&&this._options.fillGaps&&(f=f.map(r)),n.push(f.join(this._options.rowDelimiter)),e=f}}catch(t){c=!0,l=t}finally{try{!o&&v.return&&v.return()}finally{if(c)throw l}}return n}},{key:"_parseArray",value:function(t,e){var n=this;this._headers=this._headers||[];var r,c=[];r=function(t){var header,e,r=[],o=function(t){return r.push(t.map((function(col){return null!=col?col:""})))},l=function(){return new Array(n._headers.length).fill(null)},d={},v=l(),f=!0,h=!1,m=void 0;try{for(var _,k=t[Symbol.iterator]();!(f=(_=k.next()).done);f=!0){var element=_.value,y=(header=element.item,e=void 0,-1===(e=n._headers.indexOf(header))&&(n._headers.push(header),e=n._headers.indexOf(header)),e);null!=v[y]&&(o(v),v=l()),d[y]=d[y]||0,n._options.fillTopRow&&d[y]<r.length?(r[d[y]][y]=n._escape(element.value),d[y]+=1):(v[y]=n._escape(element.value),d[y]+=1)}}catch(t){h=!0,m=t}finally{try{!f&&k.return&&k.return()}finally{if(h)throw m}}v.length>0&&o(v),c=c.concat(n._checkRows(r))};var l=!0,d=!1,v=void 0;try{for(var f,h=t[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var m=f.value;r(n._handler.check(m,n._options.mainPathItem,m,t))}}catch(t){d=!0,v=t}finally{try{!l&&h.return&&h.return()}finally{if(d)throw v}}return!e&&n._options.includeHeaders&&c.unshift(this.headers),o(c,n._options.endOfLine)}},{key:"_parseObject",value:function(t){var e,n=this,r=[],c=[[],[]];for(var l in e=function(t){var e=t.value||0===t.value?t.value.toString():n._options.undefinedString;if(e=n._escape(e),n._options.verticalOutput){var o=[t.item,e];r.push(o.join(n._options.rowDelimiter))}else c[0].push(t.item),c[1].push(e)},t){var d="";this._options.mainPathItem&&(d=this._options.mainPathItem+this._options.headerPathString),this._handler.check(t[l],d+l,l,t).forEach(e)}return this._options.verticalOutput||(r.push(c[0].join(this._options.rowDelimiter)),r.push(c[1].join(this._options.rowDelimiter))),o(r,this._options.endOfLine)}},{key:"headers",get:function(){var t=this,e=this._headers;return this._options.rename&&this._options.rename.length>0&&(e=e.map((function(header){return t._options.rename[t._options.headers.indexOf(header)]||header}))),this._options.forceTextDelimiter&&(e=e.map((function(header){return""+t._options.textDelimiter+header+t._options.textDelimiter}))),this._options.mapHeaders&&(e=e.map(this._options.mapHeaders)),e.join(this._options.rowDelimiter)}}]),t}();t.exports=d},1282:function(t,e,n){"use strict";var r=n(1158),o=n(1101);t.exports=function(t,e){if(!t||!o.isArray(t))throw new TypeError('Invalid params "rows" for joinRows. Must be an array of string.');return t.join(e||r||"\n")}},1283:function(t,e,n){"use strict";(function(e){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var c=n(1101),l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._options=e,this._options.typeHandlers=this._options.typeHandlers||{}}return o(t,[{key:"_setHeaders",value:function(t,e){var n=this;return e?t.map((function(element){return element.item=element.item?e+n._options.headerPathString+element.item:e,element})):t}},{key:"castValue",value:function(element,t,e,n){var r=this._options.typeHandlers;for(var o in r)if(v(element,o)){element=r[o].call(r,element,e,n);break}return element}},{key:"checkComplex",value:function(element,t){if(c.isDate(element))return[{item:t,value:(this._options.handleDate||this._handleDate)(element,t)}];if(c.isArray(element)){var e=this._handleArray(element,t);return this._setHeaders(e,t)}if(c.isObject(element)){var n=this._handleObject(element);return this._setHeaders(n,t)}return[{item:t,value:""}]}},{key:"check",value:function(element,t,e,n){switch(void 0===(element=this.castValue(element,t,e,n))?"undefined":r(element)){case"string":return[{item:t,value:this._handleString(element,t)}];case"number":return[{item:t,value:this._handleNumber(element,t)}];case"boolean":return[{item:t,value:this._handleBoolean.bind(this)(element,t)}]}return this.checkComplex(element,t)}},{key:"_handleObject",value:function(t){var e=[];for(var n in t){var r=t[n],o=this.check(r,n,n,t);e=e.concat(o)}return e}},{key:"_handleArray",value:function(t){for(var e,n=[],r=0;r<t.length;++r){var element=t[r],o=this.check(element,null,r,t);if(0!==o.length){var c=o[0];c.item||void 0===e?(o.length>0&&!c.item&&void 0===e&&(e=c),n=n.concat(o)):e.value+=this._options.arrayPathString+c.value}}return n}},{key:"_handleBoolean",value:function(t){return t?this._options.booleanTrueString||"true":this._options.booleanFalseString||"false"}},{key:"_handleString",value:function(t){return t}},{key:"_handleNumber",value:function(t){return t}},{key:"_handleDate",value:function(t){return t.toLocaleDateString()}}]),t}();t.exports=l;var d="undefined"==typeof window?e:window;function v(element,t){if(element instanceof d[t])return!0;switch(void 0===element?"undefined":r(element)){case"string":return"String"===t;case"boolean":return"Boolean"===t;case"number":return"Number"===t}return!1}}).call(this,n(11))},1284:function(t,e,n){"use strict";t.exports=function(t,e,n){if("string"!=typeof t)throw new TypeError('Invalid param "textDelimiter", must be a string.');if("string"!=typeof e)throw new TypeError('Invalid param "rowDelimiter", must be a string.');var r=new RegExp("\\"+t,"g"),o=t+t,c='"'===t?function(t){return t.indexOf(e)>=0||t.indexOf("\n")>=0||t.indexOf('"')>=0}:function(t){return t.indexOf(e)>=0||t.indexOf("\n")>=0};return function(e){return n&&(e=""+e),e.replace?(e=e.replace(r,o),(n||c(e))&&(e=t+e+t),e):e}}},1285:function(t,e,n){"use strict";t.exports=function(t){throw new Error("jsonexport called without third argument as a callback and is required")}},1286:function(t,e,n){"use strict";n(1159)},1287:function(t,e,n){var r=n(59)(!1);r.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap);"]),r.push([t.i,".box-title[data-v-d4292dd2]{text-align:center;border-bottom:2px solid #cdd4e6;padding-bottom:31px;margin:10px 0 15px}.progress[data-v-d4292dd2]::-webkit-progress-value{-webkit-transition:width .5s ease;transition:width .5s ease}.tabs li[data-v-d4292dd2]{font-weight:500}.tabs li a[data-v-d4292dd2]{padding-left:35px;padding-right:35px}.tabs li.is-active a[data-v-d4292dd2]{border-bottom-width:2px;border-bottom-color:#1977f3;color:#151a1f;font-weight:600}.task-tab div.box[data-v-d4292dd2]{padding:1rem;border-radius:8px;cursor:pointer}.task-tab div.box[data-v-d4292dd2]:hover{background:#f7fbff;border:1px solid #6e90f4}.task-tab div.box.is-active[data-v-d4292dd2]{border:2px solid #1977f3}",""]),t.exports=r},1325:function(t,e,n){"use strict";n.r(e);n(69),n(100),n(108),n(34),n(81),n(45),n(55),n(36),n(56),n(54),n(82),n(47),n(83);var r=n(2),o=n(40),c=n(19),l=(n(27),n(53),n(43),n(14),n(90),n(144),n(62),n(61),n(1106),n(565),n(46)),d=n(71),v=n(1066),f=n(1075),h=n(341),m=n(1062);function _(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return k(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function w(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var x=n(1280),C={components:{TemplateMedia:v.a,InstructionsModal:f.a,SuccessModal:h.a,Pagination:m.a},middleware:["auth"],data:function(){return{ipfsExplorer:this.$blockchain.sdk.config.ipfsNode,campaignId:parseInt(this.$route.params.id),batchId:parseInt(this.$route.params.batch),batchCompleted:parseInt(this.$route.query.batchCompleted),campaign:void 0,batch:void 0,body:"description",accountId:this.$auth.user.vAccountRows[0].id,userJoined:null,loading:!1,loadingReservation:!1,joinCampaignPopup:!1,submissions:null,pageR:1,page:1,pageT:1,perPage:20,pages:[],pagesR:[],pagesT:[],viewTaskResult:!1,successMessage:null,successTitle:null,reservations:null,userReservation:null,releasedReservations:null,waitingOnTransaction:!1,categories:["translate","captions","socials","dao"],taskTab:"allTasks"}},computed:w(w(w({},Object(l.d)({assignedQualifications:function(t){return t.qualification.assignedQualifications},allAssignedQualificationsLoaded:function(t){return t.qualification.allAssignedQualificationsLoaded},batches:function(t){return t.campaign.batches},campaigns:function(t){return t.campaign.campaigns},campaignLoading:function(t){return t.campaign.loading&&!t.campaign.allCampaignsLoaded},batchLoading:function(t){return t.campaign.loadingBatch}})),Object(l.c)({campaignById:"campaign/campaignById"})),{},{paginatedSubmissions:function(){var t=(this.page-1)*this.perPage;return this.submissions?this.submissions.slice(t,t+this.perPage):[]},paginatedReservations:function(){var t=(this.page-1)*this.perPage;return this.reservations.filter((function(t){return t.account_id}))?this.reservations.filter((function(t){return t.account_id})).slice(t,t+this.perPage):[]},paginatedTasks:function(){var t=(this.pageT-1)*this.perPage;return this.batch&&this.batch.tasks?this.batch.tasks.slice(t,t+this.perPage):[]},inclusiveQualifications:function(){var t=this;return this.allAssignedQualificationsLoaded&&this.campaign&&this.campaign.qualis?this.campaign.qualis.filter((function(q){return 0===q.value})).map((function(q){var e,n=t.qualificationById(q.key);return n.userHasQuali=null===(e=t.assignedQualifications)||void 0===e?void 0:e.some((function(t){return t.id===n.id})),n})):[]},exclusiveQualifications:function(){var t=this;return this.allAssignedQualificationsLoaded&&this.campaign&&this.campaign.qualis?this.campaign.qualis.filter((function(q){return 1===q.value})).map((function(q){var e,n=t.qualificationById(q.key);return n.userHasQuali=null===(e=t.assignedQualifications)||void 0===e?void 0:e.some((function(t){return t.id===n.id})),n})):[]},canUserQualify:function(){var t,e,n=this;if(null!==(t=this.campaign)&&void 0!==t&&t.qualis&&(null===(e=this.campaign.qualis)||void 0===e?void 0:e.length)>0){var r,c=_(this.campaign.qualis);try{var l=function(){var t=r.value;if(!n.assignedQualifications||0===t.value&&!n.assignedQualifications.find((function(e){return e.id===t.key}))||1===t.value&&n.assignedQualifications.find((function(e){return e.id===t.key})))return{v:!1}};for(c.s();!(r=c.n()).done;){var d=l();if("object"===Object(o.a)(d))return d.v}}catch(t){c.e(t)}finally{c.f()}}return!0}}),mounted:function(){this.batchCompleted&&(this.successTitle="Batch is completed",this.successMessage="All the tasks in this batch are done")},created:function(){this.getBatch(),this.getCampaign()},methods:{campaignModalChange:function(t){this.joinCampaignPopup=t},handleBatch:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"Active"!==t.batch.status){e.next=7;break}return e.next=4,t.$blockchain.pauseBatch(t.batch);case 4:data=e.sent,e.next=11;break;case 7:if("Paused"!==t.batch.status){e.next=11;break}return e.next=10,t.$blockchain.resumeBatch(t.batch);case 10:data=e.sent;case 11:if(t.$store.dispatch("transaction/addTransaction",data),!data){e.next=18;break}return t.loading=!0,t.joinCampaignPopup=!1,e.next=17,t.$blockchain.waitForTransaction(data);case 17:t.$router.push("/campaigns/".concat(t.campaign.id));case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),t.$blockchain.handleError(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})))()},deleteBatch:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm("Are you sure you to delete this batch?")){e.next=17;break}return e.prev=1,e.next=4,t.$blockchain.deleteBatch(t.batch.id,t.campaign.id);case 4:if(data=e.sent,t.$store.dispatch("transaction/addTransaction",data),!data){e.next=12;break}return t.loading=!0,t.joinCampaignPopup=!1,e.next=11,t.$blockchain.waitForTransaction(data);case 11:t.$router.push("/campaigns/".concat(t.campaign.id));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t.$blockchain.handleError(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))()},reserveTask:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit("view/ADD_JOINED_CAMPAIGN",t.campaign.id),t.loadingReservation=!0,e.prev=2,e.next=5,t.$blockchain.makeReservation(t.batch);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),t.$blockchain.handleError(e.t0);case 10:t.loadingReservation=!1;case 11:case"end":return e.stop()}}),e,null,[[2,7]])})))()},releaseTask:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var data,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$blockchain.releaseTask(t);case 2:return data=n.sent,n.next=5,e.$blockchain.waitForTransaction(data);case 5:return e.$store.dispatch("transaction/addTransaction",data),n.next=8,e.$blockchain.getTaskReservationsForBatch(e.batchId);case 8:r=n.sent,e.reservations=r.filter((function(sub){return sub.account_id})),e.getBatch();case 11:case"end":return n.stop()}}),n)})))()},checkUserCampaign:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.loading=!0,e.prev=1,t.userJoined=t.$store.state.view.joinedCampaigns.includes(t.campaign.id),e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(1),e.next=9,t.$blockchain.handleError(e.t0);case 9:t.loading=!1;case 10:case"end":return e.stop()}}),e,null,[[1,5]])})))()},postResults:function(t){var e=document.getElementById("mediaFrame");e&&e.contentWindow.postMessage({task:"results",value:t},"*")},viewTask:function(sub){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$blockchain.getTaskIndexFromLeaf(t.batch.campaign_id,t.batch.id,sub.leaf_hash,t.batch.tasks);case 2:n=e.sent,t.viewTaskResult={placeholders:t.batch.tasks[n],results:JSON.parse(sub.data)};case 4:case"end":return e.stop()}}),e)})))()},viewTaskPreview:function(t){this.viewTaskResult={placeholders:t,results:[]}},submitTask:function(t){console.log("Task submitted!",t)},renderTemplate:function(template){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new d.Template(template,t,e).render()},getBatch:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("campaign/getBatch",{batchId:t.batchId});case 2:return t.batch=t.batches.find((function(b){return b.batch_id===t.batchId})),e.next=5,t.$blockchain.getSubmissionsAndReservationsForBatch(t.batchId);case 5:n=e.sent,t.submissions=n.filter((function(sub){return sub.data})),t.reservations=n.filter((function(sub){return!sub.data&&sub.account_id})),t.releasedReservations=n.filter((function(sub){return!sub.data&&!sub.account_id})),t.userReservation=t.reservations.find((function(e){return e.account_id===t.$auth.user.vAccountRows[0].id}));case 10:case"end":return e.stop()}}),e)})))()},getCampaign:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("campaign/getCampaign",t.campaignId);case 2:return t.campaign=t.campaigns.find((function(e){return e.id===t.campaignId})),e.next=5,t.checkUserCampaign();case 5:case"end":return e.stop()}}),e)})))()},generateRandomNumber:function(t){return Math.ceil(Math.random()*t)},downloadTaskResults:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(t.submissions.map(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(n){var sub,r,c,l,d,v,f,h,m,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((sub={}).data=JSON.parse(n.data),"object"===Object(o.a)(sub.data))for(r=0,c=Object.keys(sub.data);r<c.length;r++)l=c[r],n[l]=sub.data[l];return e.next=5,t.$blockchain.getTaskIndexFromLeaf(t.batch.campaign_id,t.batch.id,n.leaf_hash,t.batch.tasks);case 5:for(d=e.sent,v=t.batch.tasks[d],n.placeholders=JSON.stringify(v),f=0,h=Object.keys(v);f<h.length;f++)m=h[f],n[m]=v[m];return delete n.content,delete n.batch_id,delete n.id,delete n.leaf_hash,_={link_id:null,account_id:null},n=Object.assign(_,n),e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return n=e.sent,e.next=6,x(n,(function(e,n){if(e)return console.error(e);var r="task_results_".concat(t.batchId,".csv"),o=new Blob([n],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(o,r);else{var link=document.createElement("a");if(void 0!==link.download){var c=URL.createObjectURL(o);link.setAttribute("href",c),link.setAttribute("download",r),link.style.visibility="hidden",document.body.appendChild(link),link.click(),document.body.removeChild(link)}}}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},setPage:function(t){this.page=t},setPageR:function(t){this.pageR=t},setPageT:function(t){this.pageT=t},getProgressBatch:function(t){switch(console.log("%c ".concat(JSON.stringify(t)),"background: #222; color: #bada55"),null==t?void 0:t.status){case"Completed":return"is-success";case"Active":return"is-info";case"Paused":return"is-warning"}}}},O=C,T=(n(1286),n(22)),component=Object(T.a)(O,(function(){var t=this,e=t._self._c;return e("section",{staticClass:"section is-max-widescreen"},[e("div",{staticClass:"container"},[e("nav",{staticClass:"breadcrumb",attrs:{"aria-label":"breadcrumbs"}},[e("ul",[e("li",[e("nuxt-link",{attrs:{to:"/"}},[t._v("\n            Tasks\n          ")])],1),t._v(" "),e("li",[e("nuxt-link",{attrs:{to:"/campaigns/".concat(t.campaignId)}},[t._v("\n            Task "+t._s(t.campaignId)+"\n          ")])],1),t._v(" "),e("li",{staticClass:"is-active"},[t.batch?e("nuxt-link",{attrs:{to:"/campaigns/".concat(t.campaignId,"/").concat(t.batchId),"aria-current":"page"}},[t._v("\n            Batch "+t._s(t.batch.id)+"\n          ")]):t._e()],1)])]),t._v(" "),t.loading?e("div",{staticClass:"loader-wrapper is-active"},[e("img",{attrs:{src:n(340)}}),t._v(" "),e("br"),t.waitingOnTransaction?e("span",{staticClass:"loading-text subtitle"},[t._v("Waiting for the transaction to complete")]):e("span",{staticClass:"loading-text subtitle"},[t._v("Please sign the transaction")])]):t._e(),t._v(" "),t.campaign?t._e():e("div",{staticClass:"loading-text"},[t._v("\n      Task loading\n    ")]),t._v(" "),e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-three-fifths"},[e("div",{staticClass:"is-flex is-align-items-center mb-6"},[t.campaign?e("p",{staticClass:"image has-radius mr-4",staticStyle:{width:"52px",height:"52px"}},[t.campaign.info&&t.campaign.info.image?e("img",{attrs:{src:t.campaign.info.image.Hash?t.ipfsExplorer+"/ipfs/"+t.campaign.info.image.Hash:t.campaign.info.image}}):t.campaign.info&&t.campaign.info.category&&t.categories.includes(t.campaign.info.category)?e("img",{attrs:{src:n(1067)("./effect-".concat(t.campaign.info.category,"-icon.png"))}}):e("img",{attrs:{src:n(563),alt:"campaign title"}})]):t._e(),t._v(" "),e("div",{staticClass:"title has-text-weight-bold"},[t.batch?e("span",[t._v("#"+t._s(t.campaignId)+"."+t._s(t.batch.id)+": ")]):t._e(),t._v(" "),t.campaign&&t.campaign.info?e("span",[t._v(t._s(t.campaign.info.title))]):t.campaign&&null===t.campaign.info?e("span",{staticClass:"has-text-danger-dark"},[t._v("Could not load campaign info")]):e("span",{staticClass:"loading-text"},[t._v("Loading")])])]),t._v(" "),e("div",{staticClass:"tabs campaign-tabs"},[e("ul",[e("li",{class:{"is-active":"description"===t.body}},[e("a",{on:{click:function(e){e.preventDefault(),t.body="description"}}},[t._v("Description")])]),t._v(" "),e("li",{class:{"is-active":"instruction"===t.body}},[e("a",{on:{click:function(e){e.preventDefault(),t.body="instruction"}}},[t._v("Instructions")])]),t._v(" "),e("li",{class:{"is-active":"preview"===t.body}},[e("a",{on:{click:function(e){e.preventDefault(),t.body="preview"}}},[t._v("Preview")])]),t._v(" "),(t.campaign&&(t.campaign.owner[1],t.$auth.user.accountName),e("li",{class:{"is-active":"tasks"===t.body}},[e("a",{on:{click:function(e){e.preventDefault(),t.body="tasks"}}},[t._v("Tasks")])]))])]),t._v(" "),"description"===t.body?e("div",{staticClass:"block"},[t.campaign&&t.campaign.info?e("p",[t._v("\n            "+t._s(t.campaign.info.description)+"\n          ")]):e("p",[t._v("\n            ...\n          ")])]):t._e(),t._v(" "),"instruction"===t.body?e("div",{staticClass:"block"},[t.campaign&&t.campaign.info?e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.$md.render(t.campaign.info.instructions))}}):e("p",[t._v("\n            ...\n          ")])]):t._e(),t._v(" "),"preview"===t.body?e("div",{staticClass:"block"},[t.campaign&&t.campaign.info?e("template-media",{attrs:{html:t.renderTemplate(t.campaign.info.template||"No template found..",t.campaign.info.example_task||{})},on:{submit:t.submitTask}}):t._e()],1):t._e(),t._v(" "),"tasks"===t.body?e("div",[e("div",{staticClass:"block columns",staticStyle:{"overflow-x":"auto"}},[e("div",{staticClass:"column is-one-third task-tab",on:{click:function(e){e.preventDefault(),t.taskTab="allTasks"}}},[t.batch&&t.batch.tasks?e("div",{staticClass:"box",class:{"is-active":"allTasks"===t.taskTab}},[t._v("\n                Tasks\n                "),e("br"),t._v(" "),e("span",{},[e("span",[e("b",[t._v(t._s(t.batch.tasks.length))])])])]):t._e()]),t._v(" "),e("div",{staticClass:"column is-one-third task-tab",on:{click:function(e){e.preventDefault(),t.taskTab="submissions"}}},[t.batch?e("div",{staticClass:"box",class:{"is-active":"submissions"===t.taskTab}},[t._v("\n                Tasks Completed\n                "),e("br"),t._v(" "),t.submissions?e("b",[t._v(t._s(t.submissions.length))]):e("b",[t._v("0")])]):t._e()]),t._v(" "),e("div",{staticClass:"column is-one-third task-tab",on:{click:function(e){e.preventDefault(),t.taskTab="reservations"}}},[e("div",{staticClass:"box",class:{"is-active":"reservations"===t.taskTab}},[t._v("\n                Active Reservations\n                "),e("br"),t._v(" "),t.reservations?e("b",[t._v(t._s(t.reservations.length))]):e("b",[t._v("0")])])])]),t._v(" "),"allTasks"===t.taskTab?e("div",{staticStyle:{"overflow-x":"auto"}},[t.batch&&t.batch.tasks&&t.batch.tasks.length>0?e("div",[e("table",{staticClass:"table",staticStyle:{width:"100%"}},[t._m(0),t._v(" "),e("tbody",t._l(t.paginatedTasks,(function(r){return e("tr",{key:r.id},[e("td",[t._v(t._s(r.id))]),t._v(" "),e("td",t._l(Object.keys(r),(function(n,o){return e("div",{key:o},["id"!==n&&"link_id"!==n?e("span",[e("span",[t._v(t._s(n)+": "+t._s(r[n]))]),t._v(" "),e("br")]):t._e()])})),0),t._v(" "),e("td",[e("div",{on:{click:function(e){return e.preventDefault(),t.viewTaskPreview(r)}}},[e("img",{attrs:{src:n(1157)}})])])])})),0)]),t._v(" "),t.batch&&t.batch.tasks?e("pagination",{attrs:{items:t.batch.tasks.length,page:t.pageT,"per-page":t.perPage},on:{setPage:t.setPageT}}):t._e()],1):e("span",[t._v("No tasks found")])]):t._e(),t._v(" "),"submissions"===t.taskTab?e("div",{staticStyle:{"overflow-x":"auto"}},[t.submissions&&t.submissions.length>0?e("div",[e("table",{staticClass:"table",staticStyle:{width:"100%"}},[t._m(1),t._v(" "),e("tbody",t._l(t.paginatedSubmissions,(function(sub){return e("tr",{key:sub.id},[e("td",[t._v(t._s(sub.id))]),t._v(" "),e("td",[t._v(t._s(sub.account_id))]),t._v(" "),e("td",[t._v(t._s(sub.data))]),t._v(" "),e("td",[t._v(t._s(sub.paid?"yes":"no"))]),t._v(" "),e("td",[e("div",{staticStyle:{width:"30px"},on:{click:function(e){return e.preventDefault(),t.viewTask(sub)}}},[e("img",{attrs:{src:n(1157)}})])])])})),0)]),t._v(" "),t.submissions?e("pagination",{attrs:{items:t.submissions.length,page:t.page,"per-page":t.perPage},on:{setPage:t.setPage}}):t._e(),t._v(" "),e("button",{staticClass:"button is-primary",on:{click:function(e){return e.preventDefault(),t.downloadTaskResults()}}},[t._v("\n                Download Results\n              ")])],1):e("span",[t._v("No submissions found")])]):t._e(),t._v(" "),"reservations"===t.taskTab?e("div",{staticStyle:{"overflow-x":"auto"}},[t.reservations&&t.reservations.length>0?e("div",[e("table",{staticClass:"table",staticStyle:{width:"100%"}},[t._m(2),t._v(" "),e("tbody",t._l(t.paginatedReservations,(function(sub){return e("tr",{key:sub.id},[e("td",[t._v(t._s(sub.id))]),t._v(" "),e("td",[sub.account_id?e("p",[t._v("\n                        "+t._s(sub.account_id)+"\n                      ")]):e("p")]),t._v(" "),e("td",[e("p",[t._v(t._s(sub.submitted_on))])]),t._v(" "),e("td",[null!==sub.account_id?e("button",{staticClass:"button is-primary",on:{click:function(e){return e.preventDefault(),t.releaseTask(sub.id)}}},[t._v("\n                        Release Task\n                      ")]):t._e()])])})),0)]),t._v(" "),t.reservations?e("pagination",{attrs:{items:t.reservations.length,page:t.pageR,"per-page":t.perPage},on:{setPage:t.setPageR}}):t._e()],1):e("span",[t._v("No active reservations")])]):t._e(),t._v(" "),e("div",{staticClass:"modal",class:{"is-active":t.viewTaskResult}},[e("div",{staticClass:"modal-background",on:{click:function(e){t.viewTaskResult=!1}}}),t._v(" "),e("div",{staticClass:"modal-content",staticStyle:{"background-color":"#fff",padding:"10px"}},[t.campaign&&t.campaign.info&&t.viewTaskResult?e("template-media",{attrs:{html:t.renderTemplate(t.campaign.info.template||"No template found..",t.viewTaskResult.placeholders)},on:{templateLoaded:function(e){return t.postResults(t.viewTaskResult.results)}}}):t._e()],1),t._v(" "),e("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:function(e){t.viewTaskResult=!1}}})]),t._v(" "),e("nuxt-link",{staticClass:"mt-6 button is-primary is-light",attrs:{to:"/campaigns/".concat(t.campaignId)}},[t._v("\n            < Back to campaign\n          ")])],1):t._e()]),t._v(" "),e("div",{staticClass:"column is-two-fifths"},[e("div",{staticClass:"information-block"},[t._m(3),t._v(" "),e("div",{staticClass:"p-5"},[e("div",{staticClass:"block"},[e("b",[t._v("Tasks")]),t._v(" "),e("br"),t._v(" "),t.batch&&t.batch.num_tasks-t.batch.real_tasks_done==0?[e("span",[t._v(t._s(t.batch.num_tasks)+" Tasks done.")])]:t.batch&&t.batch.num_tasks-t.batch.real_tasks_done>0&&t.releasedReservations||t.batch&&t.batch.reservations&&t.batch.reservations.length&&t.releasedReservations?[e("span",[t._v(t._s(t.batch.num_tasks-(t.batch.real_tasks_done-t.releasedReservations.length)))]),t._v(" "),e("span",[t._v("/ "+t._s(t.batch.num_tasks)+" left")])]:t.batch&&t.batch.num_tasks-t.batch.real_tasks_done>0||t.batch&&t.batch.reservations&&t.batch.reservations.length?[e("span",[t._v(t._s(t.batch.num_tasks-t.batch.real_tasks_done))]),t._v(" "),e("span",[t._v("/ "+t._s(t.batch.num_tasks)+" left")])]:e("span",[t._v("...")]),t._v(" "),e("progress",{staticClass:"progress",class:t.getProgressBatch(t.batch),attrs:{max:t.batch?t.batch.num_tasks:void 0},domProps:{value:t.batch&&t.releasedReservations?t.batch.real_tasks_done-t.releasedReservations.length:void 0}},[t._v("\n                Left\n              ")])],2),t._v(" "),e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-half"},[e("div",{staticClass:"block"},[e("br"),t._v(" "),t.campaign&&t.campaign.info?e("nuxt-link",{staticClass:"tag is-info is-light is-medium",class:["is-"+t.campaign.info.category],attrs:{to:"/?category="+t.campaign.info.category}},[t._v("\n                    "+t._s(t.campaign.info.category)+"\n                  ")]):e("span",{staticClass:"tag is-info is-light is-medium"},[t._v("...")])],1),t._v(" "),e("div",{staticClass:"block"},[t._v("\n                  Status\n                  "),e("br"),t._v(" "),t.batch?e("span",[e("b",[t._v(t._s(t.batch.status))])]):e("span",[t._v("...")])]),t._v(" "),e("div",{staticClass:"block"},[t._v("\n                  Reward\n                  "),e("br"),t._v(" "),t.campaign?e("span",[e("b",[t._v(t._s(t.campaign.reward.quantity))])]):e("span",[t._v("...")])]),t._v(" "),e("div",{staticClass:"block"},[t._v("\n                  Repititions\n                  "),e("br"),t._v(" "),t.batch?e("span",[e("b",[t._v(t._s(t.batch.repetitions))])]):e("span",[t._v("...")])])]),t._v(" "),e("div",{staticClass:"column is-half"},[e("div",{staticClass:"block"},[t._v("\n                  Requester\n                  "),e("br"),t._v(" "),e("div",{staticClass:"blockchain-address"},[t.campaign?e("nuxt-link",{attrs:{to:"/profile/"+t.campaign.owner[1]}},[t._v("\n                      "+t._s(t.campaign.owner[1])+"\n                    ")]):e("span",[t._v(".....")])],1)]),t._v(" "),e("div",{staticClass:"block"},[t._v("\n                  IPFS\n                  "),e("br"),t._v(" "),t.batch?e("div",{staticClass:"blockchain-address"},[e("a",{attrs:{target:"_blank",href:"".concat(t.ipfsExplorer,"/ipfs/").concat(t.batch.content.field_1)}},[t._v(t._s(t.batch.content.field_1))])]):e("span",[t._v(".....")])]),t._v(" "),e("div",{staticClass:"block"},[t._v("\n                  Blockchain\n                  "),e("br"),t._v(" "),e("a",{attrs:{target:"_blank",href:"".concat(t.$blockchain.eos.explorer,"/account/").concat(t.$blockchain.sdk.force.config.forceContract,"?loadContract=true&tab=Tables&table=batch&account=").concat(t.$blockchain.sdk.force.config.forceContract,"&scope=").concat(t.$blockchain.sdk.force.config.forceContract,"&limit=1&lower_bound=").concat(t.batchId,"&upper_bound=").concat(t.batchId)}},[t._v("View Batch on Explorer")])])])]),t._v(" "),e("div",{staticClass:"block is-vcentered"},[t.campaign&&t.$auth.user.accountName===t.campaign.owner[1]?[t.batch&&"Completed"!==t.batch.status?e("button",{staticClass:"button is-primary is-fullwidth is-light",on:{click:function(e){return e.preventDefault(),t.handleBatch.apply(null,arguments)}}},["Active"===t.batch.status?e("span",[t._v("Pause Batch")]):"Paused"===t.batch.status?e("span",[t._v("Resume Batch")]):t._e()]):t._e(),t._v(" "),t.batch?e("button",{staticClass:"button is-danger is-fullwidth is-light mt-3",on:{click:function(e){return e.preventDefault(),t.deleteBatch.apply(null,arguments)}}},[e("span",[t._v("Remove batch")])]):t._e(),t._v(" "),e("br")]:t._e(),t._v(" "),t.loading||null===t.userReservation||t.campaignLoading||!t.batch?e("button",{staticClass:"button is-fullwidth is-primary is-loading"},[t._v("\n                Loading\n              ")]):!1===t.userJoined?e("button",{staticClass:"button is-fullwidth is-primary",class:{"is-loading":!0===t.loading},attrs:{disabled:!t.canUserQualify},on:{click:function(e){e.preventDefault(),t.joinCampaignPopup=!0}}},[t._v("\n                Qualify\n              ")]):t.userReservation&&"Active"===t.batch.status?e("button",{staticClass:"button is-fullwidth is-accent has-text-weight-semibold",attrs:{disabled:!t.canUserQualify},on:{click:function(e){return e.preventDefault(),t.reserveTask.apply(null,arguments)}}},[t._v("\n                Resume Task\n              ")]):"Active"===t.batch.status&&t.batch.num_tasks-t.batch.real_tasks_done!=0&&!t.userReservation||t.releasedReservations.length>0?e("button",{staticClass:"button is-fullwidth is-primary",attrs:{disabled:!t.canUserQualify},on:{click:function(e){return e.preventDefault(),t.reserveTask.apply(null,arguments)}}},[t._v("\n                Start Task\n              ")]):[t.userJoined?e("button",{staticClass:"button is-fullwidth is-primary",attrs:{disabled:!0}},[t._v("\n                  Qualified for Task\n                ")]):t._e(),t._v(" "),t._m(4)],t._v(" "),t.canUserQualify?t._e():e("p",{staticClass:"mt-1 is-size-7 has-text-centered"},[t._v("\n                You are not qualified to participate in this task\n              ")])],2)])])]),t._v(" "),t.batch&&t.batch.num_tasks-t.batch.real_tasks_done==0&&t.batchCompleted&&t.successMessage?e("success-modal",{attrs:{message:t.successMessage,title:t.successTitle}}):t._e(),t._v(" "),t.loadingReservation?e("div",{staticClass:"loader-wrapper is-active"},[e("img",{attrs:{src:n(340)}}),t._v(" "),e("br"),e("span",{staticClass:"loading-text"},[t._v("Making reservation")])]):t._e(),t._v(" "),t.campaign&&t.campaign.info?e("instructions-modal",{attrs:{campaign:t.campaign,info:t.campaign.info,show:t.joinCampaignPopup},on:{clicked:t.campaignModalChange}}):t._e()],1)])])}),[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ID")]),t._v(" "),e("th",[t._v("Placeholders")]),t._v(" "),e("th",[t._v("Actions")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ID")]),t._v(" "),e("th",[t._v("Account ID")]),t._v(" "),e("th",[t._v("Data")]),t._v(" "),e("th",[t._v("Paid")]),t._v(" "),e("th",[t._v("Actions")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Reservation ID")]),t._v(" "),e("th",[t._v("Account ID")]),t._v(" "),e("th",[t._v("Submitted on")]),t._v(" "),e("th",[t._v("Actions")])])])},function(){var t=this._self._c;return t("div",{staticClass:"information-header has-text-centered"},[t("h4",{staticClass:"p-5 is-size-4"},[t("b",[this._v("Information")])])])},function(){var t=this._self._c;return t("div",{staticClass:"has-text-centered"},[t("i",[this._v("No active tasks currently")])])}],!1,null,"d4292dd2",null);e.default=component.exports}}]);