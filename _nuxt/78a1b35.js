(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1243:function(e,t,n){var content=n(1246);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(59).default)("5159bc1a",content,!0,{sourceMap:!1})},1245:function(e,t,n){"use strict";n(1243)},1246:function(e,t,n){var r=n(58)(!1);r.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap);"]),r.push([e.i,".template-wrapper[data-v-40dd424e]{width:100%}#mediaFrame[data-v-40dd424e]{width:100%;border:none}",""]),e.exports=r},1248:function(e,t,n){"use strict";n(21),n(61);var r={props:{html:{type:String,default:null}},data:function(){return{alternativeFrontendUrl:"https://effectai.github.io/force-frontend-new",loading:!0}},watch:{html:function(e){document.getElementById("mediaFrame").contentWindow.postMessage({task:"template",value:e},"*")}},mounted:function(){document.addEventListener("keydown",this.sendKeyEvents)},created:function(){window.addEventListener("message",this.communicateWithIframe)},beforeDestroy:function(){window.removeEventListener("message",this.communicateWithIframe),document.removeEventListener("keydown",this.sendKeyEvents)},methods:{mediaFrameLoaded:function(){this.loading=!1,document.getElementById("mediaFrame").contentWindow.postMessage({task:"template",value:this.html},"*"),this.$emit("templateLoaded")},sendKeyEvents:function(e){var t=document.getElementById("mediaFrame");t&&t.contentWindow.postMessage({task:"key",key:e.key},"*")},communicateWithIframe:function(e){var data=e.data;switch(data.task){case"setHeight":document.getElementById("mediaFrame").height=data.height+"px";break;case"submit":this.$emit("submit",data.values);break;case"results":document.getElementById("mediaFrame").contentWindow.postMessage(data,"*")}}}},o=(n(1245),n(23)),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"template-wrapper"},[e.loading?n("div",{staticClass:"loading-text subtitle"},[e._v("\n    Loading\n  ")]):e._e(),e._v(" "),n("iframe",{ref:"mediaFrame",attrs:{id:"mediaFrame",src:e.alternativeFrontendUrl+"/template",name:"mediaFrame",sandbox:"allow-scripts allow-modals allow-downloads allow-forms allow-popups allow-popups-to-escape-sandbox allow-pointer-lock allow-same-origin",allow:"geolocation; microphone; camera; autoplay; fullscreen",allowFullScreen:""},on:{load:e.mediaFrameLoaded}})])}),[],!1,null,"40dd424e",null);t.a=component.exports},1258:function(e,t,n){"use strict";n(73),n(44),n(82),n(47),n(83),n(84),n(86),n(63),n(45),n(85),n(87),n(61);var r=n(29),o=(n(60),n(21),n(62),n(135)),l=n(1272),c=n.n(l);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h={name:"InstructionsModal",props:{info:{type:Object,required:!0,default:function(){return{}}},show:{type:Boolean,required:!1,default:!1},functional:{type:Boolean,required:!1,default:!0},readonly:{type:Boolean,required:!1,default:!1},inclusiveQualifications:{type:Array,required:!1,default:function(){return[]}},exclusiveQualifications:{type:Array,required:!1,default:function(){return[]}}},data:function(){return{tac:!1,id:parseInt(this.$route.params.id),campaign:null,userQuali:[],accountId:this.$auth.user.vAccountRows[0].id}},computed:v(v(v({},Object(o.b)({campaignById:"campaign/campaignById",qualificationById:"qualification/qualificationById"})),Object(o.c)({allQualificationsLoaded:function(e){return e.qualification.allQualificationsLoaded}})),{},{exclQualis:function(){return this.exclusiveQualifications.filter((function(q){return!q.ishidden}))},showModal:{get:function(){return this.show},set:function(e){this.$emit("clicked",e)}}}),created:function(){this.campaign=this.campaignById(this.id)},methods:{userAssignedQuali:function(e){var t=this,n=[];if(0===this.assignedQuali.length)return[];console.log("inclsive: ".concat(JSON.stringify(this.assignedQuali)));var r,o=d(this.campaign.qualis);try{var l=function(){var o=r.value,l=t.qualificationById(o.key),c=t.assignedQuali.some((function(e){return console.log("checking in some",e,o.key),e.quali_id===o.key}));console.log("UserHasQualiInclusive: ".concat(o)),o.value===e&&n.push({name:l.info.name,code:o.key,userHasQuali:c})};for(o.s();!(r=o.n()).done;)l()}catch(e){o.e(e)}finally{o.f()}return n},onCancel:function(){this.functional&&(this.showModal=!1)},onClick:function(){this.functional&&this.$parent.reserveTask()},sanitizeHtmlCustom:function(e){return c()(e,{allowedTags:["h1","h2","h3","h4","h5","h6","blockquote","p","a","ul","ol","nl","li","b","i","strong","em","strike","code","hr","br","div","table","thead","caption","tbody","tr","th","td","pre","iframe","img","span","label"],allowedAttributes:{a:["href","name","target","class"],img:["src","alt"],iframe:["src"],"*":["style"]}})}}},_=n(23),component=Object(_.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.info?n("div",{staticClass:"modal",class:{"is-active":e.showModal},style:{position:e.functional?"fixed":"relative",padding:e.functional?"initial":"10px",zIndex:e.functional?"40":"1"}},[n("div",{staticClass:"modal-background"}),e._v(" "),n("div",{staticClass:"modal-card"},[n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[e._v("\n        "+e._s(e.info.title)+"\n      ")]),e._v(" "),n("button",{staticClass:"delete",attrs:{"aria-label":"close",disabled:!e.functional},on:{click:function(t){return t.preventDefault(),e.onCancel()}}})]),e._v(" "),n("section",{staticClass:"modal-card-body"},[e.info?n("div",{staticClass:"content",domProps:{innerHTML:e._s(e.sanitizeHtmlCustom(e.$md.render(e.info.instructions)))}}):n("p",[e._v("\n        ...\n      ")]),e._v(" "),n("hr"),e._v(" "),n("div",{staticClass:"block is-vcentered"},[n("div",{staticClass:"is-size-4 has-text-centered"},[e._v("\n          Qualifications\n        ")]),e._v(" "),e.allQualificationsLoaded?n("div",[e._m(0),e._v(" "),e.inclusiveQualifications.length>0?n("div",{staticClass:"tags has-addons"},e._l(e.inclusiveQualifications,(function(t){return n("span",{key:t.id,staticClass:"tag",class:t.userHasQuali?"is-light is-success":"is-danger is-light",attrs:{"data-tooltip":t.userHasQuali?"Found: Ok":"Not Found: Required"}},[t.userHasQuali?n("span",[e._v("ðŸ—¸")]):n("span",[e._v("ðŸ—´")]),e._v("\n              Â \n              "),n("nuxt-link",{attrs:{to:"/qualifications/"+t.id}},[e._v(e._s(t.info.name))])],1)})),0):n("div",[e._v("\n            None\n          ")]),e._v(" "),n("br"),e._v(" "),e._m(1),e._v(" "),e.exclQualis.length>0?n("div",{staticClass:"tags"},e._l(e.exclQualis,(function(t){return n("span",{key:t.code,staticClass:"tag",class:t.userHasQuali?"is-light is-danger":"is-warning is-light",attrs:{"data-tooltip":t.userHasQuali?"Found: Excluded":"Not found: Ok"}},[t.userHasQuali?n("span",[e._v("ðŸ—´")]):n("span",[e._v("ðŸ—¸")]),e._v("\n              Â \n              "),n("nuxt-link",{attrs:{to:"/qualifications/"+t.id}},[e._v(e._s(t.info.name))])],1)})),0):n("div",[e._v("\n            None\n          ")])]):n("div",{staticClass:"loading-text has-text-centered"},[e._v("Loading")]),e._v(" "),n("br")]),e._v(" "),n("hr"),e._v(" "),n("label",{staticClass:"checkbox"},[e.readonly?n("input",{attrs:{checked:"",type:"checkbox",disabled:""}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.tac,expression:"tac"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.tac)?e._i(e.tac,null)>-1:e.tac},on:{change:function(t){var n=e.tac,r=t.target,o=!!r.checked;if(Array.isArray(n)){var l=e._i(n,null);r.checked?l<0&&(e.tac=n.concat([null])):l>-1&&(e.tac=n.slice(0,l).concat(n.slice(l+1)))}else e.tac=o}}}),e._v("\n        I agree to the "),n("a",{attrs:{href:"/download/tac.pdf",target:"_blank"}},[e._v("terms and conditions")])])]),e._v(" "),n("footer",{staticClass:"modal-card-foot has-text-centered"},[e.readonly?n("button",{staticClass:"button is-primary",attrs:{disabled:!e.functional},on:{click:function(t){return t.preventDefault(),e.onCancel()}}},[e._v("\n        OK\n      ")]):[n("button",{staticClass:"button is-primary has-tooltip has-tooltip-arrow",attrs:{"data-tooltip":e.tac?"No additional\nqualifications needed":"agree to the terms and\nconditions to qualify",disabled:!e.tac||!e.info||!e.functional},on:{click:function(t){return t.preventDefault(),e.onClick()}}},[e._v("\n          Qualify\n        ")]),e._v(" "),n("button",{staticClass:"button",attrs:{disabled:!e.functional},on:{click:function(t){return t.preventDefault(),e.onCancel()}}},[e._v("\n          Cancel\n        ")])]],2)])]):e._e()}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("Required "),n("i",[e._v("(Having these qualifications is required)")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("Exclude "),n("i",[e._v("(Having these qualifications will exclude you from this task)")])])}],!1,null,"7ec6035f",null);t.a=component.exports},1263:function(e,t){},1264:function(e,t){},1268:function(e,t){},1269:function(e,t){},1275:function(e,t){},1278:function(e,t){},1299:function(e,t,n){"use strict";var r=n(3),o=(n(28),n(21),n(96),{data:function(){return{uploadingFile:!1,selectedFile:null,file:null,ipfsExplorer:this.$blockchain.sdk.config.ipfsNode}},methods:{getSelectedFile:function(){this.$refs.file&&(this.selectedFile=this.$refs.file.files[0])},uploadFile:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.selectedFile){t.next=26;break}if(e.uploadingFile=!0,(n=new FormData).append("file",e.selectedFile),t.prev=4,!(e.selectedFile.size>1e6)){t.next=11;break}throw e.selectedFile=null,e.$refs.file.value="",new Error("Max file size allowed is 1 MB");case 11:return t.next=13,fetch("".concat(e.ipfsExplorer,"/api/v0/add?pin=true"),{method:"POST",body:n});case 13:return r=t.sent,t.next=16,r.json();case 16:e.file=t.sent,e.$emit("upload","".concat(e.ipfsExplorer,"/").concat(e.file.Hash)),e.selectedFile=null,e.$refs.file.value="";case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(4),e.$blockchain.handleError(t.t0);case 25:e.uploadingFile=!1;case 26:case"end":return t.stop()}}),t,null,[[4,22]])})))()}}}),l=n(23),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"control"},[n("div",{staticClass:"file has-name is-fullwidth"},[n("label",{staticClass:"file-label"},[n("input",{ref:"file",staticClass:"file-input",attrs:{id:"file",type:"file"},on:{change:e.getSelectedFile}}),e._v(" "),e._m(0),e._v(" "),n("span",{staticClass:"file-name"},[e.selectedFile?n("span",[e._v(e._s(e.selectedFile.name))]):e._e()]),e._v(" "),n("span",[n("button",{staticClass:"button is-primary",class:{"is-loading":e.uploadingFile},attrs:{disabled:!e.selectedFile},on:{click:function(t){return t.preventDefault(),e.uploadFile.apply(null,arguments)}}},[e._v("Upload to IPFS")])])])])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"file-cta"},[n("span",{staticClass:"file-icon"},[n("i",{staticClass:"fa fa-upload"})]),e._v(" "),n("span",{staticClass:"file-label"},[e._v("\n          Choose a fileâ€¦\n        ")])])}],!1,null,null,null);t.a=component.exports},1342:function(e,t,n){var content=n(1452);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(59).default)("6c384903",content,!0,{sourceMap:!1})},1343:function(e,t,n){var content=n(1454);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(59).default)("aca6ff38",content,!0,{sourceMap:!1})},1451:function(e,t,n){"use strict";n(1342)},1452:function(e,t,n){var r=n(58)(!1);r.push([e.i,".CodeMirror{height:100%}",""]),e.exports=r},1453:function(e,t,n){"use strict";n(1343)},1454:function(e,t,n){var r=n(58)(!1);r.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap);"]),r.push([e.i,"#template[data-v-7d700f2e]{height:500px}div.instructions-group .textarea[data-v-7d700f2e]{overflow-y:scroll}@media screen and (max-width:769px){.splitpanes.default-theme[data-v-7d700f2e]{display:block!important}}.splitpanes.default-theme .splitpanes__pane[data-v-7d700f2e]{background:transparent!important}@media screen and (max-width:769px){.splitpanes.default-theme .splitpanes__pane[data-v-7d700f2e]{width:100%!important}}",""]),e.exports=r},1523:function(e,t,n){"use strict";n.r(t);n(73),n(82),n(83),n(84),n(86),n(87);var r=n(3),o=n(29),l=(n(28),n(45),n(60),n(21),n(62),n(47),n(137),n(1399),n(111),n(121),n(63),n(61),n(1288),n(599),n(44),n(85),n(135)),c=n(1283),d=n(74),f=n(1290),m=n.n(f),v=n(1414),h=n(1415),_=n(1258),w=n(1248),y=n(375),C=(n(1444),n(1299));n(1446),n(1448);function k(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function I(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?I(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):I(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var E={components:{codemirror:v.codemirror,VueSimplemde:c.a,TemplateMedia:w.a,InstructionsModal:_.a,SuccessModal:y.a,Splitpanes:h.b,Pane:h.a,Multiselect:m.a,UploadToIpfs:C.a},beforeRouteLeave:function(e,t,n){this.checkClose()&&n()},middleware:["auth"],data:function(){return{cmOptions:{tabSize:4,mode:"htmlmixed",theme:"default",lineNumbers:!0,line:!0},success:!1,loading:!1,preview:!1,campaignIpfs:{title:"",description:"",instructions:"",template:"",image:"",category:"",example_task:{},version:1.1,webhook:null,reward:null,estimated_time:null},formGroup:"tasks",cachedFormData:null,uploadingFile:!1,selectedFile:null,submitted:!1,errors:[],successMessage:null,successTitle:null,answer:null,windowWidth:0,inclusiveQualis:[],exclusiveQualis:[],options:[]}},computed:O(O({},Object(l.c)({allQualificationsLoaded:function(e){return e.qualification.allQualificationsLoaded}})),{},{hasChanged:function(){return this.cachedFormData!==this.formDataForComparison()},estimatedEarnings:function(){if(this.campaignIpfs&&this.campaignIpfs.estimated_time&&this.campaignIpfs.reward){var e=3600/this.campaignIpfs.estimated_time*this.campaignIpfs.reward;return{efxPerHour:e,dollarPerHour:e*this.$blockchain.efxPrice}}return{efxPerHour:0,dollarPerHour:0}},qualificationsDropdownData:function(){var e,t=this,n=[],r=k(this.$store.state.qualification.qualifications.filter((function(q){return q.account_id===t.$auth.user.vAccountRows[0].id||q.account_id===t.$blockchain.sdk.config.qualifierAccountId})));try{for(r.s();!(e=r.n()).done;){var o=e.value;o.info.name&&n.push({name:o.info.name,code:o.id})}}catch(e){r.e(e)}finally{r.f()}return n}}),watch:{"campaignIpfs.template":function(template){var e=this,t=function(e,t,n){n||(n=1);for(var r,o=[];r=t.exec(e);)o.push(r[n]);return o}(template,/\$\{\s?(\w+)\s?\|?\s?(\w*)\s?\}/g),n={};t.forEach((function(t){n[t]=e.campaignIpfs.example_task[t]||""})),this.campaignIpfs.example_task=n},campaignIpfs:{deep:!0,handler:function(e){window.localStorage.setItem("cached_campaignIpfs",JSON.stringify(e))}}},created:function(){this.getQualifications(),this.cacheFormData(),window.addEventListener("resize",this.handleResize),this.handleResize()},destroyed:function(){window.removeEventListener("resize",this.handleResize)},beforeDestroy:function(){window.removeEventListener("beforeunload",this.checkClose)},methods:{selectImage:function(e){this.campaignIpfs.image=e},getQualifications:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.allQualificationsLoaded){t.next=3;break}return t.next=3,e.$store.dispatch("qualification/getQualifications");case 3:case"end":return t.stop()}}),t)})))()},addExclusiveQuali:function(e,t){var n={name:e,code:t};this.exclusiveQualis.push(n)},addInclusiveQuali:function(e,t){var n={name:e,code:t};this.inclusiveQualis.push(n)},handleResize:function(){this.windowWidth=window.innerWidth},retrieveTemplate:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,l,c,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=new TextDecoder("utf-8"),!e.templateUrl){n.next=11;break}return t.campaignIpfs.template="Retrieving campaign template..",n.next=5,fetch(e.templateUrl,{mode:"cors"});case 5:return n.next=7,n.sent.json();case 7:o=n.sent,t.campaignIpfs.template=o.template,n.next=12;break;case 11:e.template&&(t.campaignIpfs.template=decodeURI(e.template));case 12:if(!e.placeholders){n.next=22;break}return n.next=15,fetch(e.placeholders.replaceAll('"',""));case 15:return l=n.sent,n.next=18,l.arrayBuffer();case 18:c=n.sent,d=r.decode(c),console.debug(d),t.campaignIpfs.example_task=JSON.parse(d);case 22:case"end":return n.stop()}}),n)})))()},showSubmission:function(e){this.answer=e},importCampaign:function(e){var t=this,n=e.target.files[0],r=new FileReader;n.name.includes(".json")&&(r.onload=function(e){t.campaignIpfs=JSON.parse(e.target.result)},r.onerror=function(e){return console.error(e)},r.readAsText(n))},exportCampaign:function(){var e=new Blob([JSON.stringify(this.campaignIpfs)],{type:"application/json"}),link=document.createElement("a");link.href=URL.createObjectURL(e),link.download=0===this.campaignIpfs.length?"effect_".concat(this.campaignIpfs.title,".json"):"effect_untitled_campaign.json",link.click(),URL.revokeObjectURL(link.href)},renderTemplate:function(template){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new d.Template(template,e,t).render()},checkForm:function(){return this.errors=[],!!(this.campaignIpfs.title&&this.campaignIpfs.description&&this.campaignIpfs.reward&&this.campaignIpfs.category&&this.campaignIpfs.instructions&&this.campaignIpfs.template&&this.campaignIpfs.estimated_time)||(this.campaignIpfs.title||this.errors.push("Title is required."),this.campaignIpfs.description||this.errors.push("Description is required."),this.campaignIpfs.reward||this.errors.push("Reward per task is required."),this.campaignIpfs.category||this.errors.push("Category is required."),this.campaignIpfs.instructions||this.errors.push("Instructions is required."),this.campaignIpfs.template||this.errors.push("Template is required."),this.campaignIpfs.estimated_time||this.errors.push("Estimated time is required."),!1)},cacheFormData:function(){var e=window.localStorage.getItem("cached_campaignIpfs");e&&(this.campaignIpfs=JSON.parse(e)),this.retrieveTemplate(this.$route.query),this.cachedFormData=this.formDataForComparison(),window.addEventListener("beforeunload",this.checkClose)},createCampaign:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o,i,l,c,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.checkForm()){t.next=27;break}for(e.loading=!0,r=O({},e.campaignIpfs),o=[],i=0;i<e.exclusiveQualis.length;i++)o.push({key:e.exclusiveQualis[i].code,value:1});for(l=0;l<e.inclusiveQualis.length;l++)o.push({key:e.inclusiveQualis[l].code,value:0});return t.next=9,e.$blockchain.uploadCampaign(r);case 9:return c=t.sent,t.next=12,e.$blockchain.createCampaign(c,e.campaignIpfs.reward,o);case 12:return d=t.sent,e.successTitle="Campaign submitted successfully",e.successMessage="Waiting for transaction to complete before continuing",t.next=17,e.$blockchain.waitForTransaction(d);case 17:return t.next=19,e.$store.dispatch("campaign/getCampaigns");case 19:return t.next=21,e.$blockchain.getMyLastCampaign();case 21:n=t.sent,e.$store.dispatch("transaction/addTransaction",d),e.campaignIpfs={title:"",description:"",instructions:"",template:"",image:"",category:"",example_task:{},version:1,reward:null,estimated_time:null},e.loading=!1,e.submitted=!0,e.$router.push("/campaigns/".concat(n.id));case 27:t.next=34;break;case 29:t.prev=29,t.t0=t.catch(0),console.error(t.t0),e.loading=!1,e.errors.push(t.t0);case 34:case"end":return t.stop()}}),t,null,[[0,29]])})))()},formDataForComparison:function(){return JSON.stringify({campaign:this.campaign,campaignIpfs:this.campaignIpfs})},checkClose:function(e){if(this.hasChanged&&!this.loading&&!this.submitted){var t="You have unsaved changes. Are you sure you wish to leave?";return!!confirm(t)||(e.preventDefault(),e.returnValue=t,!1)}return!0}}},$=E,F=(n(1451),n(1453),n(23)),component=Object(F.a)($,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"section"},[r("div",{staticClass:"container"},[e.loading?r("div",{staticClass:"loader-wrapper is-active"},[r("img",{attrs:{src:n(374)}}),e._v(" "),r("br"),r("span",{staticClass:"loading-text"},[e._v("Waiting for the transaction to complete")])]):e._e(),e._v(" "),e._m(0),e._v(" "),r("h1",{staticClass:"title mt-5"},[e._v("\n      New Task\n    ")]),e._v(" "),e.errors.length?r("div",e._l(e.errors,(function(t){return r("div",{key:e.toString(t),staticClass:"notification is-danger is-light"},[e._v("\n        "+e._s(t)+"\n      ")])})),0):e._e(),e._v(" "),r("div",{staticClass:"columns"},[r("div",{staticClass:"column"},[r("div",{staticClass:"tabs"},[r("ul",[r("li",{class:{"is-active":"tasks"===e.formGroup}},[r("a",{on:{click:function(t){t.preventDefault(),e.formGroup="tasks"}}},[e._v("Design Tasks "),r("span",{staticClass:"has-text-danger"},[e._v("*")])])]),e._v(" "),r("li",{class:{"is-active":"basic-info"===e.formGroup}},[r("a",{on:{click:function(t){t.preventDefault(),e.formGroup="basic-info"}}},[e._v("Basic Information "),r("span",{staticClass:"has-text-danger"},[e._v("*")])])]),e._v(" "),r("li",{class:{"is-active":"instructions"===e.formGroup}},[r("a",{on:{click:function(t){t.preventDefault(),e.formGroup="instructions"}}},[e._v("Instructions "),r("span",{staticClass:"has-text-danger"},[e._v("*")])])]),e._v(" "),r("li",{class:{"is-active":"advanced"===e.formGroup}},[r("a",{on:{click:function(t){t.preventDefault(),e.formGroup="advanced"}}},[e._v("Advanced")])])])])]),e._v(" "),r("div",{staticClass:"column is-narrow"},[r("div",{staticClass:"field is-grouped is-grouped-right mt-4"},[r("div",{staticClass:"control has-margin-bottom-mobile"},[r("button",{staticClass:"button is-secondary is-outlined is-small",on:{click:function(t){return t.preventDefault(),e.$refs.fileInput.click()}}},[e._v("\n              Import\n            ")]),e._v(" "),r("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"application/json"},on:{change:function(t){return e.importCampaign(t)}}})]),e._v(" "),r("div",{staticClass:"control"},[r("button",{staticClass:"button is-secondary is-outlined is-small",on:{click:function(t){return t.preventDefault(),e.exportCampaign.apply(null,arguments)}}},[e._v("\n              Export\n            ")])])])])]),e._v(" "),r("form",{on:{submit:function(t){return t.preventDefault(),e.createCampaign.apply(null,arguments)}}},[r("div",{directives:[{name:"show",rawName:"v-show",value:"basic-info"===e.formGroup,expression:"formGroup === 'basic-info'"}],staticClass:"block basic-info-group"},[r("div",{staticClass:"field"},[e._m(1),e._v(" "),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.campaignIpfs.title,expression:"campaignIpfs.title"}],staticClass:"input",attrs:{type:"text",placeholder:"My Campaign Title"},domProps:{value:e.campaignIpfs.title},on:{input:function(t){t.target.composing||e.$set(e.campaignIpfs,"title",t.target.value)}}})])]),e._v(" "),r("div",{staticClass:"field"},[e._m(2),e._v(" "),r("div",{staticClass:"control"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.campaignIpfs.description,expression:"campaignIpfs.description"}],staticClass:"textarea",domProps:{value:e.campaignIpfs.description},on:{input:function(t){t.target.composing||e.$set(e.campaignIpfs,"description",t.target.value)}}})])]),e._v(" "),r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v("Image")]),e._v(" "),r("upload-to-ipfs",{on:{upload:e.selectImage}}),e._v(" "),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.campaignIpfs.image,expression:"campaignIpfs.image"}],staticClass:"input",attrs:{type:"url",placeholder:"Image URL"},domProps:{value:e.campaignIpfs.image},on:{input:function(t){t.target.composing||e.$set(e.campaignIpfs,"image",t.target.value)}}})])],1),e._v(" "),r("div",{staticClass:"field"},[e._m(3),e._v(" "),r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.campaignIpfs.category,expression:"campaignIpfs.category"}],attrs:{required:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.campaignIpfs,"category",t.target.multiple?n:n[0])}}},[r("option",[e._v("---")]),e._v(" "),r("option",{attrs:{value:"qualifier"}},[e._v("\n                Qualifier\n              ")]),e._v(" "),r("option",{attrs:{value:"annotations"}},[e._v("\n                Annotations\n              ")]),e._v(" "),r("option",{attrs:{value:"socials"}},[e._v("\n                Socials\n              ")])])])]),e._v(" "),r("hr"),e._v(" "),r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v("\n            Worker must have qualifications\n          ")]),e._v(" "),e.allQualificationsLoaded?r("multiselect",{attrs:{"tag-placeholder":"Add",placeholder:"Select Qualifications",label:"name","track-by":"code",options:e.qualificationsDropdownData,multiple:!0,taggable:!0,"show-labels":!1},on:{tag:e.addInclusiveQuali},model:{value:e.inclusiveQualis,callback:function(t){e.inclusiveQualis=t},expression:"inclusiveQualis"}}):e._e()],1),e._v(" "),r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v("\n            Deny workers with qualification\n          ")]),e._v(" "),e.allQualificationsLoaded?r("multiselect",{attrs:{"tag-placeholder":"Add",placeholder:"Select Qualifications",label:"name","track-by":"code",options:e.qualificationsDropdownData,multiple:!0,taggable:!0,"show-labels":!1},on:{tag:e.addExclusiveQuali},model:{value:e.exclusiveQualis,callback:function(t){e.exclusiveQualis=t},expression:"exclusiveQualis"}}):e._e()],1),e._v(" "),r("hr"),e._v(" "),r("div",{staticClass:"field"},[e._m(4),e._v(" "),r("div",{staticClass:"field has-addons"},[r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.campaignIpfs.reward,expression:"campaignIpfs.reward"}],staticClass:"input",attrs:{type:"number",placeholder:"Reward per task",step:"0.0001"},domProps:{value:e.campaignIpfs.reward},on:{input:function(t){t.target.composing||e.$set(e.campaignIpfs,"reward",t.target.value)}}})]),e._v(" "),e._m(5)])]),e._v(" "),r("div",{staticClass:"field"},[e._m(6),e._v(" "),r("div",{staticClass:"field has-addons"},[r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.campaignIpfs.estimated_time,expression:"campaignIpfs.estimated_time"}],staticClass:"input",attrs:{type:"number",placeholder:"1",step:"1",min:"1"},domProps:{value:e.campaignIpfs.estimated_time},on:{input:function(t){t.target.composing||e.$set(e.campaignIpfs,"estimated_time",t.target.value)}}})]),e._v(" "),e._m(7)])]),e._v(" "),r("div",{staticClass:"field"},[e._m(8),e._v(" "),r("div",{staticClass:"field"},[e.campaignIpfs&&e.campaignIpfs.estimated_time&&e.campaignIpfs.reward?r("div",[r("b",[r("span",[e._v(e._s(parseFloat(e.estimatedEarnings.efxPerHour).toFixed(4))+" EFX")]),e._v(" "),r("span",[e._v("($"+e._s(parseFloat(e.estimatedEarnings.dollarPerHour).toFixed(2))+")")])])]):r("div",[e._m(9)])])])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"instructions"===e.formGroup,expression:"formGroup === 'instructions'"}],staticClass:"block instructions-group"},[r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-two-fifths"},[r("div",{staticClass:"field"},[e._m(10),e._v(" "),e.campaignIpfs?r("div",{staticClass:"control"},[r("vue-simplemde",{ref:"markdownEditor",attrs:{required:"",configs:{promptURLs:!0,spellChecker:!1}},model:{value:e.campaignIpfs.instructions,callback:function(t){e.$set(e.campaignIpfs,"instructions",t)},expression:"campaignIpfs.instructions"}})],1):e._e()])]),e._v(" "),r("div",{staticClass:"column is-three-fifths"},[r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v("Preview")]),e._v(" "),r("div",{staticClass:"control"},[e.campaignIpfs?r("instructions-modal",{attrs:{show:!0,functional:!1,info:e.campaignIpfs}}):e._e()],1)])])])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"tasks"===e.formGroup,expression:"formGroup === 'tasks'"}],staticClass:"block task-group"},[r("div",{staticClass:"columns is-variable is-2 is-multiline"},[r("splitpanes",{staticClass:"default-theme",attrs:{horizontal:e.windowWidth<767}},[r("pane",{staticClass:"column is-6-widescreen is-12"},[r("label",{staticClass:"label"},[e._v("Template "),r("span",{staticClass:"has-text-info"},[r("b",[e._v("*")])])]),e._v(" "),r("codemirror",{ref:"template",attrs:{id:"template",options:e.cmOptions,name:"template"},model:{value:e.campaignIpfs.template,callback:function(t){e.$set(e.campaignIpfs,"template",t)},expression:"campaignIpfs.template"}}),e._v(" "),Object.keys(e.campaignIpfs.example_task).length?r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v("Example Task")])]):r("div",[e._v("\n                Add placeholders to your template. For example:\n                "),r("pre",[e._v("${placeholder}")])]),e._v(" "),r("div",[e._v("\n                To learn more about templates and placeholders, visit the "),r("a",{attrs:{href:"https://effectai.github.io/developer-docs/effect_network/template.html",target:"_blank"}},[e._v("documentation")]),e._v(".\n              ")]),e._v(" "),e._l(e.campaignIpfs.example_task,(function(t,n){return r("div",{key:n,staticClass:"field is-horizontal"},[r("div",{staticClass:"field-label is-small"},[r("label",{staticClass:"label"},[e._v(e._s(n))])]),e._v(" "),r("div",{staticClass:"field-body is-small"},[r("div",{staticClass:"field"},[r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.campaignIpfs.example_task[n],expression:"campaignIpfs.example_task[key]"}],staticClass:"input is-small",attrs:{type:"text"},domProps:{value:e.campaignIpfs.example_task[n]},on:{input:function(t){t.target.composing||e.$set(e.campaignIpfs.example_task,n,t.target.value)}}})])])])])}))],2),e._v(" "),r("pane",{staticClass:"column is-6-widescreen is-12"},[r("h2",{staticClass:"subtitle"},[e._v("\n                Task Preview\n              ")]),e._v(" "),r("template-media",{attrs:{html:e.renderTemplate(e.campaignIpfs.template||"No template found..",e.campaignIpfs.example_task||{})},on:{submit:e.showSubmission}}),e._v(" "),r("div",{staticClass:"mt-5"},[r("h2",{staticClass:"subtitle"},[e._v("\n                  Submission Answer\n                ")]),e._v(" "),e.answer?r("pre",[e._v(e._s(e.answer))]):r("p",[e._v("\n                  Make sure your template has a submit button so that users can submit their answers. Test your template by submitting and view your submission here\n                ")])])],1)],1)],1)]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"advanced"===e.formGroup,expression:"formGroup === 'advanced'"}],staticClass:"block basic-info-group"},[r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v("\n            Webhook URL for submissions\n          ")]),e._v(" "),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.campaignIpfs.webhook,expression:"campaignIpfs.webhook"}],staticClass:"input",attrs:{type:"url",placeholder:"webhook url.."},domProps:{value:e.campaignIpfs.webhook},on:{input:function(t){t.target.composing||e.$set(e.campaignIpfs,"webhook",t.target.value)}}})])])]),e._v(" "),r("div",{staticClass:"field is-grouped is-grouped-right"},[r("div",{staticClass:"control"},[r("nuxt-link",{staticClass:"button is-light",attrs:{to:"/campaigns"}},[e._v("\n            Cancel\n          ")])],1),e._v(" "),r("div",{staticClass:"control",class:{"has-tooltip-arrow":!e.answer},attrs:{"data-tooltip":e.answer?null:"submit your template in the task\npreview to test your template"}},[r("button",{staticClass:"button is-primary is-wide",class:{"is-loading":e.loading},attrs:{type:"submit",disabled:!e.answer}},[e._v("\n            Create Task\n          ")])])])])]),e._v(" "),e.successMessage?r("success-modal",{attrs:{message:e.successMessage,title:e.successTitle}}):e._e()],1)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"is-pulled-right"},[n("span",{staticClass:"has-text-info"},[n("b",[e._v("*")])]),e._v(" "),n("i",[e._v(" is required")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"label"},[e._v("\n            Title\n            "),n("span",{staticClass:"has-text-info"},[e._v("*")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"label"},[e._v("\n            Description\n            "),n("span",{staticClass:"has-text-info"},[e._v("*")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"label"},[e._v("\n            Category\n            "),n("span",{staticClass:"has-text-info"},[e._v("*")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"label"},[e._v("\n            EFX "),n("strong",[e._v("/")]),e._v(" Task\n            "),n("span",{staticClass:"has-text-info"},[e._v("*")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"control"},[n("a",{staticClass:"button is-primary"},[e._v("\n                EFX\n              ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"label",attrs:{for:""}},[e._v("\n            Time "),n("strong",[e._v("/")]),e._v(" Task\n            "),n("span",{staticClass:"has-text-info"},[e._v("*")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"control"},[n("a",{staticClass:"button is-primary",attrs:{href:""}},[e._v("Seconds")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"label",attrs:{for:""}},[e._v("\n            EFX "),n("strong",[e._v("/")]),e._v(" Hour\n          ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b",[n("span",[e._v("...")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"label"},[e._v("\n                Raw Markdown\n                "),n("span",{staticClass:"has-text-info"},[e._v("*")])])}],!1,null,"7d700f2e",null);t.default=component.exports}}]);