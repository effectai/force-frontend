(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1061:function(t,e,n){var content=n(1064);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(60).default)("bdb64966",content,!0,{sourceMap:!1})},1063:function(t,e,n){"use strict";n(1061)},1064:function(t,e,n){var c=n(59)(!1);c.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap);"]),c.push([t.i,".watermark[data-v-df11ef9c]{background-color:rgba(0,0,0,.15);position:absolute;top:15em;left:0;height:-webkit-fill-available;width:60%;vertical-align:middle}.watermark>p[data-v-df11ef9c]{transform:rotate(-45deg);font-size:9vw;color:rgba(0,0,0,.3)}.template-wrapper[data-v-df11ef9c]{width:100%}#mediaFrame[data-v-df11ef9c]{width:100%;border:none}@media(max-width:768px){.watermark[data-v-df11ef9c]{width:-webkit-fill-available;top:20em;height:50%}.watermark>p[data-v-df11ef9c]{transform:rotate(-45deg) translate(-22vh,42vw);font-size:17vw;color:rgba(0,0,0,.3)}}@media(max-width:540px){.watermark>p[data-v-df11ef9c]{transform:rotate(-45deg) translate(-24vh,57vw);font-size:17vw;color:rgba(0,0,0,.3)}}@media(max-width:419px){.watermark[data-v-df11ef9c]{top:21em}}",""]),t.exports=c},1066:function(t,e,n){"use strict";n(14),n(61);var c={props:{isLiveTask:{type:Boolean,default:!1},html:{type:String,default:null}},data:function(){return{alternativeFrontendUrl:"https://effectai.github.io/force-frontend",loading:!0,iframeLoaded:!1}},watch:{html:function(t){document.getElementById("mediaFrame").contentWindow.postMessage({task:"template",value:t},"*")}},mounted:function(){document.getElementById("mediaFrame").addEventListener("load",this.frameIsLoaded),document.addEventListener("keydown",this.sendKeyEvents)},created:function(){window.addEventListener("message",this.communicateWithIframe)},beforeDestroy:function(){window.removeEventListener("message",this.communicateWithIframe),document.removeEventListener("keydown",this.sendKeyEvents)},methods:{frameIsLoaded:function(){this.iframeLoaded=!0},mediaFrameLoaded:function(){this.loading=!1,document.getElementById("mediaFrame").contentWindow.postMessage({task:"template",value:this.html},"*"),this.$emit("templateLoaded")},sendKeyEvents:function(t){var e=document.getElementById("mediaFrame");e&&e.contentWindow.postMessage({task:"key",key:t.key},"*")},communicateWithIframe:function(t){var data=t.data;switch(data.task){case"setHeight":document.getElementById("mediaFrame").height=data.height+"px";break;case"submit":this.$emit("submit",data.values);break;case"results":document.getElementById("mediaFrame").contentWindow.postMessage(data,"*")}}}},o=(n(1063),n(22)),component=Object(o.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"template-wrapper"},[t.loading?e("div",{staticClass:"loading-text subtitle"},[t._v("\n    Loading\n  ")]):t._e(),t._v(" "),e("iframe",{ref:"mediaFrame",attrs:{id:"mediaFrame",src:t.alternativeFrontendUrl+"/template",name:"mediaFrame",sandbox:"allow-scripts allow-modals allow-downloads allow-forms allow-popups allow-popups-to-escape-sandbox allow-pointer-lock allow-same-origin",allow:"geolocation; microphone; camera; autoplay; fullscreen",allowFullScreen:""},on:{load:t.mediaFrameLoaded}}),t._v(" "),!1!==t.isLiveTask?e("div",[t.iframeLoaded?e("div",{staticClass:"watermark columns is-centered is-vcentered"},[e("p",[t._v("PREVIEW")])]):t._e()]):t._e()])}),[],!1,null,"df11ef9c",null);e.a=component.exports},1067:function(t,e,n){var map={"./effect-captions-icon.png":1068,"./effect-dao-icon.png":1069,"./effect-force-icon.png":563,"./effect-socials-icon.png":1070,"./effect-translate-icon.png":1071};function c(t){var e=o(t);return n(e)}function o(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}c.keys=function(){return Object.keys(map)},c.resolve=o,t.exports=c,c.id=1067},1068:function(t,e,n){t.exports=n.p+"img/effect-captions-icon.d32e1fd.png"},1069:function(t,e,n){t.exports=n.p+"img/effect-dao-icon.8a49264.png"},1070:function(t,e,n){t.exports=n.p+"img/effect-socials-icon.113948d.png"},1071:function(t,e,n){t.exports=n.p+"img/effect-translate-icon.a76baca.png"},1075:function(t,e,n){"use strict";n(54),n(69),n(53),n(45),n(34),n(55),n(36),n(56),n(82),n(62),n(47),n(81),n(83),n(61);var c=n(19),o=(n(43),n(14),n(46)),r=n(1089),l=n.n(r);function d(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,c=function(){};return{s:c,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){l=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw o}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={name:"InstructionsModal",props:{info:{type:Object,required:!0,default:function(){return{}}},show:{type:Boolean,required:!1,default:!1},functional:{type:Boolean,required:!1,default:!0},readonly:{type:Boolean,required:!1,default:!1},inclusiveQualifications:{type:Array,required:!1,default:function(){return[]}},exclusiveQualifications:{type:Array,required:!1,default:function(){return[]}}},data:function(){return{tac:!1,id:parseInt(this.$route.params.id),campaign:null,userQuali:[],accountId:this.$auth.user.vAccountRows[0].id}},computed:m(m(m({},Object(o.c)({campaignById:"campaign/campaignById",qualificationById:"qualification/qualificationById"})),Object(o.d)({allQualificationsLoaded:function(t){return t.qualification.allQualificationsLoaded}})),{},{exclQualis:function(){return this.exclusiveQualifications.filter((function(q){return!q.ishidden}))},showModal:{get:function(){return this.show},set:function(t){this.$emit("clicked",t)}}}),created:function(){this.campaign=this.campaignById(this.id)},methods:{userAssignedQuali:function(t){var e=this,n=[];if(0===this.assignedQuali.length)return[];var c,o=d(this.campaign.qualis);try{var r=function(){var o,r=c.value,l=e.qualificationById(r.key),d=e.assignedQuali.some((function(t){return console.log("checking in some",t,r.key),t.quali_id===r.key}));(console.log("UserHasQualiInclusive: ".concat(r)),r.value===t)&&n.push({name:null===(o=l.info)||void 0===o?void 0:o.name,code:r.key,userHasQuali:d})};for(o.s();!(c=o.n()).done;)r()}catch(t){o.e(t)}finally{o.f()}return n},onCancel:function(){this.functional&&(this.showModal=!1)},onClick:function(){this.functional&&this.$parent.reserveTask()},sanitizeHtmlCustom:function(t){return l()(t,{allowedTags:["h1","h2","h3","h4","h5","h6","blockquote","p","a","ul","ol","nl","li","b","i","strong","em","strike","code","hr","br","div","table","thead","caption","tbody","tr","th","td","pre","iframe","img","span","label"],allowedAttributes:{a:["href","name","target","class"],img:["src","alt"],iframe:["src"],"*":["style"]}})}}},_=n(22),component=Object(_.a)(h,(function(){var t=this,e=t._self._c;return t.info?e("div",{staticClass:"modal",class:{"is-active":t.showModal},style:{position:t.functional?"fixed":"relative",padding:t.functional?"initial":"10px",zIndex:t.functional?"40":"1"}},[e("div",{staticClass:"modal-background"}),t._v(" "),e("div",{staticClass:"modal-card"},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v("\n        "+t._s(t.info.title)+"\n      ")]),t._v(" "),e("button",{staticClass:"delete",attrs:{"aria-label":"close",disabled:!t.functional},on:{click:function(e){return e.preventDefault(),t.onCancel()}}})]),t._v(" "),e("section",{staticClass:"modal-card-body"},[t.info?e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.sanitizeHtmlCustom(t.$md.render(t.info.instructions)))}}):e("p",[t._v("\n        ...\n      ")]),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"block is-vcentered"},[e("div",{staticClass:"is-size-4 has-text-centered"},[t._v("\n          Qualifications\n        ")]),t._v(" "),t.allQualificationsLoaded?e("div",[t._m(0),t._v(" "),t.inclusiveQualifications.length>0?e("div",{staticClass:"tags"},t._l(t.inclusiveQualifications,(function(n){var c;return e("span",{key:n.id,staticClass:"tag p-3 m-3",class:n.userHasQuali?"is-light is-success":"is-danger is-light",attrs:{"data-tooltip":n.userHasQuali?"Found: Ok":"Not Found: Required"}},[n.userHasQuali?e("span",[t._v("✅")]):e("span",[t._v("❌")]),t._v("\n               \n              "),e("nuxt-link",{attrs:{to:"/qualifications/".concat(n.id)}},[t._v(t._s(null===(c=n.info)||void 0===c?void 0:c.name))])],1)})),0):e("div",[t._v("\n            None\n          ")]),t._v(" "),e("br"),t._v(" "),t._m(1),t._v(" "),t.exclQualis.length>0?e("div",{staticClass:"tags"},t._l(t.exclQualis,(function(n){var c;return e("span",{key:n.code,staticClass:"tag p-3 m-3",class:n.userHasQuali?"is-light is-danger":"is-warning is-light",attrs:{"data-tooltip":n.userHasQuali?"Found: Excluded":"Not found: Ok"}},[n.userHasQuali?e("span",[t._v("❌")]):e("span",[t._v("✅")]),t._v("\n               \n              "),e("nuxt-link",{attrs:{to:"/qualifications/".concat(n.id)}},[t._v(t._s(null===(c=n.info)||void 0===c?void 0:c.name))])],1)})),0):e("div",[t._v("\n            None\n          ")])]):e("div",{staticClass:"loading-text has-text-centered"},[t._v("Loading")]),t._v(" "),e("br")]),t._v(" "),e("hr"),t._v(" "),e("label",{staticClass:"checkbox"},[t.readonly?e("input",{attrs:{checked:"",type:"checkbox",disabled:""}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.tac,expression:"tac"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.tac)?t._i(t.tac,null)>-1:t.tac},on:{change:function(e){var n=t.tac,c=e.target,o=!!c.checked;if(Array.isArray(n)){var r=t._i(n,null);c.checked?r<0&&(t.tac=n.concat([null])):r>-1&&(t.tac=n.slice(0,r).concat(n.slice(r+1)))}else t.tac=o}}}),t._v("\n        I agree to the "),e("a",{attrs:{href:"/download/tac.pdf",target:"_blank"}},[t._v("terms and conditions")])])]),t._v(" "),e("footer",{staticClass:"modal-card-foot has-text-centered"},[t.readonly?e("button",{staticClass:"button is-primary",attrs:{disabled:!t.functional},on:{click:function(e){return e.preventDefault(),t.onCancel()}}},[t._v("\n        OK\n      ")]):[e("button",{staticClass:"button is-primary has-tooltip has-tooltip-arrow",attrs:{"data-tooltip":t.tac?"No additional\nqualifications needed":"Agree to the terms andconditions to enter the task.",disabled:!t.tac||!t.info||!t.functional},on:{click:function(e){return e.preventDefault(),t.onClick()}}},[t._v("\n          Enter Task\n        ")]),t._v(" "),e("button",{staticClass:"button",attrs:{disabled:!t.functional},on:{click:function(e){return e.preventDefault(),t.onCancel()}}},[t._v("\n          Cancel\n        ")])]],2)])]):t._e()}),[function(){var t=this,e=t._self._c;return e("div",[t._v("Task Requirements "),e("i",[t._v("(You must have this qualification in order to enter the task.)")])])},function(){var t=this,e=t._self._c;return e("div",[t._v("Blocked Qualifications"),e("i",[t._v("(Having these qualifications will exclude you from this task.)")])])}],!1,null,"4182c04a",null);e.a=component.exports},1080:function(t,e){},1081:function(t,e){},1085:function(t,e){},1086:function(t,e){},1091:function(t,e){},1153:function(t,e,n){var content=n(1248);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(60).default)("69311bd2",content,!0,{sourceMap:!1})},1247:function(t,e,n){"use strict";n(1153)},1248:function(t,e,n){var c=n(59)(!1);c.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap);"]),c.push([t.i,".box-title[data-v-78f8c822]{text-align:center;border-bottom:2px solid #cdd4e6;padding-bottom:31px;margin:10px 0 15px}.progress[data-v-78f8c822]::-webkit-progress-value{-webkit-transition:width .5s ease;transition:width .5s ease}.tabs li[data-v-78f8c822]{font-weight:500}.tabs li a[data-v-78f8c822]{padding-left:35px;padding-right:35px}.tabs li.is-active a[data-v-78f8c822]{border-bottom-width:2px;border-bottom-color:#1977f3;color:#151a1f;font-weight:600}",""]),t.exports=c},1302:function(t,e,n){"use strict";n.r(e);n(100),n(108),n(53),n(69),n(34),n(81),n(14),n(564),n(54),n(45),n(55),n(36),n(56),n(82),n(62),n(47),n(83),n(61);var c=n(2),o=n(40),r=n(19),l=(n(27),n(43),n(144),n(90),n(46)),d=n(71),f=n(1066),v=n(341),m=n(1075),h={name:"BatchModal",props:{show:{type:Boolean,required:!1,default:!0}},data:function(){return{id:parseInt(this.$route.params.id)}},computed:{showModal:{get:function(){return this.show},set:function(){this.$emit("cancelled")}}},methods:{onCancel:function(){this.showModal=!1}}},_=n(22),k=Object(_.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal",class:{"is-active":t.showModal}},[e("div",{staticClass:"modal-background"}),t._v(" "),e("div",{staticClass:"modal-card"},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v("\n        Add first tasks\n      ")]),t._v(" "),e("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(e){return e.preventDefault(),t.onCancel()}}})]),t._v(" "),t._m(0),t._v(" "),e("footer",{staticClass:"modal-card-foot"},[e("div",{staticClass:"buttons is-centered mx-auto"},[e("nuxt-link",{staticClass:"button is-primary",attrs:{to:"/campaigns/".concat(t.id,"/new")}},[e("span",{staticClass:"icon"},[t._v("\n            +\n          ")]),t._v(" "),e("span",[t._v("Add Tasks")])]),t._v(" "),e("button",{staticClass:"button",on:{click:function(e){return e.preventDefault(),t.onCancel()}}},[t._v("\n          Cancel\n        ")])],1)])])])}),[function(){var t=this._self._c;return t("section",{staticClass:"modal-card-body"},[t("div",{staticClass:"content"},[this._v("\n        It looks like you haven't added any tasks yet... Let's add some!\n      ")])])}],!1,null,null,null).exports;function y(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,c=function(){};return{s:c,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){l=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw o}}}}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function w(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function x(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Q={components:{TemplateMedia:f.a,InstructionsModal:m.a,BatchModal:k,SuccessModal:v.a},middleware:["auth"],data:function(){return{completed:parseInt(this.$route.query.completed),ipfsExplorer:this.$blockchain.sdk.config.ipfsNode,id:parseInt(this.$route.params.id),accountId:this.$auth.user.vAccountRows[0].id,body:"instruction",userJoined:!1,loading:!1,joinCampaignPopup:!1,userReservation:null,cancelledBatchesPopup:!1,loadingReservation:!1,showBatchesPopup:!1,waitingOnTransaction:!1,categories:["translate","captions","socials","dao"],successMessage:null,campaignQualis:[]}},computed:x(x(x({},Object(l.c)({batchesByCampaignId:"campaign/batchesByCampaignId",activeBatchesByCampaignId:"campaign/activeBatchesByCampaignId",qualificationById:"qualification/qualificationById"})),{},{exclQualis:function(){return this.exclusiveQualifications.filter((function(q){return!q.ishidden}))}},Object(l.d)({joinedCampaigns:function(t){return t.campaign.joinedCampaigns},campaigns:function(t){return t.campaign.campaigns},allCampaignsLoaded:function(t){return t.campaign.allCampaignsLoaded},batchesLoading:function(t){return t.campaign.loadingBatch&&!t.campaign.allBatchesLoaded},allQualificationsLoaded:function(t){return t.qualification.allQualificationsLoaded},assignedQualifications:function(t){return t.qualification.assignedQualifications},allAssignedQualificationsLoaded:function(t){return t.qualification.allAssignedQualificationsLoaded},advanced:function(t){return t.view.advanced}})),{},{campaignBatches:function(){return this.batchesByCampaignId(this.id)},activeCampaignBatches:function(){return this.activeBatchesByCampaignId(this.id)},campaign:function(){var t=this;if(this.campaigns)return this.campaigns.find((function(e){return e.id===t.id}))},estimatedEarnings:function(){if(this.campaign&&this.campaign.info.estimated_time&&this.campaign.info.reward){var t=3600/this.campaign.info.estimated_time*this.campaign.info.reward;return{efxPerHour:t,dollarPerHour:t*this.$blockchain.efxPrice}}return{efxPerHour:0,dollarPerHour:0}},inclusiveQualifications:function(){var t=this;return this.allAssignedQualificationsLoaded&&this.campaign&&this.campaign.qualis?this.campaign.qualis.filter((function(q){return 0===q.value})).map((function(q){var e,n=t.qualificationById(q.key);return n.userHasQuali=null===(e=t.assignedQualifications)||void 0===e?void 0:e.some((function(t){return t.id===n.id})),n})):[]},exclusiveQualifications:function(){var t=this;return this.allAssignedQualificationsLoaded&&this.campaign&&this.campaign.qualis?this.campaign.qualis.filter((function(q){return 1===q.value})).map((function(q){var e,n=t.qualificationById(q.key);return n.userHasQuali=null===(e=t.assignedQualifications)||void 0===e?void 0:e.some((function(t){return t.id===n.id})),n})):[]},canUserQualify:function(){var t,e=this;if(null!==(t=this.campaign)&&void 0!==t&&t.qualis&&this.campaign.qualis.length>0){var n,c=y(this.campaign.qualis);try{var r=function(){var t=n.value;if(!e.assignedQualifications||0===t.value&&!e.assignedQualifications.find((function(e){return e.id===t.key}))||1===t.value&&e.assignedQualifications.find((function(e){return e.id===t.key})))return{v:!1}};for(c.s();!(n=c.n()).done;){var l=r();if("object"===Object(o.a)(l))return l.v}}catch(t){c.e(t)}finally{c.f()}}return!0}}),watch:{"$route.query.completed":function(t){this.completed=parseInt(t),this.showCompletedPopup()}},mounted:function(){this.showCompletedPopup(),this.bootup()},created:function(){},methods:x(x({},Object(l.b)({getAssignedQualifications:"qualification/getAssignedQualifications"})),{},{bootup:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getBatches();case 2:if(t.allQualificationsLoaded){e.next=5;break}return e.next=5,t.$store.dispatch("qualification/getQualifications");case 5:return e.next=7,t.checkUserCampaign();case 7:return e.next=9,t.getCampaign();case 9:case"end":return e.stop()}}),e)})))()},showCompletedPopup:function(){this.completed&&(this.successTitle="No more tasks available for you in this campaign",this.successMessage="This could either mean that all the available tasks are already reserved, or you already completed the still available tasks.")},reserveTask:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,c,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$store.commit("view/ADD_JOINED_CAMPAIGN",t.campaign.id),t.loadingReservation=!0,n=[],c=y(t.campaignBatches);try{for(c.s();!(o=c.n()).done;)(r=o.value).num_tasks*r.repetitions>r.tasks_done&&n.push(r)}catch(t){c.e(t)}finally{c.f()}return e.prev=5,e.next=8,t.$blockchain.makeReservation(n);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),t.$blockchain.handleError(e.t0);case 13:t.loadingReservation=!1;case 14:case"end":return e.stop()}}),e,null,[[5,10]])})))()},renderTemplate:function(template){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new d.Template(template,t,e).render()},campaignModalChange:function(t){this.joinCampaignPopup=t},cancelBatchModal:function(){this.cancelledBatchesPopup=!0},getBatches:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,c,o,r,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("campaign/getBatches");case 2:null!==(n=t.campaignBatches)&&void 0!==n&&n.length||(t.userReservation=!1),c=y(t.campaignBatches),e.prev=4,c.s();case 6:if((o=c.n()).done){e.next=15;break}return r=o.value,e.next=10,t.$blockchain.getTaskReservationsForBatch(r.batch_id);case 10:l=e.sent,(d=l.find((function(e){return e.account_id===t.$auth.user.vAccountRows[0].id&&parseInt(new Date(new Date(e.submitted_on)+"UTC").getTime()/1e3)+parseInt(t.$blockchain.sdk.force.config.releaseTaskDelaySec.toFixed(0))>parseInt((Date.now()/1e3).toFixed(0))})))&&(t.userReservation=d);case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),c.e(e.t0);case 20:return e.prev=20,c.f(),e.finish(20);case 23:0===t.campaignBatches.length&&(t.showBatchesPopup=!0),null!==t.userReservation&&void 0!==t.userReservation||(t.userReservation=!1);case 25:case"end":return e.stop()}}),e,null,[[4,17,20,23]])})))()},checkUserCampaign:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.loading=!0,e.prev=1,t.userJoined=t.$store.state.view.joinedCampaigns.includes(t.id),e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(1),e.next=9,t.$blockchain.handleError(e.t0);case 9:t.loading=!1;case 10:case"end":return e.stop()}}),e,null,[[1,5]])})))()},submitTask:function(t){console.log("Task submitted!",t)},getCampaign:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("campaign/getCampaign",t.id);case 2:case"end":return e.stop()}}),e)})))()},getProgressBatch:function(t){switch(null==t?void 0:t.status){case"Completed":return"is-success";case"Active":return"is-info";case"Paused":return"is-warning"}}})},B=Q,O=(n(1247),Object(_.a)(B,(function(){var t,e,c=this,o=c._self._c;return o("section",{staticClass:"section is-max-widescreen"},[c.campaign&&c.campaign.info?o("instructions-modal",{attrs:{show:c.joinCampaignPopup,"inclusive-qualifications":c.inclusiveQualifications,"exclusive-qualifications":c.exclusiveQualifications,campaign:c.campaign,info:c.campaign.info},on:{clicked:c.campaignModalChange}}):c._e(),c._v(" "),c.campaign&&c.campaignBatches?o("batch-modal",{attrs:{show:c.$auth.user.accountName===c.campaign.owner[1]&&c.showBatchesPopup&&!c.cancelledBatchesPopup},on:{cancelled:c.cancelBatchModal}}):c._e(),c._v(" "),c.loadingReservation?o("div",{staticClass:"loader-wrapper is-active"},[o("img",{attrs:{src:n(340)}}),c._v(" "),o("br"),o("span",{staticClass:"loading-text"},[c._v("Making reservation")])]):c._e(),c._v(" "),o("div",{staticClass:"container"},[o("nav",{staticClass:"breadcrumb",attrs:{"aria-label":"breadcrumbs"}},[o("ul",[o("li",[o("nuxt-link",{attrs:{to:"/"}},[c._v("\n            Tasks\n          ")])],1),c._v(" "),o("li",{staticClass:"is-active"},[o("nuxt-link",{attrs:{to:"/campaigns/"+c.id,"aria-current":"page"}},[c._v("\n            Task "+c._s(c.id)+"\n          ")])],1)])]),c._v(" "),c.loading?o("div",{staticClass:"loader-wrapper is-active"},[o("img",{attrs:{src:n(340)}}),c._v(" "),o("br"),c._v(" "),c.waitingOnTransaction?o("span",{staticClass:"loading-text subtitle"},[c._v("Waiting for the transaction to complete")]):o("span",{staticClass:"loading-text subtitle"},[c._v("Please sign the transaction")])]):c._e(),c._v(" "),c.campaign?o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-three-fifths"},[c.campaign.info?o("div",[c.campaign.info&&c.campaign.info.category?o("nuxt-link",{staticClass:"tag is-light is-medium mb-5",class:["is-"+c.campaign.info.category],attrs:{to:"/?category="+c.campaign.info.category}},[c._v("\n            "+c._s(c.campaign.info.category)+"\n          ")]):o("span",{staticClass:"tag is-info is-light is-medium"},[c._v("...")])],1):c._e(),c._v(" "),o("div",{staticClass:"is-flex is-align-items-center mb-4"},[c.campaign?o("p",{staticClass:"image has-radius mr-4",staticStyle:{width:"52px",height:"52px"}},[c.campaign.info&&c.campaign.info.image?o("img",{attrs:{src:c.campaign.info.image.Hash?c.ipfsExplorer+"/ipfs/"+c.campaign.info.image.Hash:c.campaign.info.image}}):c.campaign.info&&c.campaign.info.category&&c.categories.includes(c.campaign.info.category)?o("img",{attrs:{src:n(1067)("./effect-".concat(c.campaign.info.category,"-icon.png"))}}):o("img",{attrs:{src:n(563),alt:"campaign title"}})]):c._e(),c._v(" "),o("div",{staticClass:"title has-text-weight-bold"},[o("span",[c._v("#"+c._s(c.id)+" ")]),c._v(" "),c.campaign.info?o("span",[c._v(c._s(c.campaign.info.title))]):null!==c.campaign.info?o("span",{staticClass:"loading-text"},[c._v("Loading")]):o("span",{staticClass:"has-text-danger-dark"},[c._v("Could not load campaign info")])])]),c._v(" "),o("div",{staticClass:"tabs campaign-tabs"},[o("ul",[o("li",{class:{"is-active":"instruction"===c.body}},[o("a",{on:{click:function(t){t.preventDefault(),c.body="instruction"}}},[c._v("Instructions")])]),c._v(" "),o("li",{class:{"is-active":"preview"===c.body}},[o("a",{on:{click:function(t){t.preventDefault(),c.body="preview"}}},[c._v("Preview")])]),c._v(" "),o("li",{class:{"is-active":"batches"===c.body}},[o("a",{on:{click:function(t){t.preventDefault(),c.body="batches"}}},[c._v("Batches")])])])]),c._v(" "),"batches"===c.body?o("div",{staticClass:"block"},[o("div",{staticClass:"mt-5"},[o("div",{staticClass:"is-flex is-justify-content-space-between is-align-items-center"},[o("h4",{staticClass:"is-size-6 mb-0 has-text-weight-bold"},[c._v("\n                Tasks\n              ")]),c._v(" "),c.$auth.user.accountName===c.campaign.owner[1]?o("nuxt-link",{staticClass:"button is-primary is-pulled-right no-float-mobile has-margin-bottom-mobile",attrs:{to:"/campaigns/".concat(c.id,"/new")}},[o("span",{staticClass:"icon"},[c._v("\n                  +\n                ")]),c._v(" "),o("span",[c._v("Add Tasks")])]):c._e()],1),c._v(" "),o("hr",{staticClass:"mt-2 mb-5"}),c._v(" "),o("div",{staticClass:"block mt-5"},[c.campaignBatches?o("div",c._l(c.campaignBatches.slice().reverse(),(function(t){return o("nuxt-link",{key:t.id,staticClass:"box p-4",class:{"is-disabled":!1},attrs:{to:c.campaign&&c.campaign.owner[1]===c.$auth.user.accountName||c.advanced?"/campaigns/".concat(t.campaign_id,"/").concat(t.batch_id):""}},[o("div",{staticClass:"columns is-vcentered is-multiline is-mobile"},[o("div",{staticClass:"column"},[o("p",{staticClass:"has-text-grey is-size-7"},[c._v("\n                        Batch\n                      ")]),c._v(" "),o("h2",{staticClass:"subtitle is-6 has-text-weight-semibold mb-0"},[c._v("\n                        #"),c.campaign?o("span",[c._v(c._s(c.campaign.id)+".")]):c._e(),c._v(c._s(t.id)+"\n                      ")])]),c._v(" "),o("div",{staticClass:"column"},[o("p",{staticClass:"has-text-grey is-size-7"},[c._v("\n                        Status\n                      ")]),c._v(" "),t?o("h2",{staticClass:"subtitle is-6 has-text-weight-semibold mb-0"},[c._v("\n                        "+c._s(t.status)+"\n                      ")]):c._e()]),c._v(" "),o("div",{staticClass:"column"},[t.num_tasks-t.real_tasks_done==0?o("p",{staticClass:"has-text-grey is-size-7"},[c._v("\n                        "+c._s(t.real_tasks_done)+" Task"),t.real_tasks_done>1?o("span",[c._v("s")]):c._e(),c._v(" "),o("small",[c._v("("),o("b",{staticClass:"has-text-info"},[c._v("Done")]),c._v(")")])]):"Active"===t.status&&t.num_tasks-t.real_tasks_done>0?o("p",{staticClass:"has-text-grey is-size-7"},[c._v("\n                        Tasks "),o("small",[c._v("("),o("b",[c._v(c._s(t.num_tasks-t.real_tasks_done)+" / "+c._s(t.num_tasks))]),c._v(" left)")])]):"Paused"===t.status?o("p",{staticClass:"has-text-grey is-size-7"},[c._v("\n                        "+c._s(t.real_tasks_done)+" Task "),t.real_tasks_done>1?o("span",[c._v("s")]):c._e(),o("small",[o("b",[c._v("completed")])])]):c._e(),c._v(" "),o("progress",{staticClass:"progress is-small mt-2",class:c.getProgressBatch(t),attrs:{max:t.num_tasks},domProps:{value:t.real_tasks_done}})])])])})),1):c._e(),c._v(" "),c.batchesLoading?o("div",{staticClass:"loading-text"},[c._v("\n                Tasks loading\n              ")]):c.campaignBatches&&!c.campaignBatches.length?o("div",[c._v("\n                No tasks\n              ")]):c.campaignBatches?c._e():o("div",[c._v("\n                Could not retrieve batches\n              ")])])])]):c._e(),c._v(" "),"instruction"===c.body?o("div",{staticClass:"block"},[c.campaign.info?o("p",[o("b",[c._v("Description")]),o("br"),c._v("\n            "+c._s(c.campaign.info.description)+"\n          ")]):o("p",[c._v("\n            ...\n          ")]),c._v(" "),c.campaign&&c.campaign.info?o("b",[o("br"),c._v("Instructions")]):c._e(),o("br"),c._v(" "),c.campaign&&c.campaign.info?o("div",{staticClass:"content",domProps:{innerHTML:c._s(c.$md.render(c.campaign.info.instructions))}}):o("p",[c._v("\n            ...\n          ")])]):c._e(),c._v(" "),"preview"===c.body?o("div",{staticClass:"block"},[c.campaign&&c.campaign.info?o("template-media",{attrs:{html:c.renderTemplate(c.campaign.info.template||"No template found..",c.campaign.info.example_task||{}),isLiveTask:!0},on:{submit:c.submitTask}}):c._e()],1):c._e()]),c._v(" "),o("div",{staticClass:"column is-two-fifths"},[o("div",{staticClass:"information-block"},[c._m(0),c._v(" "),o("div",{staticClass:"p-5"},[o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("div",{staticClass:"block"},[c._v("\n                  Reward\n                  "),o("br"),c._v(" "),o("b",[o("span",[c._v(c._s(c.campaign.reward.quantity))])])]),c._v(" "),o("div",{staticClass:"block"},[c._v("\n                  Time "),o("strong",[c._v("/")]),c._v(" Task"),o("br"),c._v(" "),o("b",[c.campaign.info&&c.campaign.info.estimated_time?o("span",[c._v(c._s(c.campaign.info.estimated_time)+" Seconds")]):o("span",[c._v("...")])])]),c._v(" "),c.advanced?o("div",{staticClass:"block"},[c._v("\n                  Requester\n                  "),o("br"),c._v(" "),o("div",{staticClass:"blockchain-address"},[o("nuxt-link",{attrs:{to:"/profile/"+c.campaign.owner[1]}},[c._v("\n                      "+c._s(c.campaign.owner[1])+"\n                    ")])],1)]):c._e()]),c._v(" "),o("div",{staticClass:"column is-half"},[o("div",{staticClass:"block"},[c._v("\n                  Tasks\n                  "),o("br"),c._v(" "),null===c.activeBatchesByCampaignId(c.campaign.id)?o("span",{staticClass:"loading-text"},[c._v("\n                    Loading\n                  ")]):o("span",[o("b",[c._v(c._s(c.activeBatchesByCampaignId(c.campaign.id).reduce((function(a,b){return a+b.num_tasks}),0)-c.activeBatchesByCampaignId(c.campaign.id).reduce((function(a,b){return a+b.real_tasks_done}),0))+"/"+c._s(c.activeBatchesByCampaignId(c.campaign.id).reduce((function(a,b){return a+b.num_tasks}),0))+" left")])])]),c._v(" "),c.campaign.info&&"qualifier"!==c.campaign.info.category?o("div",{staticClass:"block"},[c._v("\n                  EFX "),o("strong",[c._v("/")]),c._v(" Hour\n                  "),o("br"),c._v(" "),c.campaign.info.estimated_time?o("div",[o("b",[o("span",[c._v(c._s(c.estimatedEarnings.efxPerHour)+" EFX")]),c._v(" "),c.estimatedEarnings.dollarPerHour?o("span",[c._v("($"+c._s(parseFloat(c.estimatedEarnings.dollarPerHour).toFixed(2))+")")]):c._e()])]):o("div",[c._m(1)])]):c._e(),c._v(" "),c.advanced?o("div",{staticClass:"block"},[c._v("\n                  IPFS\n                  "),o("br"),c._v(" "),o("div",{staticClass:"blockchain-address"},[o("a",{attrs:{target:"_blank",href:"".concat(c.ipfsExplorer,"/ipfs/").concat(c.campaign.content.field_1)}},[c._v(c._s(c.campaign.content.field_1))])])]):c._e(),c._v(" "),c.advanced?o("div",{staticClass:"block"},[c._v("\n                  Blockchain\n                  "),o("br"),c._v(" "),o("a",{attrs:{target:"_blank",href:"".concat(c.$blockchain.eos.explorer,"/account/").concat(c.$blockchain.sdk.force.config.forceContract,"?loadContract=true&tab=Tables&table=campaign&account=").concat(c.$blockchain.sdk.force.config.forceContract,"&scope=").concat(c.$blockchain.sdk.force.config.forceContract,"&limit=1&lower_bound=").concat(c.id,"&upper_bound=").concat(c.id)}},[c._v("View in Explorer")])]):c._e()])]),c._v(" "),c.campaign.info&&c.campaign.info.qualification&&"qualifier"===c.campaign.info.category?o("div",{staticClass:"block is-vcentered has-text-centered"},[o("hr"),c._v(" "),o("div",{staticClass:"is-size-4 has-text-centered"},[c._v("\n                Qualifies you for:\n              ")]),c._v(" "),o("nuxt-link",{attrs:{to:"/qualifications/".concat(null===(t=c.campaign.info.qualification)||void 0===t?void 0:t.id)}},[c._v("\n                "+c._s(null===(e=c.campaign.info.qualification)||void 0===e?void 0:e.label)+"\n              ")])],1):c._e(),c._v(" "),c.inclusiveQualifications.length>0||c.exclusiveQualifications.length>0?o("div",{staticClass:"block is-vcentered"},[o("hr"),c._v(" "),o("div",{staticClass:"is-size-4 has-text-centered"},[c._v("\n                Qualifications\n              ")]),c._v(" "),c.allQualificationsLoaded?o("div",[c.inclusiveQualifications.length>0?o("div",{},[o("div",{staticClass:"is-size-5 has-text-centered"},[c._v("\n                    You need these qualifications:\n                  ")]),c._v(" "),c._l(c.inclusiveQualifications,(function(t){var e;return o("div",{key:t.id,staticClass:"tags",attrs:{"data-tooltip":t.userHasQuali?"You have this qualification":"You do not have this qualification"}},[o("label",{staticClass:"b-checkbox checkbox is-medium tag is-light is-success is-size-6-mobile"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.userHasQuali,expression:"quali.userHasQuali"}],attrs:{type:"checkbox",disabled:""},domProps:{checked:Array.isArray(t.userHasQuali)?c._i(t.userHasQuali,null)>-1:t.userHasQuali},on:{change:function(e){var n=t.userHasQuali,o=e.target,r=!!o.checked;if(Array.isArray(n)){var l=c._i(n,null);o.checked?l<0&&c.$set(t,"userHasQuali",n.concat([null])):l>-1&&c.$set(t,"userHasQuali",n.slice(0,l).concat(n.slice(l+1)))}else c.$set(t,"userHasQuali",r)}}}),c._v(" "),o("span",{staticClass:"check is-success"}),c._v(" "),o("span",{staticClass:"control-label"},[o("nuxt-link",{attrs:{to:"/qualifications/".concat(t.id)}},[c._v(c._s(null===(e=t.info)||void 0===e?void 0:e.name))])],1)])])}))],2):c._e(),c._v(" "),o("br"),c._v(" "),c.exclusiveQualifications.length>0?o("div",{},[o("div",{staticClass:"is-size-5 has-text-centered"},[c._v("\n                    Having these qualifications will disqualify you:\n                  ")]),c._v(" "),c._l(c.exclusiveQualifications,(function(t){var e;return o("div",{key:t.id,staticClass:"tags",attrs:{"data-tooltip":t.userHasQuali?"You have this qualification":"You do not have this qualification"}},[o("label",{staticClass:"b-checkbox checkbox is-medium tag is-light is-danger is-size-6-mobile"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.userHasQuali,expression:"quali.userHasQuali"}],attrs:{type:"checkbox",disabled:""},domProps:{checked:Array.isArray(t.userHasQuali)?c._i(t.userHasQuali,null)>-1:t.userHasQuali},on:{change:function(e){var n=t.userHasQuali,o=e.target,r=!!o.checked;if(Array.isArray(n)){var l=c._i(n,null);o.checked?l<0&&c.$set(t,"userHasQuali",n.concat([null])):l>-1&&c.$set(t,"userHasQuali",n.slice(0,l).concat(n.slice(l+1)))}else c.$set(t,"userHasQuali",r)}}}),c._v(" "),o("span",{staticClass:"check is-danger"}),c._v(" "),o("span",{staticClass:"control-label"},[o("nuxt-link",{attrs:{to:"/qualifications/".concat(t.id)}},[c._v(c._s(null===(e=t.info)||void 0===e?void 0:e.name))])],1)])])}))],2):c._e()]):o("div",{staticClass:"loading-text has-text-centered"},[c._v("\n                Loading\n              ")]),c._v(" "),o("br")]):c._e(),c._v(" "),o("div",{staticClass:"block is-vcentered"},[o("hr"),c._v(" "),c.$auth.user.accountName===c.campaign.owner[1]?o("div",[c.$auth.user.accountName===c.campaign.owner[1]?o("nuxt-link",{staticClass:"button is-fullwidth is-primary has-margin-bottom-mobile",attrs:{to:"/campaigns/".concat(c.id,"/new")}},[o("span",{staticClass:"icon"},[c._v("\n                    +\n                  ")]),c._v(" "),o("span",[c._v("Add Tasks")])]):c._e(),c._v(" "),o("br"),c._v(" "),o("nuxt-link",{staticClass:"button is-fullwidth is-primary is-light has-margin-bottom-mobile",attrs:{to:"/campaigns/".concat(c.id,"/edit")}},[c._v("\n                  Edit Task\n                ")]),c._v(" "),o("br")],1):c._e(),c._v(" "),c.loading||null===c.campaignBatches||void 0===c.userReservation||null===c.userReservation||!c.allQualificationsLoaded?o("button",{staticClass:"button is-fullwidth is-primary is-loading"},[c._v("\n                Loading\n              ")]):!1===c.userJoined?o("button",{staticClass:"button is-fullwidth is-primary",attrs:{disabled:!c.canUserQualify},on:{click:function(t){t.preventDefault(),c.joinCampaignPopup=!0}}},[c._v("\n                Enter Task\n              ")]):c.activeCampaignBatches.reduce((function(a,b){return a+b.num_tasks}),0)-c.activeCampaignBatches.reduce((function(a,b){return a+b.real_tasks_done}),0)>0&&!c.userReservation?o("button",{staticClass:"button is-fullwidth is-primary",attrs:{disabled:!c.canUserQualify},on:{click:function(t){return t.preventDefault(),c.reserveTask.apply(null,arguments)}}},[c._v("\n                Start Task\n              ")]):c.userReservation?o("button",{staticClass:"button is-fullwidth is-accent has-text-weight-semibold",on:{click:function(t){return t.preventDefault(),c.reserveTask.apply(null,arguments)}}},[c._v("\n                Go To Task\n              ")]):[c.userJoined?o("button",{staticClass:"button is-fullwidth is-primary",attrs:{disabled:!0}},[c._v("\n                  Qualified for Task\n                ")]):c._e(),c._v(" "),c._m(2)],c._v(" "),c.canUserQualify?c._e():o("p",{staticClass:"mt-1 is-size-7 has-text-centered"},[c._v("\n                You are not qualified to participate in this task\n              ")])],2)])])])]):o("div",{staticClass:"loading-text"},[c._v("\n      Task loading\n    ")])]),c._v(" "),c.completed&&c.successMessage?o("success-modal",{attrs:{message:c.successMessage,title:c.successTitle}}):c._e()],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"information-header has-text-centered"},[t("h4",{staticClass:"p-5 is-size-4"},[t("b",[this._v("Information")])])])},function(){var t=this._self._c;return t("b",[t("span",[this._v("...")])])},function(){var t=this._self._c;return t("div",{staticClass:"has-text-centered"},[t("i",[this._v("No active tasks currently")])])}],!1,null,"78f8c822",null));e.default=O.exports}}]);