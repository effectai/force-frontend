import{g as B,u as N,i as X,M as V,r as q,X as A,Y as D,o as t,c as a,a as e,t as o,k as s,S as G,T as M,l as R,Z as U,d as W}from"./DRzdypsL.js";import{a as Y}from"./VZpoIE_P.js";const Z={class:"container"},$=e("div",{class:"text-2xl title my-5"}," Profile ",-1),j={class:"profile-stats"},w=e("label",null,"Name",-1),z={class:"text-lg"},H=e("label",null,"Permission",-1),J={class:"text-lg"},K=e("label",null,"EFX",-1),O={class:"text-lg"},Q={class:"payout-container"},ee=e("label",null,"Pending EFX",-1),se={key:0},te={key:1,class:"text-lg"},ae={key:0,class:"claimable"},oe={key:1,class:"pending"},ne={class:"profile-toolbar"},le=["disabled"],re=B({__name:"profile",setup(ie){const{usePendingPayments:g,disconnectWallet:v,permission:f,isLoggedIn:p,userName:d,usePayoutEfx:b,useGetBalance:h,useForceSettings:y}=N(),k=X(),{data:x}=h(d),{data:C,isLoading:P}=y(),{data:i,isLoading:T}=g(),S=V(()=>T.value||P.value),r=q([]),E=c=>c.map(l=>({...l,claimableIn:U(l,C.value)})),I=A(()=>{i.value&&(r.value=E(i.value.pendingPayments))},1e3),{mutateAsync:L}=b();D(()=>{clearInterval(I)});const F=()=>{v(),localStorage.removeItem("access_token"),k.push("/")};return(c,l)=>{var u,m,_;return t(),a("div",Z,[$,e("div",j,[e("div",null,[w,e("div",z,o(s(d)),1)]),e("div",null,[H,e("div",J,o(s(f)),1)]),e("div",null,[K,e("div",O,o(((u=s(x))==null?void 0:u.efxBalance)??0),1)])]),e("div",Q,[ee,s(S)?(t(),a("div",se," Loading.. ")):(t(),a("div",te,[(t(!0),a(G,null,M(s(r),n=>(t(),a("div",{key:n.id},[W(o(n.batch_id)+" - "+o(n.pending.quantity)+" ",1),n.claimableIn<0?(t(),a("span",ae,"Claimable")):(t(),a("span",oe," Claimable in "+o(("formatSecondsToTime"in c?c.formatSecondsToTime:s(Y))(n.claimableIn))+" seconds ",1))]))),128))]))]),e("div",ne,[e("button",{class:"button",disabled:((m=s(i))==null?void 0:m.totalEfxClaimable)===0,onClick:l[0]||(l[0]=n=>s(L)())}," Claim "+o((_=s(i))==null?void 0:_.totalEfxClaimable)+" EFX ",9,le),s(p)?(t(),a("button",{key:0,class:"button",onClick:F}," Logout ")):R("",!0)])])}}});export{re as default};
