(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1254:function(e,t,n){var content=n(1257);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(58).default)("2ac9a1b4",content,!0,{sourceMap:!1})},1256:function(e,t,n){"use strict";n(1254)},1257:function(e,t,n){var l=n(57)(!1);l.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap);"]),l.push([e.i,".template-wrapper[data-v-502fba47]{width:100%}#mediaFrame[data-v-502fba47]{width:100%;border:none}",""]),e.exports=l},1259:function(e,t,n){"use strict";n(25),n(69);var l={props:{html:{type:String,default:null}},data:function(){return{alternativeFrontendUrl:"https://effectai.github.io/force-frontend-new",loading:!0}},watch:{html:function(e){document.getElementById("mediaFrame").contentWindow.postMessage({task:"template",value:e},"*")}},mounted:function(){document.addEventListener("keydown",this.sendKeyEvents)},created:function(){window.addEventListener("message",this.communicateWithIframe)},beforeDestroy:function(){window.removeEventListener("message",this.communicateWithIframe),document.removeEventListener("keydown",this.sendKeyEvents)},methods:{mediaFrameLoaded:function(){this.loading=!1,document.getElementById("mediaFrame").contentWindow.postMessage({task:"template",value:this.html},"*"),this.$emit("templateLoaded")},sendKeyEvents:function(e){var t=document.getElementById("mediaFrame");t&&t.contentWindow.postMessage({task:"key",key:e.key},"*")},communicateWithIframe:function(e){var data=e.data;switch(data.task){case"setHeight":document.getElementById("mediaFrame").height=data.height+"px";break;case"submit":this.$emit("submit",data.values);break;case"results":document.getElementById("mediaFrame").contentWindow.postMessage(data,"*")}}}},r=(n(1256),n(23)),component=Object(r.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"template-wrapper"},[e.loading?n("div",{staticClass:"loading-text subtitle"},[e._v("\n    Loading\n  ")]):e._e(),e._v(" "),n("iframe",{ref:"mediaFrame",attrs:{id:"mediaFrame",src:e.alternativeFrontendUrl+"/template",name:"mediaFrame",sandbox:"allow-scripts allow-modals allow-downloads allow-forms allow-popups allow-pointer-lock allow-same-origin",allow:"geolocation; microphone; camera; autoplay; fullscreen",allowFullScreen:""},on:{load:e.mediaFrameLoaded}})])}),[],!1,null,"502fba47",null);t.a=component.exports},1490:function(e,t,n){"use strict";n.r(t);n(51),n(79),n(25),n(107),n(59),n(108);var l=n(3),r=n(38),o=(n(88),n(33),n(183)),c=n(93);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var v={components:{TemplateMedia:n(1259).a},middleware:["auth"],data:function(){return{loading:!1,example_task:null,template:null,selectedTemplate:null,previewTemplate:null,templates:null}},computed:m({},Object(o.b)({savedTemplates:"template/getTemplates"})),watch:{selectedTemplate:function(template){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n,l,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=m({},template),e.loading=!0,t.prev=2,t.next=5,e.$axios.get(n.url);case 5:if(l=t.sent,"string"!=typeof n.placeholders){t.next=18;break}return t.prev=7,t.next=10,e.$axios.get(n.placeholders);case 10:r=t.sent,n.placeholders=r.data,t.next=18;break;case 14:t.prev=14,t.t0=t.catch(7),n.placeholders={},console.error("could not retrieve example task",t.t0);case 18:e.previewTemplate=e.renderTemplate(l.data,n.placeholders),t.next=24;break;case 21:t.prev=21,t.t1=t.catch(2),console.error(t.t1);case 24:e.loading=!1;case 25:case"end":return t.stop()}}),t,null,[[2,21],[7,14]])})))()}},created:function(){this.retrieveTemplates()},methods:{retrieveTemplates:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loading=!0,t.prev=1,e.savedTemplates&&0!==Object.keys(e.savedTemplates).length){t.next=5;break}return t.next=5,e.$store.dispatch("template/getTemplates");case 5:e.templates=m({},e.savedTemplates),e.selectedTemplate=e.templates[Object.keys(e.templates)[0]],t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0);case 12:e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},renderTemplate:function(template){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new c.Template(template,e,t).render()}}},f=v,h=n(23),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section"},[n("div",{staticClass:"container"},[n("h1",{staticClass:"title mt-5"},[e._v("\n      Default Templates\n    ")]),e._v(" "),n("h2",{staticClass:"subtitle"},[e._v("\n      Select a customizable template to start a new campaign\n    ")]),e._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-3"},[n("div",{staticClass:"panel"},[n("p",{staticClass:"panel-heading"},[e._v("\n            Templates\n          ")]),e._v(" "),e.loading?n("div",{staticClass:"subtitle loading-text"},[e._v("\n            Loading\n          ")]):e.templates?0===Object.keys(e.templates).length?n("div",[e._v("\n            No default templates found\n          ")]):e._e():n("div",[e._v("\n            Could not retrieve default templates\n          ")]),e._v(" "),e._l(e.templates,(function(template){return n("a",{key:template.url,staticClass:"panel-block",class:{"is-active":e.selectedTemplate===template},on:{click:function(t){e.selectedTemplate=template}}},[n("span",{staticClass:"panel-icon"},[e._v("\n              â€º\n            ")]),e._v("\n            "+e._s(template.name)+"\n          ")])}))],2)]),e._v(" "),n("div",{staticClass:"column is-9"},[n("h2",{staticClass:"panel-heading"},[e._v("\n          Preview\n        ")]),e._v(" "),n("template-media",{attrs:{html:e.previewTemplate}})],1)])]),e._v(" "),n("div",{staticClass:"field is-grouped is-grouped-right"},[n("div",{staticClass:"control"},[n("nuxt-link",{staticClass:"button is-light",attrs:{to:"/campaigns/new"}},[e._v("\n        Blank Template\n      ")])],1),e._v(" "),n("div",{staticClass:"control"},[e.selectedTemplate?n("nuxt-link",{staticClass:"button is-primary is-wide",attrs:{disabled:e.loading,to:"/campaigns/new?templateUrl="+e.selectedTemplate.url+"&placeholders="+JSON.stringify(e.selectedTemplate.placeholders)}},[e._v("\n        Use Template\n      ")]):e._e()],1)])])}),[],!1,null,"a1e93568",null);t.default=component.exports}}]);