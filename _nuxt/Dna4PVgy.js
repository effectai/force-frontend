import{g as F,u as N,i as B,M as X,r as V,X as q,Y as A,o as t,c as o,a as e,t as a,k as s,S as D,T as G,l as M,Z as R,d as U}from"./Bk7_z8zR.js";import{a as W}from"./VZpoIE_P.js";const Y={class:"container"},Z=e("div",{class:"text-2xl title my-5"}," Profile ",-1),$={class:"profile-stats"},j=e("label",null,"Name",-1),w={class:"text-lg"},z=e("label",null,"Permission",-1),H={class:"text-lg"},J=e("label",null,"EFX",-1),K={class:"text-lg"},O={class:"payout-container"},Q=e("label",null,"Pending EFX",-1),ee={key:0},se={key:1,class:"text-lg"},te={key:0,class:"claimable"},oe={key:1,class:"pending"},ae={class:"profile-toolbar"},ne=["disabled"],de=F({__name:"profile",setup(le){const{usePendingPayments:_,disconnectWallet:g,permission:v,isLoggedIn:p,userName:d,usePayoutEfx:b,useGetBalance:f,useForceSettings:h}=N(),y=B(),{data:k}=f(d),{data:C,isLoading:P}=h(),{data:i,isLoading:x}=_(),T=X(()=>x.value||P.value),r=V([]),S=c=>c.map(l=>({...l,claimableIn:R(l,C.value)})),E=q(()=>{i.value&&(r.value=S(i.value.pendingPayments))},1e3),{mutateAsync:I}=b();A(()=>{clearInterval(E)});const L=()=>{g(),localStorage.removeItem("access_token"),y.push("/")};return(c,l)=>{var u,m;return t(),o("div",Y,[Z,e("div",$,[e("div",null,[j,e("div",w,a(s(d)),1)]),e("div",null,[z,e("div",H,a(s(v)),1)]),e("div",null,[J,e("div",K,a(s(k)??0),1)])]),e("div",O,[Q,s(T)?(t(),o("div",ee," Loading.. ")):(t(),o("div",se,[(t(!0),o(D,null,G(s(r),n=>(t(),o("div",{key:n.id},[U(a(n.batch_id)+" - "+a(n.pending.quantity)+" ",1),n.claimableIn<0?(t(),o("span",te,"Claimable")):(t(),o("span",oe," Claimable in "+a(("formatSecondsToTime"in c?c.formatSecondsToTime:s(W))(n.claimableIn))+" seconds ",1))]))),128))]))]),e("div",ae,[e("button",{class:"button",disabled:((u=s(i))==null?void 0:u.totalEfxClaimable)===0,onClick:l[0]||(l[0]=n=>s(I)())}," Claim "+a((m=s(i))==null?void 0:m.totalEfxClaimable)+" EFX ",9,ne),s(p)?(t(),o("button",{key:0,class:"button",onClick:L}," Logout ")):M("",!0)])])}}});export{de as default};
