import{g as F,u as N,i as B,L as X,r as V,W,X as q,o as t,c as a,a as e,t as o,k as s,Q as A,S as D,l as G,Y as Q,d as R}from"./BQJH5Vms.js";import{a as U}from"./VZpoIE_P.js";const Y={class:"container"},$=e("div",{class:"text-2xl title my-5"}," Profile ",-1),j={class:"profile-stats"},w=e("label",null,"Name",-1),z={class:"text-lg"},H=e("label",null,"Permission",-1),J={class:"text-lg"},K=e("label",null,"EFX",-1),M={class:"text-lg"},O={class:"payout-container"},Z=e("label",null,"Pending EFX",-1),ee={key:0},se={key:1,class:"text-lg"},te={key:0,class:"claimable"},ae={key:1,class:"pending"},oe={class:"profile-toolbar"},ne=["disabled"],de=F({__name:"profile",setup(ie){const{usePendingPayments:_,disconnectWallet:g,permission:v,isLoggedIn:p,userName:d,usePayoutEfx:b,useGetBalance:f,useForceSettings:h}=N(),y=B(),{data:k}=f(d),{data:C,isLoading:P}=h(),{data:l,isLoading:x}=_(),L=X(()=>x.value||P.value),r=V([]),T=c=>c.map(i=>({...i,claimableIn:Q(i,C.value)})),E=W(()=>{l.value&&(r.value=T(l.value.pendingPayments))},1e3),{mutateAsync:S}=b();q(()=>{clearInterval(E)});const I=()=>{g(),y.push("/")};return(c,i)=>{var u,m;return t(),a("div",Y,[$,e("div",j,[e("div",null,[w,e("div",z,o(s(d)),1)]),e("div",null,[H,e("div",J,o(s(v)),1)]),e("div",null,[K,e("div",M,o(s(k)??0),1)])]),e("div",O,[Z,s(L)?(t(),a("div",ee," Loading.. ")):(t(),a("div",se,[(t(!0),a(A,null,D(s(r),n=>(t(),a("div",{key:n.id},[R(o(n.batch_id)+" - "+o(n.pending.quantity)+" ",1),n.claimableIn<0?(t(),a("span",te,"Claimable")):(t(),a("span",ae," Claimable in "+o(("formatSecondsToTime"in c?c.formatSecondsToTime:s(U))(n.claimableIn))+" seconds ",1))]))),128))]))]),e("div",oe,[e("button",{class:"button",disabled:((u=s(l))==null?void 0:u.totalEfxClaimable)===0,onClick:i[0]||(i[0]=n=>s(S)())}," Claim "+o((m=s(l))==null?void 0:m.totalEfxClaimable)+" EFX ",9,ne),s(p)?(t(),a("button",{key:0,class:"button",onClick:I}," Logout ")):G("",!0)])])}}});export{de as default};
