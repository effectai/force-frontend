(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1238:function(t,n,e){"use strict";var c=e(1248),o=e.n(c),r={name:"InstructionsModal",props:{campaign:{type:Object,required:!0,default:function(){return{}}},info:{type:Object,required:!0,default:function(){return{}}},show:{type:Boolean,required:!1,default:!1},functional:{type:Boolean,required:!1,default:!0}},data:function(){return{tac:!1}},computed:{showModal:{get:function(){return this.show},set:function(t){this.$emit("clicked",t)}}},methods:{onCancel:function(){this.functional&&(this.showModal=!1)},onClick:function(){this.functional&&this.$parent.joinCampaign()},sanitizeHtmlCustom:function(t){return o()(t,{allowedTags:["h1","h2","h3","h4","h5","h6","blockquote","p","a","ul","ol","nl","li","b","i","strong","em","strike","code","hr","br","div","table","thead","caption","tbody","tr","th","td","pre","iframe","img","span","label"],allowedAttributes:{a:["href","name","target","class"],img:["src","alt"],iframe:["src"],"*":["style"]}})}}},l=e(30),component=Object(l.a)(r,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.campaign&&t.info?e("div",{staticClass:"modal",class:{"is-active":t.showModal},style:{position:t.functional?"fixed":"relative",padding:t.functional?"initial":"10px"}},[e("div",{staticClass:"modal-background"}),t._v(" "),e("div",{staticClass:"modal-card"},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v("\n        "+t._s(t.info.title)+"\n      ")]),t._v(" "),e("button",{staticClass:"delete",attrs:{"aria-label":"close",disabled:!t.functional},on:{click:function(n){return n.preventDefault(),t.onCancel()}}})]),t._v(" "),e("section",{staticClass:"modal-card-body"},[t.campaign&&t.info?e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.sanitizeHtmlCustom(t.$md.render(t.info.instructions)))}}):e("p",[t._v("\n        ...\n      ")]),t._v(" "),e("label",{staticClass:"checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tac,expression:"tac"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.tac)?t._i(t.tac,null)>-1:t.tac},on:{change:function(n){var e=t.tac,c=n.target,o=!!c.checked;if(Array.isArray(e)){var r=t._i(e,null);c.checked?r<0&&(t.tac=e.concat([null])):r>-1&&(t.tac=e.slice(0,r).concat(e.slice(r+1)))}else t.tac=o}}}),t._v("\n        I agree to the "),e("a",{attrs:{href:"#"}},[t._v("terms and conditions")])])]),t._v(" "),e("footer",{staticClass:"modal-card-foot"},[e("button",{staticClass:"button is-primary",attrs:{disabled:!(t.tac&&t.campaign&&t.info&&t.functional)},on:{click:function(n){return n.preventDefault(),t.onClick()}}},[t._v("\n        Join Campaign\n      ")]),t._v(" "),e("button",{staticClass:"button",attrs:{disabled:!t.functional},on:{click:function(n){return n.preventDefault(),t.onCancel()}}},[t._v("\n        Cancel\n      ")])])])]):t._e()}),[],!1,null,"2c60a330",null);n.a=component.exports},1240:function(t,n){},1241:function(t,n){},1244:function(t,n){},1245:function(t,n){},1252:function(t,n){},1296:function(t,n,e){var content=e(1351);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(100).default)("56b09d02",content,!0,{sourceMap:!1})},1350:function(t,n,e){"use strict";e(1296)},1351:function(t,n,e){var c=e(99)(!1);c.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap);"]),c.push([t.i,".box-title[data-v-62622ea0]{text-align:center;border-bottom:2px solid #cdd4e6;padding-bottom:31px;margin:10px 0 15px}.progress[data-v-62622ea0]::-webkit-progress-value{-webkit-transition:width .5s ease;transition:width .5s ease}",""]),t.exports=c},1391:function(t,n,e){"use strict";e.r(n);e(101),e(55),e(70),e(114),e(71),e(115);var c=e(4),o=e(43),r=(e(37),e(153),e(214),e(24),e(184));function l(object,t){var n=Object.keys(object);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(object);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),n.push.apply(n,e)}return n}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(n){Object(o.a)(t,n,source[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(source,n))}))}return t}var m={components:{InstructionsModal:e(1238).a},middleware:["auth"],data:function(){return{id:parseInt(this.$route.params.id),campaign:void 0,randomNumber:void 0,ipfsExplorer:"https://ipfs.effect.ai",accountId:this.$auth.user.vAccountRows[0].id,body:"description",userJoined:null,loading:!1,joinCampaignPopup:!1}},computed:d(d(d({},Object(r.b)({batchByCampaignId:"campaign/batchByCampaignId"})),Object(r.c)({batches:function(t){return t.campaign.batches},campaigns:function(t){return t.campaign.campaigns},campaignLoading:function(t){return t.campaign.loading},batchesLoading:function(t){return t.campaign.batches.loading}})),{},{campaignBatches:function(){return this.batchByCampaignId(this.id)}}),mounted:function(){var t=this;setTimeout((function(){t.randomNumber=t.generateRandomNumber(300)}),3e3)},created:function(){this.checkUserCampaign(),this.getCampaign(),this.getBatches()},methods:{campaignModalChange:function(t){this.joinCampaignPopup=t},joinCampaign:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$blockchain.joinCampaign(t.id);case 3:data=n.sent,t.$store.dispatch("transaction/addTransaction",data),data&&(t.loading=!0,setTimeout(t.checkUserCampaign,1500)),t.joinCampaignPopup=!1,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),t.$blockchain.handleError(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))()},getBatches:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("campaign/getBatches");case 2:case"end":return n.stop()}}),n)})))()},checkUserCampaign:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,n.next=4,t.$blockchain.getCampaignJoins(t.id);case 4:data=n.sent,t.userJoined=data.rows.length>0,n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),t.$blockchain.handleError(n.t0);case 11:t.loading=!1;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},submitTask:function(t){console.log("Task submitted!",t)},getCampaign:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("campaign/getCampaign",t.id);case 2:t.campaign=t.campaigns.find((function(n){return n.id===t.id}));case 3:case"end":return n.stop()}}),n)})))()},generateRandomNumber:function(t){return Math.ceil(Math.random()*t)}}},v=(e(1350),e(30)),component=Object(v.a)(m,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("section",{staticClass:"section is-max-widescreen"},[t.campaign&&t.campaign.info?e("instructions-modal",{attrs:{show:t.joinCampaignPopup,campaign:t.campaign,info:t.campaign.info},on:{clicked:t.campaignModalChange}}):t._e(),t._v(" "),e("div",{staticClass:"container"},[e("nav",{staticClass:"breadcrumb",attrs:{"aria-label":"breadcrumbs"}},[e("ul",[e("li",[e("nuxt-link",{attrs:{to:"/campaigns"}},[t._v("\n            All Campaigns\n          ")])],1),t._v(" "),e("li",{staticClass:"is-active"},[e("nuxt-link",{attrs:{to:"/campaigns/"+t.id,"aria-current":"page"}},[t._v("\n            Campaign "+t._s(t.id)+"\n          ")])],1)])]),t._v(" "),t.campaignLoading?e("div",[t._v("\n      Campaign loading..\n    ")]):t.campaign?e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-two-thirds"},[e("div",{staticClass:"title"},[e("span",[t._v("#"+t._s(t.id)+": ")]),t._v(" "),t.campaign.info?e("span",[t._v(t._s(t.campaign.info.title))]):null!==t.campaign.info?e("span",[t._v("Loading..")]):e("span",{staticClass:"has-text-danger-dark"},[t._v("Could not load campaign info")])]),t._v(" "),e("div",{staticClass:"tabs"},[e("ul",[e("li",{class:{"is-active":"description"===t.body}},[e("a",{on:{click:function(n){n.preventDefault(),t.body="description"}}},[t._v("Batches")])]),t._v(" "),e("li",{class:{"is-active":"instruction"===t.body}},[e("a",{on:{click:function(n){n.preventDefault(),t.body="instruction"}}},[t._v("Instructions")])])])]),t._v(" "),"description"===t.body?e("div",{staticClass:"block"},[t.campaign.info?e("p",[t._v("\n            "+t._s(t.campaign.info.description)+"\n          ")]):e("p",[t._v("\n            ...\n          ")]),t._v(" "),e("div",{staticClass:"mt-5"},[e("nuxt-link",{staticClass:"button is-primary is-pulled-right",attrs:{to:"/campaigns/"+t.id+"/new"}},[e("span",{staticClass:"icon"},[t._v("\n                +\n              ")]),t._v(" "),e("span",[t._v("Create Batch")])]),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"block mt-5"},[null===t.campaignBatches?e("div",[t._v("\n                Loading..\n              ")]):t.campaignBatches.length?t._e():e("div",[t._v("\n                No Batches\n              ")]),t._v(" "),t._l(t.campaignBatches,(function(n){return e("nuxt-link",{key:n.id,staticClass:"box p-4",class:{"is-disabled":!1},attrs:{to:"/campaigns/"+n.campaign_id+"/"+n.batch_id}},[e("div",{staticClass:"columns is-vcentered is-multiline is-mobile"},[e("div",{staticClass:"column"},[e("p",{staticClass:"has-text-grey is-size-7"},[t._v("\n                      Batch\n                    ")]),t._v(" "),e("h2",{staticClass:"subtitle is-6 has-text-weight-semibold mb-0"},[t._v("\n                      #"),t.campaign?e("span",[t._v(t._s(t.campaign.id)+".")]):t._e(),t._v(t._s(n.id)+"\n                    ")])]),t._v(" "),e("div",{staticClass:"column"},[n.num_tasks-n.tasks_done==0?e("p",{staticClass:"has-text-grey is-size-7"},[t._v("\n                      Tasks "),e("small",[t._v("("),e("b",{staticClass:"has-text-success"},[t._v("Done")]),t._v(")")])]):e("p",{staticClass:"has-text-grey is-size-7"},[t._v("\n                      Tasks "),e("small",[t._v("("),e("b",[t._v(t._s(n.num_tasks-n.tasks_done)+" / "+t._s(n.num_tasks))]),t._v(" left)")])]),t._v(" "),e("progress",{staticClass:"progress is-small mt-2",class:{"is-success":!!n&&n.tasks_done===n.num_tasks},attrs:{max:n.num_tasks},domProps:{value:n.tasks_done}})]),t._v(" "),e("div",{staticClass:"column has-text-right is-12-mobile"},[e("button",{staticClass:"button is-wide is-secondary has-text-weight-semibold is-fullwidth-mobile",class:{"is-loading":!t.campaign||void 0===t.campaign.info,"is-accent":t.campaign&&null===t.campaign.info,"is-outlined":t.campaign&&null===t.campaign.info}},[e("span",{},[t._v(t._s(t.campaign&&null===t.campaign.info?"Qualify":"View"))])])])])])})),t._v(" "),t.batchesLoading?e("div",[t._v("\n                Batches loading..\n              ")]):t.batches&&!t.batches.length?e("div",[t._v("\n                No batches\n              ")]):t.batches?t._e():e("div",[t._v("\n                Could not retrieve batches\n              ")])],2)],1)]):t._e(),t._v(" "),"instruction"===t.body?e("div",{staticClass:"block"},[t.campaign&&t.campaign.info?e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.$md.render(t.campaign.info.instructions))}}):e("p",[t._v("\n            ...\n          ")])]):t._e()]),t._v(" "),e("div",{staticClass:"column is-one-third"},[e("div",{staticClass:"box"},[t._m(1),t._v(" "),e("div",{staticClass:"block"},[e("b",[t._v("Requester")]),t._v(" "),e("br"),t._v(" "),e("div",{staticClass:"blockchain-address"},[e("nuxt-link",{attrs:{to:"/profile/"+t.campaign.owner[1]}},[t._v("\n                "+t._s(t.campaign.owner[1])+"\n              ")])],1)]),t._v(" "),e("div",{staticClass:"block"},[e("b",[t._v("Reward")]),t._v(" "),e("br"),t._v(" "),e("span",[t._v(t._s(t.campaign.reward.quantity))])]),t._v(" "),e("div",{staticClass:"block"},[e("b",[t._v("Batches")]),t._v(" "),e("br"),t._v(" "),null===t.campaignBatches?e("span",[t._v("Loading..")]):e("span",[t._v(t._s(t.campaignBatches.length))])]),t._v(" "),t.campaign.info?e("div",{staticClass:"block"},[e("b",[t._v("Category")]),t._v(" "),e("br"),t._v(" "),t.campaign.info&&t.campaign.info.category?e("span",{staticClass:"tag is-light is-medium",class:{"is-secondary":"translation"===t.campaign.info.category,"is-info":"image_classification"===t.campaign.info.category,"is-warning":"text_classification"===t.campaign.info.category,"is-danger":"video_classification"===t.campaign.info.category}},[t._v(t._s(t.campaign.info.category))]):e("span",{staticClass:"tag is-info is-light is-medium"},[t._v("...")])]):t._e(),t._v(" "),e("div",{staticClass:"block"},[e("b",[t._v("IPFS")]),t._v(" "),e("br"),t._v(" "),e("div",{staticClass:"blockchain-address"},[e("a",{attrs:{target:"_blank",href:t.ipfsExplorer+"/ipfs/"+t.campaign.content.field_1}},[t._v(t._s(t.campaign.content.field_1))])])]),t._v(" "),e("div",{staticClass:"block"},[e("b",[t._v("Blockchain")]),t._v(" "),e("br"),t._v(" "),e("a",{attrs:{target:"_blank",href:t.$blockchain.eos.explorer+"/account/"+t.$blockchain.sdk.force.config.FORCE_CONTRACT+"?loadContract=true&tab=Tables&table=campaign&account="+t.$blockchain.sdk.force.config.FORCE_CONTRACT+"&scope="+t.$blockchain.sdk.force.config.FORCE_CONTRACT+"&limit=1&lower_bound="+t.id+"&upper_bound="+t.id}},[t._v("View Campaign on Explorer")])]),t._v(" "),e("div",{staticClass:"block"},[t.$auth.user.accountName===t.campaign.owner[1]?e("nuxt-link",{staticClass:"button is-primary is-light",attrs:{to:"/campaigns/"+t.id+"/edit"}},[t._v("\n              Edit Campaign\n            ")]):t._e(),t._v(" "),e("button",{staticClass:"button is-primary",class:{"is-loading":!0===t.loading},attrs:{disabled:t.userJoined},on:{click:function(n){n.preventDefault(),t.joinCampaignPopup=!0}}},[t._v("\n              Join"),t.userJoined?e("span",[t._v("ed")]):t._e(),t._v("Â Campaign\n            ")])],1)])])]):e("div",[t._v("\n      Could not retrieve campaign\n    ")])])],1)}),[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("h4",{staticClass:"is-size-4"},[e("b",[t._v("Batches")])])},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("h4",{staticClass:"box-title is-size-4"},[e("b",[t._v("Information")])])}],!1,null,"62622ea0",null);n.default=component.exports}}]);