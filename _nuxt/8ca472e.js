(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{1314:function(t,n,e){"use strict";e.r(n);var o=e(2),r=(e(27),e(564),e(69),{middleware:["auth"],data:function(){return{loading:!1,account:"eos"===this.$auth.user.blockchain?this.$auth.user.accountName:null,submitted:!1,message:null,err:!1,tokenAmount:null,transactionUrl:null}},computed:{amount:function(){return null!==this.$blockchain.vefxAvailable?this.$blockchain.vefxAvailable.toFixed(2):-1}},methods:{vtransfer:function(t,n){var e=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,c;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return e.loading=!0,e.err=!1,e.message=null,o.prev=3,o.next=6,e.$blockchain.getVAccountByName(t);case 6:if((r=o.sent)[0]){o.next=13;break}e.message="Can't find vAccount",e.err=!0,e.loading=!1,o.next=24;break;case 13:return o.next=15,e.$blockchain.vTransfer(r[0].id,parseFloat(n).toFixed(4));case 15:if(!(c=o.sent)){o.next=24;break}return e.err=!1,e.transactionUrl="".concat(e.$blockchain.sdk.config.eosExplorerUrl,"/transaction/").concat(c.transaction_id),e.message="Transfer has been successful. Check your transaction here: ",o.next=22,e.$blockchain.waitForTransaction(c);case 22:e.$blockchain.updateUserInfo(),e.submitted=!0;case 24:o.next=29;break;case 26:o.prev=26,o.t0=o.catch(3),e.$blockchain.handleError(o.t0);case 29:e.loading=!1;case 30:case"end":return o.stop()}}),o,null,[[3,26]])})))()},clearFields:function(){this.tokenAmount=null,this.account=null}}}),c=e(22),component=Object(c.a)(r,(function(){var t=this,n=t._self._c;return n("section",{staticClass:"section"},[n("div",{staticClass:"container is-max-widescreen"},[n("h1",{staticClass:"title mt-5"},[t._v("\n      Transfer tokens\n    ")]),t._v(" "),n("p",[t._v("Transfer your vEFX tokens from your vAccount account to another vAccount using the form below.")]),t._v(" "),n("br"),t._v(" "),t.submitted?n("div",{staticClass:"notification is-light",class:{"is-danger":!0===t.err,"is-success":!1===t.err}},[t._v("\n      "+t._s(t.message)+"\n      "),n("a",{attrs:{target:"_blank",href:t.transactionUrl}},[t._v(t._s(t.transactionUrl))])]):t._e(),t._v(" "),t.err?n("div",{staticClass:"notification is-light is-danger"},[t._v("\n      "+t._s(t.message)+"\n    ")]):t._e(),t._v(" "),n("form",{staticClass:"box has-limited-width is-horizontal-centered",attrs:{"accept-charset":"UTF-8"},on:{submit:function(n){return n.preventDefault(),t.vtransfer(t.account,t.tokenAmount)}}},[n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Destination VAccount Name")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"input",attrs:{type:"text",required:""},domProps:{value:t.account},on:{input:function(n){n.target.composing||(t.account=n.target.value)}}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("vAccount Contract Balance")]),t._v(" "),n("div",{staticClass:"field has-addons"},[n("div",{staticClass:"control is-expanded"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.tokenAmount,expression:"tokenAmount"}],staticClass:"input",staticStyle:{height:"100%"},attrs:{required:"",type:"number",min:"0",max:t.amount,disabled:-1==t.amount,placeholder:"1.0000",step:"0.0001"},domProps:{value:t.tokenAmount},on:{input:function(n){n.target.composing||(t.tokenAmount=n.target.value)}}})]),t._v(" "),n("p",{staticClass:"control"},[n("span",{staticClass:"button is-primary",attrs:{disabled:-1==t.amount},on:{click:function(n){n.preventDefault(),t.tokenAmount=t.amount}}},[t._v(t._s(t.amount)+" EFX")])])])]),t._v(" "),n("div",{staticClass:"field is-grouped is-grouped-right"},[n("div",{staticClass:"control"},[n("button",{staticClass:"button is-link is-light",on:{click:function(n){return n.preventDefault(),t.clearFields()}}},[t._v("\n            Clear fields\n          ")])]),t._v(" "),n("div",{staticClass:"control"},[n("button",{staticClass:"button is-link",class:{"is-loading":t.loading},attrs:{disabled:!t.tokenAmount||!t.account,type:"submit"}},[t._v("\n            Transfer\n          ")])])])]),t._v(" "),n("i",[t._v("Note: you can only send your virtual EFX through this form.")])])])}),[],!1,null,"1d6c1c69",null);n.default=component.exports}}]);