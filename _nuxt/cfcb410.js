(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1241:function(t,e,n){t.exports=n.p+"img/effect-force-icon.828a6c5.png"},1242:function(t,e,n){var content=n(1245);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(59).default)("2ac9a1b4",content,!0,{sourceMap:!1})},1244:function(t,e,n){"use strict";n(1242)},1245:function(t,e,n){var r=n(58)(!1);r.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap);"]),r.push([t.i,".template-wrapper[data-v-502fba47]{width:100%}#mediaFrame[data-v-502fba47]{width:100%;border:none}",""]),t.exports=r},1247:function(t,e,n){"use strict";n(21),n(61);var r={props:{html:{type:String,default:null}},data:function(){return{alternativeFrontendUrl:"https://effectai.github.io/force-frontend-new",loading:!0}},watch:{html:function(t){document.getElementById("mediaFrame").contentWindow.postMessage({task:"template",value:t},"*")}},mounted:function(){document.addEventListener("keydown",this.sendKeyEvents)},created:function(){window.addEventListener("message",this.communicateWithIframe)},beforeDestroy:function(){window.removeEventListener("message",this.communicateWithIframe),document.removeEventListener("keydown",this.sendKeyEvents)},methods:{mediaFrameLoaded:function(){this.loading=!1,document.getElementById("mediaFrame").contentWindow.postMessage({task:"template",value:this.html},"*"),this.$emit("templateLoaded")},sendKeyEvents:function(t){var e=document.getElementById("mediaFrame");e&&e.contentWindow.postMessage({task:"key",key:t.key},"*")},communicateWithIframe:function(t){var data=t.data;switch(data.task){case"setHeight":document.getElementById("mediaFrame").height=data.height+"px";break;case"submit":this.$emit("submit",data.values);break;case"results":document.getElementById("mediaFrame").contentWindow.postMessage(data,"*")}}}},o=(n(1244),n(23)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"template-wrapper"},[t.loading?n("div",{staticClass:"loading-text subtitle"},[t._v("\n    Loading\n  ")]):t._e(),t._v(" "),n("iframe",{ref:"mediaFrame",attrs:{id:"mediaFrame",src:t.alternativeFrontendUrl+"/template",name:"mediaFrame",sandbox:"allow-scripts allow-modals allow-downloads allow-forms allow-popups allow-pointer-lock allow-same-origin",allow:"geolocation; microphone; camera; autoplay; fullscreen",allowFullScreen:""},on:{load:t.mediaFrameLoaded}})])}),[],!1,null,"502fba47",null);e.a=component.exports},1248:function(t,e,n){"use strict";var r=n(17),o=n(6),c=n(12),l=n(97),d=n(597),f=n(596),v=n(14),m=o.RangeError,h=o.String,_=Math.floor,y=c(f),k=c("".slice),C=c(1..toFixed),w=function(t,e,n){return 0===e?n:e%2==1?w(t,e-1,n*t):w(t*t,e/2,n)},x=function(data,t,e){for(var n=-1,r=e;++n<6;)r+=t*data[n],data[n]=r%1e7,r=_(r/1e7)},Q=function(data,t){for(var e=6,n=0;--e>=0;)n+=data[e],data[e]=_(n/t),n=n%t*1e7},B=function(data){for(var t=6,s="";--t>=0;)if(""!==s||0===t||0!==data[t]){var e=h(data[t]);s=""===s?e:s+y("0",7-e.length)+e}return s};r({target:"Number",proto:!0,forced:v((function(){return"0.000"!==C(8e-5,3)||"1"!==C(.9,0)||"1.25"!==C(1.255,2)||"1000000000000000128"!==C(0xde0b6b3a7640080,0)}))||!v((function(){C({})}))},{toFixed:function(t){var e,n,r,o,c=d(this),f=l(t),data=[0,0,0,0,0,0],v="",_="0";if(f<0||f>20)throw m("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return h(c);if(c<0&&(v="-",c=-c),c>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(c*w(2,69,1))-69)<0?c*w(2,-e,1):c/w(2,e,1),n*=4503599627370496,(e=52-e)>0){for(x(data,0,n),r=f;r>=7;)x(data,1e7,0),r-=7;for(x(data,w(10,r,1),0),r=e-1;r>=23;)Q(data,1<<23),r-=23;Q(data,1<<r),x(data,1,1),Q(data,2),_=B(data)}else x(data,0,n),x(data,1<<-e,0),_=B(data)+y("0",f);return _=f>0?v+((o=_.length)<=f?"0."+y("0",f-o)+_:k(_,0,o-f)+"."+k(_,o-f)):v+_}})},1249:function(t,e,n){var map={"./effect-captions-icon.png":1250,"./effect-dao-icon.png":1251,"./effect-force-icon.png":1241,"./effect-socials-icon.png":1252,"./effect-translate-icon.png":1253};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=o,t.exports=r,r.id=1249},1250:function(t,e,n){t.exports=n.p+"img/effect-captions-icon.d32e1fd.png"},1251:function(t,e,n){t.exports=n.p+"img/effect-dao-icon.8a49264.png"},1252:function(t,e,n){t.exports=n.p+"img/effect-socials-icon.113948d.png"},1253:function(t,e,n){t.exports=n.p+"img/effect-translate-icon.a76baca.png"},1257:function(t,e,n){"use strict";n(73),n(44),n(82),n(47),n(83),n(84),n(86),n(63),n(45),n(85),n(87),n(61);var r=n(29),o=(n(60),n(21),n(62),n(135)),c=n(1271),l=n.n(c);function d(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={name:"InstructionsModal",props:{info:{type:Object,required:!0,default:function(){return{}}},show:{type:Boolean,required:!1,default:!1},functional:{type:Boolean,required:!1,default:!0},readonly:{type:Boolean,required:!1,default:!1},inclusiveQualifications:{type:Array,required:!1,default:function(){return[]}},exclusiveQualifications:{type:Array,required:!1,default:function(){return[]}}},data:function(){return{tac:!1,id:parseInt(this.$route.params.id),campaign:null,userQuali:[],accountId:this.$auth.user.vAccountRows[0].id}},computed:m(m(m({},Object(o.b)({campaignById:"campaign/campaignById",qualificationById:"qualification/qualificationById"})),Object(o.c)({allQualificationsLoaded:function(t){return t.qualification.allQualificationsLoaded}})),{},{exclQualis:function(){return this.exclusiveQualifications.filter((function(q){return!q.ishidden}))},showModal:{get:function(){return this.show},set:function(t){this.$emit("clicked",t)}}}),created:function(){this.campaign=this.campaignById(this.id)},methods:{userAssignedQuali:function(t){var e=this,n=[];if(0===this.assignedQuali.length)return[];console.log("inclsive: ".concat(JSON.stringify(this.assignedQuali)));var r,o=d(this.campaign.qualis);try{var c=function(){var o=r.value,c=e.qualificationById(o.key),l=e.assignedQuali.some((function(t){return console.log("checking in some",t,o.key),t.quali_id===o.key}));console.log("UserHasQualiInclusive: ".concat(o)),o.value===t&&n.push({name:c.info.name,code:o.key,userHasQuali:l})};for(o.s();!(r=o.n()).done;)c()}catch(t){o.e(t)}finally{o.f()}return n},onCancel:function(){this.functional&&(this.showModal=!1)},onClick:function(){this.functional&&this.$parent.reserveTask()},sanitizeHtmlCustom:function(t){return l()(t,{allowedTags:["h1","h2","h3","h4","h5","h6","blockquote","p","a","ul","ol","nl","li","b","i","strong","em","strike","code","hr","br","div","table","thead","caption","tbody","tr","th","td","pre","iframe","img","span","label"],allowedAttributes:{a:["href","name","target","class"],img:["src","alt"],iframe:["src"],"*":["style"]}})}}},_=n(23),component=Object(_.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.info?n("div",{staticClass:"modal",class:{"is-active":t.showModal},style:{position:t.functional?"fixed":"relative",padding:t.functional?"initial":"10px",zIndex:t.functional?"40":"1"}},[n("div",{staticClass:"modal-background"}),t._v(" "),n("div",{staticClass:"modal-card"},[n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[t._v("\n        "+t._s(t.info.title)+"\n      ")]),t._v(" "),n("button",{staticClass:"delete",attrs:{"aria-label":"close",disabled:!t.functional},on:{click:function(e){return e.preventDefault(),t.onCancel()}}})]),t._v(" "),n("section",{staticClass:"modal-card-body"},[t.info?n("div",{staticClass:"content",domProps:{innerHTML:t._s(t.sanitizeHtmlCustom(t.$md.render(t.info.instructions)))}}):n("p",[t._v("\n        ...\n      ")]),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"block is-vcentered"},[n("div",{staticClass:"is-size-4 has-text-centered"},[t._v("\n          Qualifications\n        ")]),t._v(" "),t.allQualificationsLoaded?n("div",[t._m(0),t._v(" "),t.inclusiveQualifications.length>0?n("div",{staticClass:"tags has-addons"},t._l(t.inclusiveQualifications,(function(e){return n("span",{key:e.id,staticClass:"tag",class:e.userHasQuali?"is-light is-success":"is-danger is-light",attrs:{"data-tooltip":e.userHasQuali?"Found: Ok":"Not Found: Required"}},[e.userHasQuali?n("span",[t._v("🗸")]):n("span",[t._v("🗴")]),t._v("\n               \n              "),n("nuxt-link",{attrs:{to:"/qualifications/"+e.id}},[t._v(t._s(e.info.name))])],1)})),0):n("div",[t._v("\n            None\n          ")]),t._v(" "),n("br"),t._v(" "),t._m(1),t._v(" "),t.exclQualis.length>0?n("div",{staticClass:"tags"},t._l(t.exclQualis,(function(e){return n("span",{key:e.code,staticClass:"tag",class:e.userHasQuali?"is-light is-danger":"is-warning is-light",attrs:{"data-tooltip":e.userHasQuali?"Found: Excluded":"Not found: Ok"}},[e.userHasQuali?n("span",[t._v("🗴")]):n("span",[t._v("🗸")]),t._v("\n               \n              "),n("nuxt-link",{attrs:{to:"/qualifications/"+e.id}},[t._v(t._s(e.info.name))])],1)})),0):n("div",[t._v("\n            None\n          ")])]):n("div",{staticClass:"loading-text has-text-centered"},[t._v("Loading")]),t._v(" "),n("br")]),t._v(" "),n("hr"),t._v(" "),n("label",{staticClass:"checkbox"},[t.readonly?n("input",{attrs:{checked:"",type:"checkbox",disabled:""}}):n("input",{directives:[{name:"model",rawName:"v-model",value:t.tac,expression:"tac"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.tac)?t._i(t.tac,null)>-1:t.tac},on:{change:function(e){var n=t.tac,r=e.target,o=!!r.checked;if(Array.isArray(n)){var c=t._i(n,null);r.checked?c<0&&(t.tac=n.concat([null])):c>-1&&(t.tac=n.slice(0,c).concat(n.slice(c+1)))}else t.tac=o}}}),t._v("\n        I agree to the "),n("a",{attrs:{href:"/download/tac.pdf",target:"_blank"}},[t._v("terms and conditions")])])]),t._v(" "),n("footer",{staticClass:"modal-card-foot has-text-centered"},[t.readonly?n("button",{staticClass:"button is-primary",attrs:{disabled:!t.functional},on:{click:function(e){return e.preventDefault(),t.onCancel()}}},[t._v("\n        OK\n      ")]):[n("button",{staticClass:"button is-primary has-tooltip has-tooltip-arrow",attrs:{"data-tooltip":t.tac?"No additional\nqualifications needed":"agree to the terms and\nconditions to qualify",disabled:!t.tac||!t.info||!t.functional},on:{click:function(e){return e.preventDefault(),t.onClick()}}},[t._v("\n          Qualify\n        ")]),t._v(" "),n("button",{staticClass:"button",attrs:{disabled:!t.functional},on:{click:function(e){return e.preventDefault(),t.onCancel()}}},[t._v("\n          Cancel\n        ")])]],2)])]):t._e()}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("Required "),n("i",[t._v("(Having these qualifications is required)")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("Exclude "),n("i",[t._v("(Having these qualifications will exclude you from this task)")])])}],!1,null,"7ec6035f",null);e.a=component.exports},1262:function(t,e){},1263:function(t,e){},1267:function(t,e){},1268:function(t,e){},1274:function(t,e){},1342:function(t,e,n){var content=n(1454);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(59).default)("5e59230e",content,!0,{sourceMap:!1})},1453:function(t,e,n){"use strict";n(1342)},1454:function(t,e,n){var r=n(58)(!1);r.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap);"]),r.push([t.i,".box-title[data-v-c7f202d0]{text-align:center;border-bottom:2px solid #cdd4e6;padding-bottom:31px;margin:10px 0 15px}.progress[data-v-c7f202d0]::-webkit-progress-value{-webkit-transition:width .5s ease;transition:width .5s ease}.tabs li[data-v-c7f202d0]{font-weight:500}.tabs li a[data-v-c7f202d0]{padding-left:35px;padding-right:35px}.tabs li.is-active a[data-v-c7f202d0]{border-bottom-width:2px;border-bottom-color:#1977f3;color:#151a1f;font-weight:600}.information-block[data-v-c7f202d0]{border:1px solid #e8eeff;border-radius:8px}.information-block .block[data-v-c7f202d0]{margin-bottom:10px}.information-block .information-header[data-v-c7f202d0]{background:#f7fbff}",""]),t.exports=r},1506:function(t,e,n){"use strict";n.r(e);n(73),n(44),n(82),n(47),n(83),n(84),n(62),n(86),n(63),n(45),n(85),n(87),n(61);var r=n(56),o=n(225),c=n(3),l=n(29),d=(n(28),n(60),n(21),n(159),n(1248),n(111),n(121),n(135)),f=n(74),v=n(1247),m=n(374),h=n(1257),_={name:"BatchModal",props:{show:{type:Boolean,required:!1,default:!0}},data:function(){return{id:parseInt(this.$route.params.id)}},computed:{showModal:{get:function(){return this.show},set:function(){this.$emit("cancelled")}}},methods:{onCancel:function(){this.showModal=!1}}},y=n(23),k=Object(y.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal",class:{"is-active":t.showModal}},[n("div",{staticClass:"modal-background"}),t._v(" "),n("div",{staticClass:"modal-card"},[n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[t._v("\n        Add first tasks\n      ")]),t._v(" "),n("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(e){return e.preventDefault(),t.onCancel()}}})]),t._v(" "),t._m(0),t._v(" "),n("footer",{staticClass:"modal-card-foot"},[n("div",{staticClass:"buttons is-centered mx-auto"},[n("nuxt-link",{staticClass:"button is-primary",attrs:{to:"/campaigns/"+t.id+"/new"}},[n("span",{staticClass:"icon"},[t._v("\n            +\n          ")]),t._v(" "),n("span",[t._v("Add Tasks")])]),t._v(" "),n("button",{staticClass:"button",on:{click:function(e){return e.preventDefault(),t.onCancel()}}},[t._v("\n          Cancel\n        ")])],1)])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"modal-card-body"},[n("div",{staticClass:"content"},[t._v("\n        It looks like you haven't added any tasks yet... Let's add some!\n      ")])])}],!1,null,null,null).exports;function C(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function x(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Q(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var B={components:{TemplateMedia:v.a,InstructionsModal:h.a,BatchModal:k,SuccessModal:m.a},middleware:["auth"],data:function(){return{completed:parseInt(this.$route.query.completed),ipfsExplorer:this.$blockchain.sdk.config.ipfsNode,id:parseInt(this.$route.params.id),accountId:this.$auth.user.vAccountRows[0].id,body:"description",userJoined:!1,loading:!1,joinCampaignPopup:!1,userReservation:null,cancelledBatchesPopup:!1,loadingReservation:!1,showBatchesPopup:!1,waitingOnTransaction:!1,categories:["translate","captions","socials","dao"],successMessage:null,userQualis:[],canUserQualify:!1,campaignQualis:[],inclusiveQualifications:[],exclusiveQualifications:[]}},computed:Q(Q(Q({},Object(d.b)({batchesByCampaignId:"campaign/batchesByCampaignId",activeBatchesByCampaignId:"campaign/activeBatchesByCampaignId",qualificationById:"qualification/qualificationById"})),{},{exclQualis:function(){return this.exclusiveQualifications.filter((function(q){return!q.ishidden}))}},Object(d.c)({joinedCampaigns:function(t){return t.campaign.joinedCampaigns},campaigns:function(t){return t.campaign.campaigns},batchesLoading:function(t){return t.campaign.loadingBatch&&!t.campaign.allBatchesLoaded},allQualificationsLoaded:function(t){return t.qualification.allQualificationsLoaded},assignedQualifications:function(t){return t.qualification.assignedQualifications}})),{},{campaignBatches:function(){return this.batchesByCampaignId(this.id)},activeCampaignBatches:function(){return this.activeBatchesByCampaignId(this.id)},campaign:function(){var t=this;if(this.campaigns)return this.campaigns.find((function(e){return e.id===t.id}))},estimatedEarnings:function(){if(this.campaign&&this.campaign.info.estimated_time&&this.campaign.info.reward){var t=3600/this.campaign.info.estimated_time*this.campaign.info.reward;return{efxPerHour:t,dollarPerHour:t*this.$blockchain.efxPrice}}return{efxPerHour:0,dollarPerHour:0}}}),watch:{"$route.query.completed":function(t){this.completed=parseInt(t),this.showCompletedPopup()}},mounted:function(){this.showCompletedPopup()},created:function(){this.checkUserCampaign(),this.getCampaign(),this.getBatches(),this.getQualifications()},methods:{showCompletedPopup:function(){this.completed&&(this.successTitle="No more tasks available for you in this campaign",this.successMessage="This could either mean that all the available tasks are already reserved, or you already completed the still available tasks.")},reserveTask:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$store.commit("view/ADD_JOINED_CAMPAIGN",t.campaign.id),t.loadingReservation=!0,n=[],r=C(t.campaignBatches);try{for(r.s();!(o=r.n()).done;)(c=o.value).num_tasks*c.repetitions>c.tasks_done&&n.push(c)}catch(t){r.e(t)}finally{r.f()}return e.prev=5,e.next=8,t.$blockchain.makeReservation(n);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),t.$blockchain.handleError(e.t0);case 13:t.loadingReservation=!1;case 14:case"end":return e.stop()}}),e,null,[[5,10]])})))()},renderTemplate:function(template){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new f.Template(template,t,e).render()},campaignModalChange:function(t){this.joinCampaignPopup=t},cancelBatchModal:function(){this.cancelledBatchesPopup=!0},getBatches:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("campaign/getBatches");case 2:t.campaignBatches.length||(t.userReservation=!1),n=C(t.campaignBatches),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=15;break}return o=r.value,e.next=10,t.$blockchain.getTaskReservationsForBatch(o.batch_id);case 10:c=e.sent,(l=c.find((function(e){return e.account_id===t.$auth.user.vAccountRows[0].id&&parseInt(new Date(new Date(e.submitted_on)+"UTC").getTime()/1e3)+parseInt(t.$blockchain.sdk.force.config.releaseTaskDelaySec.toFixed(0))>parseInt((Date.now()/1e3).toFixed(0))})))&&(t.userReservation=l);case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),n.e(e.t0);case 20:return e.prev=20,n.f(),e.finish(20);case 23:0===t.campaignBatches.length&&(t.showBatchesPopup=!0);case 24:case"end":return e.stop()}}),e,null,[[4,17,20,23]])})))()},checkUserCampaign:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.loading=!0,e.prev=1,t.userJoined=t.$store.state.view.joinedCampaigns.includes(t.id),e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(1),e.next=9,t.$blockchain.handleError(e.t0);case 9:t.loading=!1;case 10:case"end":return e.stop()}}),e,null,[[1,5]])})))()},submitTask:function(t){console.log("Task submitted!",t)},getCampaign:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("campaign/getCampaign",t.id);case 2:case"end":return e.stop()}}),e)})))()},getProgressBatch:function(t){switch(null==t?void 0:t.status){case"Completed":return"is-success";case"Active":return"is-info";case"Paused":return"is-warning"}},getQualifications:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.allQualificationsLoaded){e.next=3;break}return e.next=3,t.$store.dispatch("qualification/getQualifications");case 3:t.userQualis=Object(o.a)(t.assignedQualifications),n=C(t.campaign.qualis);try{for(c=function(){var e=r.value,q=t.qualificationById(e.key);t.campaignQualis.push(q),q.userHasQuali=t.userQualis.some((function(t){return t.id===e.key})),0===e.value?t.inclusiveQualifications.push(q):1===e.value&&t.exclusiveQualifications.push(q)},n.s();!(r=n.n()).done;)c()}catch(t){n.e(t)}finally{n.f()}t.canUserQualify=t.checkUserQualify();case 7:case"end":return e.stop()}}),e)})))()},checkUserQualify:function(){var t=this;if(!(this.campaign.qualis.length>0))return!0;var e,n=C(this.campaign.qualis);try{var o=function(){var n=e.value;if(0===n.value&&!t.userQualis.find((function(t){return t.id===n.key}))||1===n.value&&t.userQualis.find((function(t){return t.id===n.key})))return{v:!1}};for(n.s();!(e=n.n()).done;){var c=o();if("object"===Object(r.a)(c))return c.v}}catch(t){n.e(t)}finally{n.f()}return!0}}},O=B,I=(n(1453),Object(y.a)(O,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"section is-max-widescreen"},[t.campaign&&t.campaign.info?r("instructions-modal",{attrs:{show:t.joinCampaignPopup,"inclusive-qualifications":t.inclusiveQualifications,"exclusive-qualifications":t.exclusiveQualifications,campaign:t.campaign,info:t.campaign.info},on:{clicked:t.campaignModalChange}}):t._e(),t._v(" "),t.campaign&&t.campaignBatches?r("batch-modal",{attrs:{show:t.$auth.user.accountName===t.campaign.owner[1]&&t.showBatchesPopup&&!t.cancelledBatchesPopup},on:{cancelled:t.cancelBatchModal}}):t._e(),t._v(" "),t.loadingReservation?r("div",{staticClass:"loader-wrapper is-active"},[r("img",{attrs:{src:n(373)}}),t._v(" "),r("br"),r("span",{staticClass:"loading-text"},[t._v("Making reservation")])]):t._e(),t._v(" "),r("div",{staticClass:"container"},[r("nav",{staticClass:"breadcrumb",attrs:{"aria-label":"breadcrumbs"}},[r("ul",[r("li",[r("nuxt-link",{attrs:{to:"/"}},[t._v("\n            Tasks\n          ")])],1),t._v(" "),r("li",{staticClass:"is-active"},[r("nuxt-link",{attrs:{to:"/campaigns/"+t.id,"aria-current":"page"}},[t._v("\n            Task "+t._s(t.id)+"\n          ")])],1)])]),t._v(" "),t.loading?r("div",{staticClass:"loader-wrapper is-active"},[r("img",{attrs:{src:n(373)}}),t._v(" "),r("br"),t._v(" "),t.waitingOnTransaction?r("span",{staticClass:"loading-text subtitle"},[t._v("Waiting for the transaction to complete")]):r("span",{staticClass:"loading-text subtitle"},[t._v("Please sign the transaction")])]):t._e(),t._v(" "),t.campaign?r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-three-fifths"},[r("div",{staticClass:"is-flex is-align-items-center mb-6"},[t.campaign?r("p",{staticClass:"image has-radius mr-4",staticStyle:{width:"52px",height:"52px"}},[t.campaign.info&&t.campaign.info.image?r("img",{attrs:{src:t.campaign.info.image.Hash?t.ipfsExplorer+"/ipfs/"+t.campaign.info.image.Hash:t.campaign.info.image}}):t.campaign.info&&t.campaign.info.category&&t.categories.includes(t.campaign.info.category)?r("img",{attrs:{src:n(1249)("./effect-"+t.campaign.info.category+"-icon.png")}}):r("img",{attrs:{src:n(1241),alt:"campaign title"}})]):t._e(),t._v(" "),r("div",{staticClass:"title has-text-weight-bold"},[r("span",[t._v("#"+t._s(t.id)+" ")]),t._v(" "),t.campaign.info?r("span",[t._v(t._s(t.campaign.info.title))]):null!==t.campaign.info?r("span",{staticClass:"loading-text"},[t._v("Loading")]):r("span",{staticClass:"has-text-danger-dark"},[t._v("Could not load campaign info")])])]),t._v(" "),r("div",{staticClass:"tabs campaign-tabs"},[r("ul",[r("li",{class:{"is-active":"description"===t.body}},[r("a",{on:{click:function(e){e.preventDefault(),t.body="description"}}},[t._v("Tasks")])]),t._v(" "),r("li",{class:{"is-active":"instruction"===t.body}},[r("a",{on:{click:function(e){e.preventDefault(),t.body="instruction"}}},[t._v("Instructions")])]),t._v(" "),r("li",{class:{"is-active":"preview"===t.body}},[r("a",{on:{click:function(e){e.preventDefault(),t.body="preview"}}},[t._v("Preview")])])])]),t._v(" "),"description"===t.body?r("div",{staticClass:"block"},[t.campaign.info?r("p",[t._v("\n            "+t._s(t.campaign.info.description)+"\n          ")]):r("p",[t._v("\n            ...\n          ")]),t._v(" "),r("div",{staticClass:"mt-5"},[r("div",{staticClass:"is-flex is-justify-content-space-between is-align-items-center"},[r("h4",{staticClass:"is-size-6 mb-0 has-text-weight-bold"},[t._v("\n                Tasks\n              ")]),t._v(" "),t.$auth.user.accountName===t.campaign.owner[1]?r("nuxt-link",{staticClass:"button is-primary is-pulled-right no-float-mobile has-margin-bottom-mobile",attrs:{to:"/campaigns/"+t.id+"/new"}},[r("span",{staticClass:"icon"},[t._v("\n                  +\n                ")]),t._v(" "),r("span",[t._v("Add Tasks")])]):t._e()],1),t._v(" "),r("hr",{staticClass:"mt-2 mb-5"}),t._v(" "),r("div",{staticClass:"block mt-5"},[t.campaignBatches?r("div",t._l(t.campaignBatches.slice().reverse(),(function(e){return r("nuxt-link",{key:e.id,staticClass:"box p-4",class:{"is-disabled":!1},attrs:{to:"/campaigns/"+e.campaign_id+"/"+e.batch_id}},[r("div",{staticClass:"columns is-vcentered is-multiline is-mobile"},[r("div",{staticClass:"column"},[r("p",{staticClass:"has-text-grey is-size-7"},[t._v("\n                        Batch\n                      ")]),t._v(" "),r("h2",{staticClass:"subtitle is-6 has-text-weight-semibold mb-0"},[t._v("\n                        #"),t.campaign?r("span",[t._v(t._s(t.campaign.id)+".")]):t._e(),t._v(t._s(e.id)+"\n                      ")])]),t._v(" "),r("div",{staticClass:"column"},[r("p",{staticClass:"has-text-grey is-size-7"},[t._v("\n                        Status\n                      ")]),t._v(" "),e?r("h2",{staticClass:"subtitle is-6 has-text-weight-semibold mb-0"},[t._v("\n                        "+t._s(e.status)+"\n                      ")]):t._e()]),t._v(" "),r("div",{staticClass:"column"},[e.num_tasks-e.real_tasks_done==0?r("p",{staticClass:"has-text-grey is-size-7"},[t._v("\n                        "+t._s(e.real_tasks_done)+" Task"),e.real_tasks_done>1?r("span",[t._v("s")]):t._e(),t._v(" "),r("small",[t._v("("),r("b",{staticClass:"has-text-info"},[t._v("Done")]),t._v(")")])]):"Active"===e.status&&e.num_tasks-e.real_tasks_done>0?r("p",{staticClass:"has-text-grey is-size-7"},[t._v("\n                        Tasks "),r("small",[t._v("("),r("b",[t._v(t._s(e.num_tasks-e.real_tasks_done)+" / "+t._s(e.num_tasks))]),t._v(" left)")])]):"Paused"===e.status?r("p",{staticClass:"has-text-grey is-size-7"},[t._v("\n                        "+t._s(e.real_tasks_done)+" Task "),e.real_tasks_done>1?r("span",[t._v("s")]):t._e(),r("small",[r("b",[t._v("completed")])])]):t._e(),t._v(" "),r("progress",{staticClass:"progress is-small mt-2",class:t.getProgressBatch(e),attrs:{max:e.num_tasks},domProps:{value:e.real_tasks_done}})])])])})),1):t._e(),t._v(" "),t.batchesLoading?r("div",{staticClass:"loading-text"},[t._v("\n                Tasks loading\n              ")]):t.campaignBatches&&!t.campaignBatches.length?r("div",[t._v("\n                No tasks\n              ")]):t.campaignBatches?t._e():r("div",[t._v("\n                Could not retrieve batches\n              ")])])])]):t._e(),t._v(" "),"instruction"===t.body?r("div",{staticClass:"block"},[t.campaign&&t.campaign.info?r("div",{staticClass:"content",domProps:{innerHTML:t._s(t.$md.render(t.campaign.info.instructions))}}):r("p",[t._v("\n            ...\n          ")])]):t._e(),t._v(" "),"preview"===t.body?r("div",{staticClass:"block"},[t.campaign&&t.campaign.info?r("template-media",{attrs:{html:t.renderTemplate(t.campaign.info.template||"No template found..",t.campaign.info.example_task||{})},on:{submit:t.submitTask}}):t._e()],1):t._e()]),t._v(" "),r("div",{staticClass:"column is-two-fifths"},[r("div",{staticClass:"information-block"},[t._m(0),t._v(" "),r("div",{staticClass:"p-5"},[r("div",{staticClass:"columns "},[r("div",{staticClass:"column is-half"},[t.campaign.info?r("div",{staticClass:"block"},[t.campaign.info&&t.campaign.info.category?r("nuxt-link",{staticClass:"tag is-light is-medium mb-5",class:["is-"+t.campaign.info.category],attrs:{to:"/?category="+t.campaign.info.category}},[t._v("\n                    "+t._s(t.campaign.info.category)+"\n                  ")]):r("span",{staticClass:"tag is-info is-light is-medium"},[t._v("...")])],1):t._e(),t._v(" "),r("div",{staticClass:"block mb-6"},[t._v("\n                  Reward\n                  "),r("br"),t._v(" "),r("b",[r("span",[t._v(t._s(t.campaign.reward.quantity))])]),t._v(" "),r("br"),r("br"),t._v("\n                  Time "),r("strong",[t._v("/")]),t._v(" Task\n                  "),r("br"),t._v(" "),r("b",[t.campaign.info&&t.campaign.info.estimated_time?r("span",[t._v(t._s(t.campaign.info.estimated_time)+" Seconds")]):r("span",[t._v("...")])]),t._v(" "),r("br"),r("br"),t._v("\n                  EFX "),r("strong",[t._v("/")]),t._v(" Hour\n                  "),r("br"),t._v(" "),t.campaign.info&&t.campaign.info.estimated_time?r("div",[r("b",[r("span",[t._v(t._s(t.estimatedEarnings.efxPerHour)+" EFX")]),t._v(" "),r("span",[t._v("($"+t._s(parseFloat(t.estimatedEarnings.dollarPerHour).toFixed(2))+")")])])]):r("div",[t._m(1)])])]),t._v(" "),r("div",{staticClass:"column is-half"},[r("div",{staticClass:"block"},[t._v("\n                  Requester\n                  "),r("br"),t._v(" "),r("div",{staticClass:"blockchain-address"},[r("nuxt-link",{attrs:{to:"/profile/"+t.campaign.owner[1]}},[t._v("\n                      "+t._s(t.campaign.owner[1])+"\n                    ")])],1)]),t._v(" "),r("div",{staticClass:"block"},[t._v("\n                  IPFS\n                  "),r("br"),t._v(" "),r("div",{staticClass:"blockchain-address"},[r("a",{attrs:{target:"_blank",href:t.ipfsExplorer+"/ipfs/"+t.campaign.content.field_1}},[t._v(t._s(t.campaign.content.field_1))])])]),t._v(" "),r("div",{staticClass:"block"},[t._v("\n                  Blockchain\n                  "),r("br"),t._v(" "),r("a",{attrs:{target:"_blank",href:t.$blockchain.eos.explorer+"/account/"+t.$blockchain.sdk.force.config.forceContract+"?loadContract=true&tab=Tables&table=campaign&account="+t.$blockchain.sdk.force.config.forceContract+"&scope="+t.$blockchain.sdk.force.config.forceContract+"&limit=1&lower_bound="+t.id+"&upper_bound="+t.id}},[t._v("View in Explorer")])]),t._v(" "),r("div",{staticClass:"block"},[t._v("\n                  Tasks\n                  "),r("br"),t._v(" "),null===t.activeBatchesByCampaignId(t.campaign.id)?r("span",{staticClass:"loading-text"},[t._v("\n                    Loading\n                  ")]):r("span",[t._v("\n                    "+t._s(t.activeBatchesByCampaignId(t.campaign.id).reduce((function(a,b){return a+b.num_tasks}),0)-t.activeBatchesByCampaignId(t.campaign.id).reduce((function(a,b){return a+b.real_tasks_done}),0))+"/"+t._s(t.activeBatchesByCampaignId(t.campaign.id).reduce((function(a,b){return a+b.num_tasks}),0))+" left\n                    "),r("br")])])])]),t._v(" "),r("div",{staticClass:"block is-vcentered"},[r("div",{staticClass:"is-size-4 has-text-centered"},[t._v("\n                Qualifications\n              ")]),t._v(" "),t.allQualificationsLoaded?r("div",[t._m(2),t._v(" "),t.inclusiveQualifications.length>0?r("div",{staticClass:"tags has-addons"},t._l(t.inclusiveQualifications,(function(e){return r("span",{key:e.id,staticClass:"tag",class:e.userHasQuali?"is-light is-success":"is-danger is-light",attrs:{"data-tooltip":e.userHasQuali?"Found: Ok":"Not Found: Required"}},[e.userHasQuali?r("span",[t._v("🗸")]):r("span",[t._v("🗴")]),t._v("\n                     \n                    "),r("nuxt-link",{attrs:{to:"/qualifications/"+e.id}},[t._v(t._s(e.info.name))])],1)})),0):r("div",[t._v("\n                  None\n                ")]),t._v(" "),r("br"),t._v(" "),t._m(3),t._v(" "),t.exclQualis.length>0?r("div",{staticClass:"tags"},t._l(t.exclQualis,(function(e){return r("span",{key:e.id,staticClass:"tag",class:e.userHasQuali?"is-light is-danger":"is-warning is-light",attrs:{"data-tooltip":e.userHasQuali?"Found: Excluded":"Not found: Ok"}},[e.userHasQuali?r("span",[t._v("🗴")]):r("span",[t._v("🗸")]),t._v("\n                     \n                    "),r("nuxt-link",{attrs:{to:"/qualifications/"+e.id}},[t._v(t._s(e.info.name))])],1)})),0):r("div",[t._v("\n                  None\n                ")])]):r("div",{staticClass:"loading-text has-text-centered"},[t._v("Loading")]),t._v(" "),r("br")]),t._v(" "),r("div",{staticClass:"block is-vcentered "},[t.$auth.user.accountName===t.campaign.owner[1]?r("div",[r("nuxt-link",{staticClass:"button is-fullwidth is-primary is-light has-margin-bottom-mobile",attrs:{to:"/campaigns/"+t.id+"/edit"}},[t._v("\n                  Edit Task\n                ")]),t._v(" "),r("br")],1):t._e(),t._v(" "),t.loading||null===t.campaignBatches||!t.allQualificationsLoaded?r("button",{staticClass:"button is-fullwidth is-primary is-loading"},[t._v("\n                Loading\n              ")]):!1===t.userJoined?r("button",{staticClass:"button is-fullwidth is-primary",attrs:{disabled:!t.canUserQualify},on:{click:function(e){e.preventDefault(),t.joinCampaignPopup=!0}}},[t._v("\n                Qualify\n              ")]):t.activeCampaignBatches.reduce((function(a,b){return a+b.num_tasks}),0)-t.activeCampaignBatches.reduce((function(a,b){return a+b.real_tasks_done}),0)>0&&!t.userReservation?r("button",{staticClass:"button is-fullwidth is-primary",attrs:{disabled:!t.canUserQualify},on:{click:function(e){return e.preventDefault(),t.reserveTask.apply(null,arguments)}}},[t._v("\n                Make Task Reservation\n              ")]):t.userReservation?r("button",{staticClass:"button is-fullwidth is-accent has-text-weight-semibold",on:{click:function(e){return e.preventDefault(),t.reserveTask.apply(null,arguments)}}},[t._v("\n                Go To Task\n              ")]):[t.userJoined?r("button",{staticClass:"button is-fullwidth is-primary",attrs:{disabled:!0}},[t._v("\n                  Qualified for Task\n                ")]):t._e(),t._v(" "),t._m(4)],t._v(" "),t.canUserQualify?t._e():r("p",{staticClass:"mt-1 is-size-7 has-text-centered"},[t._v("\n                You are not qualified to participate in this task\n              ")])],2)])])])]):r("div",{staticClass:"loading-text"},[t._v("\n      Task loading\n    ")])]),t._v(" "),t.completed&&t.successMessage?r("success-modal",{attrs:{message:t.successMessage,title:t.successTitle}}):t._e()],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"information-header has-text-centered"},[n("h4",{staticClass:"p-5 is-size-4"},[n("b",[t._v("Information")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b",[n("span",[t._v("...")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("Required "),n("i",[t._v("(Having these qualifications is required)")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("Exclude "),n("i",[t._v("(Having these qualifications will exclude you from this task)")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"has-text-centered"},[n("i",[t._v("No active tasks currently")])])}],!1,null,"c7f202d0",null));e.default=I.exports}}]);